!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=61)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(11),c=n(1),l=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this))).termType=e.termType,t&&t.termType===e.termType&&(t=t.value),!t)throw new Error("Missing IRI for NamedNode");if(!t.includes(":"))throw new Error('NamedNode IRI "'+t+'" must be absolute.');if(t.includes(" "))throw new Error('Error: NamedNode IRI "'+t+'" must not contain unencoded spaces.');return n.value=t,n}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,c),n=e,u=[{key:"fromValue",value:function(t){return void 0===t||null===t?t:t&&t.termType?t:new e(t)}}],(r=[{key:"dir",value:function(){var t=this.uri.split("#")[0],n=t.slice(0,-1).lastIndexOf("/"),r=t.indexOf("//");return r>=0&&n<r+2||n<0?null:new e(t.slice(0,n+1))}},{key:"site",value:function(){var t=this.uri.split("#")[0],n=t.indexOf("//");if(n<0)throw new Error("This URI does not have a web site part (origin)");var r=t.indexOf("/",n+2);if(r<0)throw new Error("This URI does not have a web site part. (origin)");return new e(t.slice(0,r+1))}},{key:"doc",value:function(){return this.uri.indexOf("#")<0?this:new e(this.uri.split("#")[0])}},{key:"toString",value:function(){return"<"+this.uri+">"}},{key:"uri",get:function(){return this.value},set:function(t){this.value=t}}])&&i(n.prototype,r),u&&i(n,u),e}();l.termType="NamedNode",l.prototype.classOrder=u.NamedNode,l.prototype.isVar=0,t.exports=l},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"substitute",value:function(t){return this}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.value<t.value?-1:this.value>t.value?1:0}},{key:"equals",value:function(t){return!!t&&(this.termType===t.termType&&this.value===t.value)}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(t){return this.equals(t)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])&&r(e.prototype,n),i&&r(e,i),t}();t.exports=i,i.fromValue=function(t){var e=n(17),r=n(12);n(0);return void 0===t||null===t?t:t&&t.termType?t:Array.isArray(t)?new e(t):r.fromValue(t)},i.toJS=function(t){return t.elements?t.elements.map(i.toJS):t.datatype?t.datatype.equals(ns.xsd("boolean"))?"1"===t.value:t.datatype.equals(ns.xsd("dateTime"))||t.datatype.equals(ns.xsd("date"))?new Date(t.value):t.datatype.equals(ns.xsd("integer"))||t.datatype.equals(ns.xsd("float"))||t.datatype.equals(ns.xsd("decimal"))?Number(t.value):t.value:t}},function(t,e,n){"use strict";var r=r||console.log;t.exports.docpart=o,t.exports.document=function(t){return new i(o(t.uri))},t.exports.hostpart=function(t){var e=/[^\/]*\/\/([^\/]*)\//.exec(t);return e?e[1]:""},t.exports.join=function(t,e){var n,i,o,s,a,u=e.indexOf("#");u>0&&(e=e.slice(0,u));if(0===t.length)return e;if(0===t.indexOf("#"))return e+t;if(t.indexOf(":")>=0)return t;if(n=e.indexOf(":"),0===e.length)return t;if(n<0)return r("Invalid base: "+e+" in join with given: "+t),t;if(i=e.slice(0,+n+1||9e9),0===t.indexOf("//"))return i+t;if(e.indexOf("//",n)===n+1){if((o=e.indexOf("/",n+3))<0)return e.length-n-3>0?e+"/"+t:i+t}else if((o=e.indexOf("/",n+1))<0)return e.length-n-1>0?e+"/"+t:i+t;if(0===t.indexOf("/"))return e.slice(0,o)+t;if(a=e.slice(o),(s=a.lastIndexOf("/"))<0)return i+t;s>=0&&s<a.length-1&&(a=a.slice(0,+s+1||9e9));a+=t;for(;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"");return a=(a=a.replace(/\.\//g,"")).replace(/\/\.$/,"/"),e.slice(0,o)+a},t.exports.protocol=function(t){var e;return(e=t.indexOf(":"))<0?null:t.slice(0,e)},t.exports.refTo=function(t,e){var n,r,i,o,s,a,u,c,l,f,h,p,d=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!t)return e;if(t===e)return"";for(n=u=0,o=e.length;u<o&&e[n]===t[n];n=++u);if(t.slice(0,n).match(d)&&((r=e.indexOf("//"))<0&&(r=-2),i=e.indexOf("/",r+2),"/"!==e[i+1]&&"/"!==t[i+1]&&e.slice(0,i)===t.slice(0,i)))return e.slice(i);if("#"===e[n]&&t.length===n)return e.slice(n);for(;n>0&&"/"!==e[n-1];)n--;if(n<3)return e;if(t.indexOf("//",n-2)>0||e.indexOf("//",n-2)>0)return e;if(t.indexOf(":",n)>0)return e;for(a=0,f=t.slice(n),c=0,s=f.length;c<s;c++)"/"===f[c]&&a++;if(0===a&&n<e.length&&"#"===e[n])return"./"+e.slice(n);if(0===a&&n===e.length)return"./";if(p="",a>0)for(l=1,h=a;h>=1?l<=h:l>=h;h>=1?++l:--l)p+="../";return p+e.slice(n)};var i=n(0);function o(t){var e;return(e=t.indexOf("#"))<0?t:t.slice(0,e)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var e=n(2).docpart,r=n(10),i=n(0);function o(t,e,n,r){var i,s="",a=[!1];if(void 0===t.nodeType)return s;if(1===t.nodeType){if(t.hasAttribute("class")&&"classWithChildText"in e&&t.matches(e.classWithChildText.class))s+=t.querySelector(e.classWithChildText.element).textContent;else if(!("skipNodeWithClass"in e&&t.matches("."+e.skipNodeWithClass))){var u=t.nodeName.toLowerCase();s+="<"+u;var c=[];for(i=t.attributes.length-1;i>=0;i--){var l=t.attributes[i];if(!(r.length>0&&r[l.name])&&!/^\d+$/.test(l.name)){if("class"===l.name&&"replaceClassItemWith"in e&&l.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var f=new RegExp(e.replaceClassItemWith.source,"g");l.value=l.value.replace(f,e.replaceClassItemWith.target).trim()}"class"===l.name&&"skipClassWithValue"in e&&e.skipClassWithValue===l.value||c.push(l.name+"='"+l.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(c.length>0&&("sortAttributes"in e&&e.sortAttributes&&c.sort(function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}),s+=" "+c.join(" ")),n[u])s+=" />";else{for(s+=">",s+="html"===u?"\n  ":"",a.push("style"===u||"script"===u),i=0;i<t.childNodes.length;i++)s+=o(t.childNodes[i]);a.pop(),s+="body"===u?"</"+u+">\n":"</"+u+">"}}}else if(8===t.nodeType)s+="\x3c!--"+t.nodeValue+"--\x3e";else if(3===t.nodeType||4===t.nodeType){var h=t.nodeValue.replace(/\n+$/,"");s+=a[a.length-1]?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return s}function s(t,e,n,r){var i=function(t){return"BlankNode"===t.termType?null:t},o=function(t){var e=n.statementsMatching(t).map(function(t){return i(t.subject)+" "+i(t.predicate)+" "+i(t.object)}).concat(n.statementsMatching(void 0,void 0,t).map(function(t){return i(t.subject)+" "+i(t.predicate)+" "+i(t.object)}));return e.sort(),e.join("\n")};return"BlankNode"===t.termType&&"BlankNode"===e.termType?0===t.compareTerm(e)?0:o(t)>o(e)?1:o(t)<o(e)?-1:t.compareTerm(e):r&&t.uri&&e.uri?(r[t.uri]||t.uri).localeCompare(r[e.uri]||e.uri):t.compareTerm(e)}function a(t,e){return t.slice(0,e.length)===e}t.exports.AJAR_handleNewTerm=function(t,n,i){var o=null;if(void 0===t.fetcher)return;o=t.fetcher;if("NamedNode"!==n.termType)return;var s,u=e(n.uri);if(n.uri.indexOf("#")<0){if(a(n.uri,"http://dbpedia.org/resource/Category:"))return;a(n.uri,"http://purl.org/dc/elements/1.1/")||a(n.uri,"http://purl.org/dc/terms/")?s="http://dublincore.org/2005/06/13/dcq":a(n.uri,"http://xmlns.com/wot/0.1/")?s="http://xmlns.com/wot/0.1/index.rdf":a(n.uri,"http://web.resource.org/cc/")&&(s="http://web.resource.org/cc/schema.rdf")}s&&(u=s);if(o&&"unrequested"!==o.getState(u))return;s&&r.warn("Assuming server still broken, faking redirect of <"+n.uri+"> to <"+u+">");return o.fetch(u,{referringTerm:i})},t.exports.ArrayIndexOf=function(t,e,n){n||(n=0);var r=t.length;n<0&&(n=r+n);for(;n<r;n++)if(t[n]===e)return n;return-1},t.exports.callbackify=function(t,e){t.callbacks={};for(var n=e.length-1;n>=0;n--)t.callbacks[e[n]]=[];t.addHook=function(e){t.callbacks[e]||(t.callbacks[e]=[])},t.addCallback=function(e,n){t.callbacks[e].push(n)},t.removeCallback=function(e,n){for(var r=0;r<t.callbacks[e].length;r++)if(t.callbacks[e][r].name===n)return t.callbacks[e].splice(r,1),!0;return!1},t.insertCallback=function(e,n){t.callbacks[e].unshift(n)},t.fireCallbacks=function(e,n){var r,i,o=[],s=[],a=t.callbacks[e].length;for(r=a-1;r>=0;r--)(i=t.callbacks[e][r])&&i.apply(t,n)&&o.push(i);for(r=o.length-1;r>=0;r--)s.push(o[r]);for(r=a;r<t.callbacks[e].length;r++)s.push(t.callbacks[e][r]);t.callbacks[e]=s}},t.exports.dtstamp=function(){var t=new Date,e=t.getYear()+1900,n=t.getMonth()+1,r=t.getDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),s=t.getSeconds();n<10&&(n="0"+n);r<10&&(r="0"+r);i<10&&(i="0"+i);o<10&&(o="0"+o);s<10&&(s="0"+s);return e+"-"+n+"-"+r+"T"+i+":"+o+":"+s+"Z"},t.exports.DOMParserFactory=function(){return window.DOMParser?new DOMParser:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")},t.exports.domToString=function(t,e){var n=[];"selfClosing"in(e=e||{})&&e.selfClosing.split(" ").forEach(function(t){n[t]=!0});var r=[];"skipAttributes"in e&&e.skipAttributes.split(" ").forEach(function(t){r[t]=!0});return o(t,e,n,r)},t.exports.dumpNode=o,t.exports.heavyCompare=s,t.exports.heavyCompareSPO=function(t,e,n,r){return s(t.subject,e.subject,n,r)||s(t.predicate,e.predicate,n,r)||s(t.object,e.object,n,r)},t.exports.output=function(t){var e=document.createElement("div");e.textContent=t,document.body.appendChild(e)},t.exports.parseXML=function(e,r){var i;if(r=r||{},t&&t.exports){var o=n(82).DOMParser,s=(new o).parseFromString(e,r.contentType||"application/xhtml+xml");return s}i="undefined"!=typeof window&&window.DOMParser?new window.DOMParser:new o;return i.parseFromString(e,"application/xml")},t.exports.RDFArrayRemove=function(t,e){for(var n=0;n<t.length;n++)if(t[n].subject.sameTerm(e.subject)&&t[n].predicate.sameTerm(e.predicate)&&t[n].object.sameTerm(e.object)&&t[n].why.sameTerm(e.why))return void t.splice(n,1);throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)},t.exports.stackString=function(t){var e=t+"\n";if(!t.stack)return e+"No stack available.\n";for(var n=t.stack.toString().split("\n"),r=[],i=0;i<n.length;i++){var o=n[i];if(o.indexOf("ecmaunit.js")>-1)break;"("==o.charAt(0)&&(o="function"+o);var s=o.split("@");r.push(s)}for(var i=0;i<r.length;i++)e+="  "+r[i][1]+"\n    "+r[i][0];return e},t.exports.string_startswith=a,t.exports.string={},t.exports.string.template=function(t,e){for(var n=t.split("%s"),r="",i=0;i<e.length;i++)e[i]+="",r+=n[i]+e[i];return r+n.slice(e.length).join()},t.exports.uri=n(2),t.exports.log=r,t.exports.mediaTypeClass=function(t){return t=t.split(";")[0].trim(),new i("http://www.w3.org/ns/iana/media-types/"+t+"#Resource")},t.exports.linkRelationProperty=function(t){return new i("http://www.w3.org/ns/iana/link-relations/relation#"+t.trim())}}).call(this,n(81)(t))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(11),c=n(1),l=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this))).termType=e.termType,t){if("string"!=typeof t)throw new Error("Bad id argument to new blank node: "+t);if(t.includes("#")){var r=t.split("#");t=r[r.length-1]}n.id=t}else n.id="n"+e.nextId++;return n.value=n.id,n}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,c),n=e,(r=[{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}},{key:"copy",value:function(t){var n=new e;return t.copyTo(this,n),n}},{key:"toCanonical",value:function(){return"_:"+this.value}},{key:"toString",value:function(){return e.NTAnonymousNodePrefix+this.id}}])&&i(n.prototype,r),u&&i(n,u),e}();l.nextId=0,l.termType="BlankNode",l.NTAnonymousNodePrefix="_:",l.prototype.classOrder=u.BlankNode,l.prototype.isBlank=1,l.prototype.isVar=1,t.exports=l},function(t,e){},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(18),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var o=n(14);o.inherits=n(8);var s=n(47),a=n(30);o.inherits(f,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=a.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";t.exports={debug:function(t){},warn:function(t){},info:function(t){},error:function(t){},success:function(t){},msg:function(t){}}},function(t,e,n){"use strict";t.exports={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(11),c=n(0),l=n(1),f=n(39),h=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=o(this,s(e).call(this))).termType=e.termType,i.value=t,n&&(i.lang=n,r=f.langString),r&&(i.datatype=c.fromValue(r)),i}var n,u,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,l),n=e,h=[{key:"fromBoolean",value:function(t){return new e(t?"1":"0",null,f.boolean)}},{key:"fromDate",value:function(t){if(!(t instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var n=function(t){return(""+(100+t)).slice(1,3)};return new e(t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"Z",null,f.dateTime)}},{key:"fromNumber",value:function(t){if("number"!=typeof t)throw new TypeError("Invalid argument to Literal.fromNumber()");var n=t.toString();return new e(n,null,n.indexOf("e")<0&&Math.abs(t)<=Number.MAX_SAFE_INTEGER?Number.isInteger(t)?f.integer:f.decimal:f.double)}},{key:"fromValue",value:function(t){if(void 0===t||null===t)return t;if("object"===r(t)&&t.termType)return t;switch(r(t)){case"object":if(t instanceof Date)return e.fromDate(t);case"boolean":return e.fromBoolean(t);case"number":return e.fromNumber(t);case"string":return new e(t)}throw new Error("Can't make literal from "+t+" of type "+r(t))}}],(u=[{key:"copy",value:function(){return new e(this.value,this.lang,this.datatype)}},{key:"equals",value:function(t){return!!t&&(this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype)))}},{key:"toNT",value:function(){if("number"==typeof this.value)return this.toString();if("string"!=typeof this.value)throw new Error("Value of RDF literal is not string or number: "+this.value);var t=this.value;return t='"'+(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\"/g,'\\"')).replace(/\n/g,"\\n"))+'"',this.language?t+="@"+this.language:this.datatype.equals(f.string)||(t+="^^"+this.datatype.toCanonical()),t}},{key:"toString",value:function(){return""+this.value}},{key:"language",get:function(){return this.lang},set:function(t){this.lang=t||""}}])&&i(n.prototype,u),h&&i(n,h),e}();h.termType="Literal",h.prototype.classOrder=u.Literal,h.prototype.datatype=f.string,h.prototype.lang="",h.prototype.isVar=0,t.exports=h},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(64),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(50).Buffer)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(4).ArrayIndexOf,c=n(57),l=n(4).RDFArrayRemove,f=n(21),h=n(1),p=n(22);function d(t,e,n,r){var i=t.any(e,n,void 0);return!!i&&(t.equate(i,r),!0)}function v(t,e,n,r){var i=t.any(void 0,n,r);return!!i&&(t.equate(i,e),!0)}function y(t,e,n,r,i){t.typeCallback&&t.typeCallback(t,r,i);var o=t.classActions[r.hashString()],s=!1;if(o)for(var a=0;a<o.length;a++)s=s||o[a](t,e,n,r,i);return s}var g=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this))).propertyActions=[],n.classActions=[],n.redirections=[],n.aliases=[],n.HTTPRedirects=[],n.subjectIndex=[],n.predicateIndex=[],n.objectIndex=[],n.whyIndex=[],n.index=[n.subjectIndex,n.predicateIndex,n.objectIndex,n.whyIndex],n.namespaces={},n.features=t||["sameAs","InverseFunctionalProperty","FunctionalProperty"],n.initPropertyActions(n.features),n}var r,g,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,c),r=e,m=[{key:"defaultGraphURI",get:function(){return"chrome:theSession"}}],(g=[{key:"substitute",value:function(t){var n=this.statements.map(function(e){return e.substitute(t)}),r=new e;return r.add(n),r}},{key:"applyPatch",value:function(t,e,r){var i,o=n(23).Query,s=this,a=null,u=function(n){if(t.delete){i=t.delete,a&&(i=i.substitute(a));var o=[],u=(i=i.statements).map(function(t){var n=s.statementsMatching(t.subject,t.predicate,t.object,e);return 0===n.length?(o.push(t),null):n[0]});if(o.length)return r("Could not find to delete: "+o.join("\n or "));u.map(function(t){s.remove(t)})}t.insert&&(i=t.insert,a&&(i=i.substitute(a)),(i=i.statements).map(function(t){t.why=e,s.add(t.subject,t.predicate,t.object,t.why)})),n()};if(t.where){var c=new o("patch");c.pat=t.where,c.pat.statements.map(function(t){t.why=e});var l=[];s.query(c,function(t){l.push(t)},s.fetcher,function(){return 0===l.length?r("No match found to be patched:"+t.where):l.length>1?r("Patch ambiguous. No patch done."):(a=l[0],void u(r))})}else u(r)}},{key:"declareExistential",value:function(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}},{key:"initPropertyActions",value:function(t){this.propertyActions["<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"]=[y],u(t,"sameAs")>=0&&(this.propertyActions["<http://www.w3.org/2002/07/owl#sameAs>"]=[function(t,e,n,r,i){return t.equate(e,r),!0}]),u(t,"InverseFunctionalProperty")>=0&&(this.classActions["<http://www.w3.org/2002/07/owl#InverseFunctionalProperty>"]=[function(t,e,n,r,i){return t.newPropertyAction(e,v)}]),u(t,"FunctionalProperty")>=0&&(this.classActions["<http://www.w3.org/2002/07/owl#FunctionalProperty>"]=[function(t,e,n,r,i){return t.newPropertyAction(e,d)}])}},{key:"add",value:function(t,n,r,i){var o,s,a;if(1===arguments.length){if(t instanceof Array)for(o=0;o<t.length;o++)this.add(t[o]);else t instanceof f?this.add(t.subject,t.predicate,t.object,t.why):t instanceof e&&this.add(t.statements);return this}i||(i=this.fetcher?this.fetcher.appNode:this.sym("chrome:theSession")),t=h.fromValue(t),n=h.fromValue(n),r=h.fromValue(r),i=h.fromValue(i),this.predicateCallback&&this.predicateCallback(this,n,i);var u=this.canon(n).hashString(),c=!1;if(s=this.propertyActions[u])for(o=0;o<s.length;o++)c=c||s[o](this,t,n,r,i);if(this.holds(t,n,r,i))return null;var l=[this.canon(t).hashString(),u,this.canon(r).hashString(),this.canon(i).hashString()];for(a=new f(t,n,r,i),o=0;o<4;o++){var p=this.index[o],d=l[o];p[d]||(p[d]=[]),p[d].push(a)}return this.statements.push(a),a}},{key:"canon",value:function(t){if(!t)return t;var e=this.redirections[t.hashString()];return e||t}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var t=0;t<4;t++){var e=this.index[t];for(var n in e)e.hasOwnProperty(n)&&this.checkStatementList(e[n],t)}}},{key:"checkStatementList",value:function(t,e){for(var n,r=" found in "+["subject","predicate","object","why"][e]+" index.",i=0;i<t.length;i++){for(var o=[(n=t[i]).subject,n.predicate,n.object,n.why],s=function(t,e){for(var n=0;n<t.length;n++)if(t[n].subject.sameTerm(e.subject)&&t[n].predicate.sameTerm(e.predicate)&&t[n].object.sameTerm(e.object)&&t[n].why.sameTerm(e.why))return!0},a=0;a<4;a++){var u=this.canon(o[a]).hashString();this.index[a][u]&&s(this.index[a][u],n)}if(!s(this.statements,n))throw new Error("Statement list does not statement "+n+"@"+n.why+r)}}},{key:"close",value:function(){return this}},{key:"copyTo",value:function(t,e,n){n||(n=[]);var r=this.statementsMatching(t);-1!==u(n,"two-direction")&&r.concat(this.statementsMatching(void 0,void 0,t));for(var i=0;i<r.length;i++){var o=r[i];switch(o.object.termType){case"NamedNode":this.add(e,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(e,o.predicate,o.object.copy(this))}-1!==u(n,"delete")&&this.remove(o)}}},{key:"equate",value:function(t,e){t=this.canon(t),e=this.canon(e);var n=t.compareTerm(e);return!n||(n<0?this.replaceWith(e,t):this.replaceWith(t,e))}},{key:"formula",value:function(t){return new e(t)}},{key:"match",value:function(t,e,n,r){return this.statementsMatching(h.fromValue(t),h.fromValue(e),h.fromValue(n),h.fromValue(r))}},{key:"mentionsURI",value:function(t){var e="<"+t+">";return!!this.subjectIndex[e]||!!this.objectIndex[e]||!!this.predicateIndex[e]}},{key:"newExistential",value:function(t){if(!t)return this.bnode();var e=this.sym(t);return this.declareExistential(e)}},{key:"newPropertyAction",value:function(t,e){var n=t.hashString();this.propertyActions[n]||(this.propertyActions[n]=[]),this.propertyActions[n].push(e);for(var r=this.statementsMatching(void 0,t,void 0),i=!1,o=0;o<r.length;o++)i=i||e(this,r[o].subject,t,r[o].object);return i}},{key:"newUniversal",value:function(t){var e=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(e),e}},{key:"variable",value:function(t){return new p(t)}},{key:"nextSymbol",value:function(t){for(var e=0;;e++){var n=t.uri+"#n"+e;if(!this.mentionsURI(n))return this.sym(n)}}},{key:"query",value:function(t,e,r,i){return n(23).indexedFormulaQuery.call(this,t,e,r,i)}},{key:"remove",value:function(t){if(t instanceof Array){for(var n=0;n<t.length;n++)this.remove(t[n]);return this}if(t instanceof e)return this.remove(t.statements);var r=this.statementsMatching(t.subject,t.predicate,t.object,t.why);if(!r.length)throw new Error("Statement to be removed is not on store: "+t);return this.removeStatement(r[0]),this}},{key:"removeDocument",value:function(t){for(var e=this.statementsMatching(void 0,void 0,void 0,t).slice(),n=0;n<e.length;n++)this.removeStatement(e[n]);return this}},{key:"removeMany",value:function(t,e,n,r,i){for(var o=this.statementsMatching(t,e,n,r,!1),s=[],a=0;a<o.length;a++)s.push(o[a]);for(i&&(s=s.slice(0,i)),a=0;a<s.length;a++)this.remove(s[a])}},{key:"removeMatches",value:function(t,e,n,r){return this.removeStatements(this.statementsMatching(t,e,n,r)),this}},{key:"removeStatement",value:function(t){for(var e=[t.subject,t.predicate,t.object,t.why],n=0;n<4;n++){var r=this.canon(e[n]).hashString();this.index[n][r]&&l(this.index[n][r],t)}return l(this.statements,t),this}},{key:"removeStatements",value:function(t){for(var e=0;e<t.length;e++)this.remove(t[e]);return this}},{key:"replaceWith",value:function(t,e){for(var n=t.hashString(),r=e.hashString(),i=function(t){var e=t[n];if(e){var i=t[r];t[r]=i?e.concat(i):e,delete t[n]}},o=0;o<4;o++)i(this.index[o]);if(this.redirections[n]=e,t.uri){if(this.aliases[r]||(this.aliases[r]=[]),this.aliases[r].push(t),this.aliases[n])for(o=0;o<this.aliases[n].length;o++)this.redirections[this.aliases[n][o].hashString()]=e,this.aliases[r].push(this.aliases[n][o]);this.add(e,this.sym("http://www.w3.org/2007/ont/link#uri"),t.uri),this.fetcher&&this.fetcher.nowKnownAs(t,e)}return i(this.classActions),i(this.propertyActions),!0}},{key:"allAliases",value:function(t){var e=this.aliases[this.canon(t).hashString()]||[];return e.push(this.canon(t)),e}},{key:"sameThings",value:function(t,e){if(t.sameTerm(e))return!0;var n=this.canon(t);if(!n)return!1;var r=this.canon(e);return!!r&&n.uri===r.uri}},{key:"setPrefixForURI",value:function(t,e){"tab"===t&&this.namespaces.tab||"ns"!==t.slice(0,2)&&"default"!==t.slice(0,7)&&(this.namespaces[t]=e)}},{key:"statementsMatching",value:function(t,e,n,r,i){var o,s,a=[t,e,n,r],u=[],c=[],l=[],f=[];for(o=0;o<4;o++)u[o]=this.canon(h.fromValue(a[o])),u[o]?(f.push(o),c[o]=u[o].hashString()):l.push(o);if(0===f.length)return this.statements;if(1===f.length)return o=f[0],(s=this.index[o][c[o]])&&i&&s.length>1&&(s=s.slice(0,1)),s=s||[];var p,d,v=1e10;for(d=0;d<f.length;d++){if(o=f[d],!(s=this.index[o][c[o]]))return[];s.length<v&&(v=s.length,p=d)}for(var y=f[p],g=this.index[y][c[y]],m=f.slice(0,p).concat(f.slice(p+1)),w=[],b=["subject","predicate","object","why"],x=0;x<g.length;x++){var _=g[x];for(d=0;d<m.length;d++)if(o=m[d],!this.canon(_[b[o]]).sameTerm(u[o])){_=null;break}if(null!=_&&(w.push(_),i))break}return w}},{key:"uris",value:function(t){var e=this.canon(t),n=this.aliases[e.hashString()];if(!e.uri)return[];var r=[e.uri];if(n)for(var i=0;i<n.length;i++)r.push(n[i].uri);return r}},{key:"length",get:function(){return this.statements.length}}])&&i(r.prototype,g),m&&i(r,m),e}();t.exports=g,g.handleRDFType=y},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){return function(e){return new r(t+(e||""))}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(6),c=n(11),l=n(1),f=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this))).termType=e.termType,n.id=u.nextId++,n.elements=[],n.closed=!1,t&&t.length>0&&t.forEach(function(t){n.elements.push(l.fromValue(t))}),n}var n,r,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,l),n=e,(r=[{key:"append",value:function(t){return this.elements.push(t)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(t){return new e(this.elements.map(function(e){e.substitute(t)}))}},{key:"toNT",value:function(){return u.NTAnonymousNodePrefix+this.id}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(t){return this.elements.unshift(t)}}])&&i(n.prototype,r),c&&i(n,c),e}();f.termType="Collection",f.prototype.classOrder=c.Collection,f.prototype.compareTerm=u.prototype.compareTerm,f.prototype.isVar=0,t.exports=f},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,n(5))},function(t,e,n){var r=n(50),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r=n(6),i=n(17),o=n(80),s=n(32),a=n(15),u=n(12),c=n(0),l=n(21),f=n(22);function h(t){return new c(t)}function p(t,e,n,r){return r=r||new o,new l(t,e,n,r)}t.exports.blankNode=function(t){return new r(t)},t.exports.defaultGraph=function(){return new o},t.exports.graph=function(){return new a},t.exports.literal=function(t,e){return"string"==typeof e?-1===e.indexOf(":")?new u(t,e):new u(t,null,h(e)):new u(t,null,e)},t.exports.namedNode=h,t.exports.quad=p,t.exports.triple=function(t,e,n){return p(t,e,n)},t.exports.variable=function(t){return new f(t)},t.exports.collection=function(t){return new i(t)},t.exports.fetcher=function(t,e){return new s(t,e)},t.exports.lit=function(t,e,n){return new u(""+t,e,n)},t.exports.st=function(t,e,n,r){return new l(t,e,n,r)}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(1),o=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subject=i.fromValue(e),this.predicate=i.fromValue(n),this.object=i.fromValue(r),this.why=o}var e,n,o;return e=t,(n=[{key:"equals",value:function(t){return t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}},{key:"substitute",value:function(e){var n=new t(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),this.why.substitute(e));return n}},{key:"toCanonical",value:function(){var t=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&"DefaultGraph"!==this.graph.termType&&t.push(this.graph.toCanonical()),t.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}},{key:"graph",get:function(){return this.why},set:function(t){this.why=t}}])&&r(e.prototype,n),o&&r(e,o),t}();t.exports=o},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(11),c=n(1),l=n(2),f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).termType=e.termType,t.value=n,t.base="varid:",t.uri=l.join(n,t.base),t}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,c),n=e,(r=[{key:"equals",value:function(t){return!!t&&(this.termType===t.termType&&this.value===t.value)}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(t){var e;return null!=(e=t[this.toNT()])?e:this}},{key:"toString",value:function(){return this.uri.slice(0,this.base.length)===this.base?"?"+this.uri.slice(this.base.length):"?"+this.uri}}])&&i(n.prototype,r),u&&i(n,u),e}();f.termType="Variable",f.prototype.classOrder=u.Variable,f.prototype.isVar=1,t.exports=f},function(t,e,n){"use strict";var r=n(15),i=n(10),o=n(2).docpart,s=r.defaultGraphURI;t.exports.Query=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pat=new r,this.vars=[],this.name=e,this.id=n},t.exports.indexedFormulaQuery=function(t,e,n,r){var a=function(t){var e,n="";for(e in t)t.hasOwnProperty(e)&&(n+="    "+e+" -> "+t[e]);return n},u=function(t){var e,n="Bindings: ",r=t.length;for(e=0;e<r;e++)n+=a(t[e][0])+";\n\t";return n},c=function(t,e,n,r){var i=n[t];if(void 0===i){if(t.isVar){var o=[];return o[t]=e,[[o,null]]}i=t}if(!i.complexType)return r.redirections[i]&&(i=r.redirections[i]),r.redirections[e]&&(e=r.redirections[e]),i.sameTerm(e)||i.uri&&i.uri===s?[[[],null]]:[];if(t instanceof Array)return e instanceof Array?l(t,e,n):[];throw new Error("query.js: oops - code not written yet")},l=function t(e,n,r,i){var o;if(e.length!==n.length)return[];if(!e.length)return[[[],null]];var s=c(e[0],n[0],r,i);if(0===s.length)return s;var a,u,l,f,h,p,d,v=[],y=s.length;for(a=0;a<y;a++){for(h in d=[],u=s[a][0])u.hasOwnProperty(h)&&(d[h]=u[h]);for(h in r)r.hasOwnProperty(h)&&(d[h]=r[h]);for(f=(o=t(e.slice(1),n.slice(1),d,i)).length,l=0;l<f;l++){for(h in p=o[l][0],u)u.hasOwnProperty(h)&&(p[h]=u[h]);v.push([p,null])}}return v},f=function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r},h=function(t,e){return this.trunkBindings=e,this.originalCallback=t,this.branches=[],this};h.prototype.checkAllDone=function(){var t;for(t=0;t<this.branches.length;t++)if(!this.branches[t].done)return;i.debug("OPTIONAL BIDNINGS ALL DONE:"),this.doCallBacks(this.branches.length-1,this.trunkBindings)},h.prototype.doCallBacks=function(t,e){var n;if(t<0)return this.originalCallback(e);for(n=0;n<this.branches[t].results.length;n++)this.doCallBacks(t-1,f(e,this.branches[t].results[n]))};var p=function(t,e){return this.count=0,this.success=!1,this.done=!1,this.callback=t,this.onDone=e,this};p.prototype.reportMatch=function(t){this.callback(t),this.success=!0},p.prototype.reportDone=function(){this.done=!0,i.info("Mandatory query branch finished.***"),void 0!==this.onDone&&this.onDone()};var d=function(t){return this.count=0,this.done=!1,this.results=[],this.junction=t,t.branches.push(this),this};d.prototype.reportMatch=function(t){this.results.push(t)},d.prototype.reportDone=function(){i.debug("Optional branch finished - results.length = "+this.results.length),0===this.results.length&&(this.results.push({}),i.debug("Optional branch FAILED - that's OK.")),this.done=!0,this.junction.checkAllDone()};var v=function(t,e,n){var r,i,o,a,u,c;for(e.nvars=0,e.index=null,r=[e.subject,e.predicate,e.object,e.why],a=[t.subjectIndex,t.predicateIndex,t.objectIndex,t.whyIndex],o=0;o<4;o++){var l=r[o];if(l.uri&&l.uri===s);else if(l.isVar&&void 0===n[l])e.nvars++;else{if(l=void 0===(c=n[u=r[o]])?u:c,t.redirections[l.hashString()]&&(l=t.redirections[l.hashString()]),!(i=a[o][l.hashString()]))return e.index=[],!1;(null===e.index||e.index.length>i.length)&&(e.index=i)}}return null===e.index&&(e.index=t.statements),!0};function y(t,e){return t.nvars!==e.nvars?t.nvars-e.nvars:t.index.length-e.index.length}var g=function t(n,r,s,u,c,l,f){i.debug("Match begins, Branch count now: "+f.count+" for "+f.pattern_debug);var p,v,y=n.fetcher?n.fetcher:null,g=r.statements;if(0===g.length){if(i.debug("FOUND MATCH WITH BINDINGS:"+a(s)),0===r.optional.length)f.reportMatch(s);else{i.debug("OPTIONAL: "+r.optional);var m,b=new h(e,s),x=[];for(m=0;m<r.optional.length;m++)x[m]=new d(b),x[m].pattern_debug=r.optional[m];for(m=0;m<r.optional.length;m++)x[m].count=x[m].count+1,t(n,r.optional[m],s,"",c,e,x[m])}return f.count--,void i.debug("Match ends -- success , Branch count now: "+f.count+" for "+f.pattern_debug)}var _=g.length;if(y){var S=function(e,i){var o=e.uri.split("#")[0];y.nowOrWhenFetched(o,void 0,function(e,i,o){t(n,r,s,u,c,l,f)})};for(v=0;v<_;v++){if(p=g[v],void 0!==s[p.subject]&&s[p.subject].uri&&y&&"unrequested"===y.getState(o(s[p.subject].uri)))return void S(s[p.subject]);if(void 0!==s[p.object]&&s[p.object].uri&&y&&"unrequested"===y.getState(o(s[p.object].uri)))return void S(s[p.object])}}w(n,r,s,u,c,l,f)},m=function(t,e){var n,r,i=!0;for(n in t)t.hasOwnProperty(n)&&e[n]&&(r=e[n].test)&&!r(t[n])&&(i=!1);return i},w=function(t,e,n,r,o,s,c){var f,h,p,d,w,b,x,_=e.statements,S=_.length;for(f=0;f<S;f++)x=_[f],v(t,x,n);_.sort(y),x=_[0];var E,k=t.formula();k.optional=e.optional,k.constraints=e.constraints,k.statements=_.slice(1),i.debug(r+"match2 searching "+x.index.length+" for "+x+"; bindings so far="+a(n));var T,O,A=x.index.length,R=0;for(E=0;E<A;E++)for(O=x.index[E],T=l([x.subject,x.predicate,x.object,x.why],[O.subject,O.predicate,O.object,O.why],n,t),i.info(r+" From first: "+T.length+": "+u(T)),p=T.length,h=0;h<p;h++)if(w=[],b=T[h][0],m(b,e.constraints)){for(d in b)b.hasOwnProperty(d)&&(w[d]=b[d]);for(d in n)n.hasOwnProperty(d)&&(w[d]=n[d]);c.count++,R++,g(t,k,w,r+"  ",o,s,c)}else i.debug("Branch count CS: "+c.count);c.count--,0===R&&i.debug("Match2 fails completely on "+x),i.debug("Match2 ends, Branch count: "+c.count+" for "+c.pattern_debug),0===c.count&&(i.debug("Branch finished."),c.reportDone())},b=this;i.debug("Query on "+this.statements.length);var x=new p(e,r);x.count++,setTimeout(function(){g(b,t.pat,t.pat.initBindings,"",n,e,x)},0)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(2),o=n(4).ArrayIndexOf,s=function(){var t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},e="http://www.w3.org/2000/10/swap/log#",n=function(t){return t},s=function(t){return t},a=function(t){if(t.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},u=function(t){return t.length},c=function(t,e,n){if(void 0===t.slice)throw"@@ mising.js: No .slice function for "+t+" of type "+r(t);return void 0===n||null==n?t.slice(e):t.slice(e,n)},l=Error("dummy error stop iteration"),f=function(t){return this.last=0,this.li=t,this.next=function(){if(this.last==this.li.length)throw l;return this.li[this.last++]},this},h=function(t,e){return t.indexOf(e)},p=function(t,e){if(!t){if(e)throw"python Assertion failed: "+e;throw"(python) Assertion failed."}};String.prototype.encode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8";return t(this)},String.prototype.decode=function(t){if("utf-8"!=t)throw"UTF8_converter: can only do utf-8";return this};var d=function(t,e){return i.join(e,t)},v=0;var y="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~:",g=(new RegExp("^[ \\t]*(#[^\\n]*)?\\r?\\n","g"),new RegExp("^[ \\t]*(#[^\\n]*)?$","g"),new RegExp("^[ \\t]*","g"),new RegExp("^[-+]?[0-9]+","g"),new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g")),m=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),w=(new RegExp("^[0-9]+","g"),new RegExp('[\\\\\\r\\n\\"]',"g")),b=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function x(t,e,n,r,i,o,u,c){void 0===e&&(e=null),void 0===n&&(n=""),void 0===r&&(r=null),void 0===i&&(i=""),void 0===o&&(o=null),void 0===u&&(u=""),void 0===c&&(c=null),this._bindings=new a([]),this._flags=u,""!=n&&(p(n.indexOf(":")>=0,"Document URI not absolute: "+n),this._bindings[""]=n+"#"),this._store=t,i&&t.setGenPrefix(i),this._thisDoc=n,this.source=t.sym(n),this.lines=0,this.statementCount=0,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new s(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new a([]),this._variables=new a([]),this._parentVariables=new a([]),this._reason=c,this._reason2=null,v&&(this._reason2=why_BecauseOfData(t.sym(n),this._reason)),this._baseURI=r||(n||null),p(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),null==e?this._thisDoc?this._formula=t.formula(n+"#_formula"):this._formula=t.formula():this._formula=e,this._context=this._formula,this._parentContext=null}function _(t,e,n,r,i){this._str=n.encode("utf-8"),this._str=n,this._i=r,this._why=i,this.lines=e,this._uri=t}function S(t,e,n,r,i){var o="Line "+(e+1)+" of <"+t+">: Bad syntax: "+i+'\nat: "'+n.slice(r,r+30)+'"',s=new Error(o);return s.lineNumber=e+1,s.characterInFile=r,s.syntaxProblem=i,s}return x.prototype.here=function(t){return this._genPrefix+"_L"+this.lines+"C"+(t-this.startOfLine+1)},x.prototype.formula=function(){return this._formula},x.prototype.loadStream=function(t){return this.loadBuf(t.read())},x.prototype.loadBuf=function(t){return this.startDoc(),this.feed(t),this.endDoc()},x.prototype.feed=function(t){for(var e=t.decode("utf-8"),n=0;n>=0;){var r=this.skipSpace(e,n);if(r<0)return;if((n=this.directiveOrStatement(e,r))<0)throw S(this._thisDoc,this.lines,e,r,"expected directive or statement")}},x.prototype.directiveOrStatement=function(t,e){var n,r=this.skipSpace(t,e);return r<0?r:(n=this.directive(t,r))>=0?this.checkDot(t,n):(n=this.statement(t,r))>=0?this.checkDot(t,n):n},x.prototype.tok=function(t,e,n){if("@"==e.slice(n,n+1))n=n+1;else if(o(this.keywords,t)<0)return-1;var r=n+u(t);return e.slice(n,r)==t&&"\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~".indexOf(e.charAt(r))>=0?r:-1},x.prototype.directive=function(t,e){if((a=this.skipSpace(t,e))<0)return a;var n=new s([]);if((a=this.tok("bind",t,e))>0)throw S(this._thisDoc,this.lines,t,e,"keyword bind is obsolete: use @prefix");if((a=this.tok("keywords",t,e))>0){if((e=this.commaSeparatedList(t,a,n,!1))<0)throw S(this._thisDoc,this.lines,t,e,"'@keywords' needs comma separated list of words");return this.setKeywords(c(n,null,null)),e}if((a=this.tok("forAll",t,e))>0){if((e=this.commaSeparatedList(t,a,n,!0))<0)throw S(this._thisDoc,this.lines,t,e,"Bad variable list after @forAll");var r=new f(n);try{for(;;){var i=r.next();(o(this._variables,i)<0||o(this._parentVariables,i)>=0)&&(this._variables[i]=this._context.newUniversal(i))}}catch(t){if(t!=l)throw t}return e}if((a=this.tok("forSome",t,e))>0){if((e=this.commaSeparatedList(t,a,n,this.uri_ref2))<0)throw S(this._thisDoc,this.lines,t,e,"Bad variable list after @forSome");r=new f(n);try{for(;;){i=r.next();this._context.declareExistential(i)}}catch(t){if(t!=l)throw t}return e}if((a=this.tok("prefix",t,e))>=0){var a,u=new s([]);if((e=this.qname(t,a,u))<0)throw S(this._thisDoc,this.lines,t,a,"expected qname after @prefix");if((a=this.uri_ref2(t,e,u))<0)throw S(this._thisDoc,this.lines,t,e,"expected <uriref> after @prefix _qname_");var h=u[1].uri;if(this._baseURI)h=d(this._baseURI,h);else p(h.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return p(h.indexOf(":")>=0),this._bindings[u[0][0]]=h,this.bind(u[0][0],function(t){return encodeURI(t)}(h)),a}if((a=this.tok("base",t,e))>=0){u=new s([]);if((e=this.uri_ref2(t,a,u))<0)throw S(this._thisDoc,this.lines,t,a,"expected <uri> after @base ");h=u[0].uri;if(!this._baseURI)throw S(this._thisDoc,this.lines,t,a,"With no previous base URI, cannot use relative URI in @base  <"+h+">");h=d(this._baseURI,h);return p(h.indexOf(":")>=0),this._baseURI=h,e}return-1},x.prototype.bind=function(t,e){""==t||this._store.setPrefixForURI(t,e)},x.prototype.setKeywords=function(t){null==t?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)},x.prototype.startDoc=function(){},x.prototype.endDoc=function(){return this._formula},x.prototype.makeStatement=function(t){t[0].add(t[2],t[1],t[3],this.source),this.statementCount+=1},x.prototype.statement=function(t,e){var n=new s([]);if((e=this.object(t,e,n))<0)return e;var r=this.property_list(t,e,n[0]);if(r<0)throw S(this._thisDoc,this.lines,t,e,"expected propertylist");return r},x.prototype.subject=function(t,e,n){return this.item(t,e,n)},x.prototype.verb=function(t,r,i){if((a=this.skipSpace(t,r))<0)return a;var o=new s([]);if((a=this.tok("has",t,r))>=0){if((r=this.prop(t,a,o))<0)throw S(this._thisDoc,this.lines,t,a,"expected property after 'has'");return i.push(new n(["->",o[0]])),r}if((a=this.tok("is",t,r))>=0){if((r=this.prop(t,a,o))<0)throw S(this._thisDoc,this.lines,t,a,"expected <property> after 'is'");if((a=this.skipSpace(t,r))<0)throw S(this._thisDoc,this.lines,t,r,"End of file found, expected property after 'is'");var a;r=a;if((a=this.tok("of",t,r))<0)throw S(this._thisDoc,this.lines,t,r,"expected 'of' after 'is' <prop>");return i.push(new n(["<-",o[0]])),a}if((a=this.tok("a",t,r))>=0)return i.push(new n(["->",this._store.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")])),a;if("<="==t.slice(r,r+2))return i.push(new n(["<-",this._store.sym(e+"implies")])),r+2;if("="==t.slice(r,r+1))return">"==t.slice(r+1,r+2)?(i.push(new n(["->",this._store.sym(e+"implies")])),r+2):(i.push(new n(["->",this._store.sym("http://www.w3.org/2002/07/owl#sameAs")])),r+1);if(":="==t.slice(r,r+2))return i.push(new n(["->",e+"becomes"])),r+2;if((a=this.prop(t,r,o))>=0)return i.push(new n(["->",o[0]])),a;if(">-"==t.slice(r,r+2)||"<-"==t.slice(r,r+2))throw S(this._thisDoc,this.lines,t,a,">- ... -> syntax is obsolete.");return-1},x.prototype.prop=function(t,e,n){return this.item(t,e,n)},x.prototype.item=function(t,e,n){return this.path(t,e,n)},x.prototype.blankNode=function(t){return this._context.bnode(t,this._reason2)},x.prototype.path=function(t,e,r){if((s=this.nodeOrLiteral(t,e,r))<0)return s;for(;"!^.".indexOf(t.slice(s,s+1))>=0;){var i=t.slice(s,s+1);if("."==i){var o=t.slice(s+1,s+2);if(!o||y.indexOf(o)>=0&&":?<[{(".indexOf(o)<0)break}var s,a=r.pop(),u=this.blankNode(this.here(s));if((s=this.node(t,s+1,r))<0)throw S(this._thisDoc,this.lines,t,s,"EOF found in middle of path syntax");var c=r.pop();"^"==i?this.makeStatement(new n([this._context,c,u,a])):this.makeStatement(new n([this._context,c,a,u])),r.push(u)}return s},x.prototype.anonymousNode=function(t){if(e=this._anonymousNodes[t])return e;var e=this._store.bnode(t);return this._anonymousNodes[t]=e,e},x.prototype.node=function(t,e,r,i){void 0===i&&(i=null);var o=i;if((y=this.skipSpace(t,e))<0)return y;e=y;var c=t.slice(e,e+1);if("["==c){var h=this.here(e);if((y=this.skipSpace(t,e+1))<0)throw S(this._thisDoc,this.lines,t,e,"EOF after '['");if("="==t.slice(y,y+1)){var e=y+1,p=new s([]);if(!((y=this.objectList(t,e,p))>=0))throw S(this._thisDoc,this.lines,t,e,"objectList expected after [= ");o=p[0];if(u(p)>1){var d=new f(p);try{for(;;){var v=d.next();this.makeStatement(new n([this._context,this._store.sym("http://www.w3.org/2002/07/owl#sameAs"),o,v]))}}catch(t){if(t!=l)throw t}}if((y=this.skipSpace(t,y))<0)throw S(this._thisDoc,this.lines,t,e,"EOF when objectList expected after [ = ");if(";"==t.slice(y,y+1))var y=y+1}if(null==o)o=this.blankNode(h);if((e=this.property_list(t,y,o))<0)throw S(this._thisDoc,this.lines,t,y,"property_list expected");if((y=this.skipSpace(t,e))<0)throw S(this._thisDoc,this.lines,t,e,"EOF when ']' expected after [ <propertyList>");if("]"!=t.slice(y,y+1))throw S(this._thisDoc,this.lines,t,y,"']' expected");return r.push(o),y+1}if("{"==c){if("$"==t.slice(e+1,e+2)){for(var y=(e+=1)+1,g=new s([]),m=!0;;){if((e=this.skipSpace(t,y))<0)throw S(this._thisDoc,this.lines,t,e,"needed '$}', found end.");if("$}"==t.slice(e,e+2)){var y=e+2;break}if(m)m=!1;else{if(","!=t.slice(e,e+1))throw S(this._thisDoc,this.lines,t,e,"expected: ','");e+=1}var w=new s([]);if((y=this.item(t,e,w))<0)throw S(this._thisDoc,this.lines,t,e,"expected item in set or '$}'");g.push(w[0])}return r.push(this._store.newSet(g,this._context)),y}var y=e+1,b=this._parentContext;this._parentContext=this._context;var x=this._anonymousNodes,_=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new a([]),this._variables=this._variables.slice();var E=this._reason2;if(this._reason2=null,null==o)o=this._store.formula();for(this._context=o;;){if((e=this.skipSpace(t,y))<0)throw S(this._thisDoc,this.lines,t,e,"needed '}', found end.");if("}"==t.slice(e,e+1)){var y=e+1;break}if((y=this.directiveOrStatement(t,e))<0)throw S(this._thisDoc,this.lines,t,e,"expected statement or '}'")}return this._anonymousNodes=x,this._variables=this._parentVariables,this._parentVariables=_,this._context=this._parentContext,this._reason2=E,this._parentContext=b,r.push(o.close()),y}if("("==c){var k=this._store.list;if("$"==t.slice(e+1,e+2)){k=this._store.newSet;e+=1}for(y=e+1,g=new s([]);;){if((e=this.skipSpace(t,y))<0)throw S(this._thisDoc,this.lines,t,e,"needed ')', found end.");if(")"==t.slice(e,e+1)){y=e+1;break}w=new s([]);if((y=this.item(t,e,w))<0)throw S(this._thisDoc,this.lines,t,e,"expected item in list or ')'");g.push(w[0])}return r.push(k(g,this._context)),y}if((y=this.tok("this",t,e))>=0)throw S(this._thisDoc,this.lines,t,e,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");if((y=this.tok("true",t,e))>=0)return r.push(!0),y;if((y=this.tok("false",t,e))>=0)return r.push(!1),y;if(null==o&&(y=this.uri_ref2(t,e,r))>=0)return y;return-1},x.prototype.property_list=function(t,e,r){for(;;){if((d=this.skipSpace(t,e))<0)throw S(this._thisDoc,this.lines,t,e,"EOF found when expected verb in property list");if(":-"!=t.slice(d,d+2)){e=d;var i=new s([]);if((d=this.verb(t,e,i))<=0)return e;var o=new s([]);if((e=this.objectList(t,d,o))<0)throw S(this._thisDoc,this.lines,t,d,"objectList expected");var a=new f(o);try{for(;;){var u=a.next(),c=i[0],h=c[0],p=c[1];"->"==h?this.makeStatement(new n([this._context,p,r,u])):this.makeStatement(new n([this._context,p,u,r]))}}catch(t){if(t!=l)throw t}if((d=this.skipSpace(t,e))<0)throw S(this._thisDoc,this.lines,t,d,"EOF found in list of objects");if(";"!=t.slice(e,e+1))return e;e=e+1}else{var d,e=d+2,v=new s([]);if((d=this.node(t,e,v,r))<0)throw S(this._thisDoc,this.lines,t,e,"bad {} or () or [] node after :- ");var e=d}}},x.prototype.commaSeparatedList=function(t,e,n,r){if((i=this.skipSpace(t,e))<0)throw S(this._thisDoc,this.lines,t,i,"EOF found expecting comma sep list");if("."==t.charAt(i))return e;if(r)var i=this.uri_ref2(t,i,n);else i=this.bareWord(t,i,n);if(i<0)return-1;for(;;){if((e=this.skipSpace(t,i))<0)return e;var o=t.slice(e,e+1);if(","!=o)return"."!=o?-1:e;if(r)i=this.uri_ref2(t,e+1,n);else i=this.bareWord(t,e+1,n);if(i<0)throw S(this._thisDoc,this.lines,t,i,"bad list content")}},x.prototype.objectList=function(t,e,n){if((e=this.object(t,e,n))<0)return-1;for(;;){var r=this.skipSpace(t,e);if(r<0)throw S(this._thisDoc,this.lines,t,r,"EOF found after object");if(","!=t.slice(r,r+1))return r;if((e=this.object(t,r+1,n))<0)return e}},x.prototype.checkDot=function(t,e){var n=this.skipSpace(t,e);if(n<0)return n;if("."==t.slice(n,n+1))return n+1;if("}"==t.slice(n,n+1))return n;if("]"==t.slice(n,n+1))return n;throw S(this._thisDoc,this.lines,t,n,"expected '.' or '}' or ']' at end of statement")},x.prototype.uri_ref2=function(t,e,n){var r=new s([]);if((m=this.qname(t,e,r))>=0){var i=r[0],a=i[0],l=i[1];if(null==a){p(0,"not used?");var f=this._baseURI+"#"}else{if(!(f=this._bindings[a])){if("_"==a)return n.push(this.anonymousNode(l)),m;throw S(this._thisDoc,this.lines,t,e,"Prefix "+a+" not bound.")}}var h=this._store.sym(f+l);return o(this._variables,h)>=0?n.push(this._variables[h]):n.push(h),m}if((e=this.skipSpace(t,e))<0)return-1;if("?"==t.charAt(e)){var v=new s([]);return(m=this.variable(t,e,v))>0?(n.push(v[0]),m):-1}if("<"==t.charAt(e)){for(var y=e=e+1;e<u(t);){if(">"==t.charAt(e)){var g=t.slice(y,e);if(this._baseURI)g=d(this._baseURI,g);else p(g.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if("#"==t.slice(e-1,e)&&"#"!=c(g,-1,null))g=g+"#";h=this._store.sym(g);return o(this._variables,h)>=0?n.push(this._variables[h]):n.push(h),e+1}e=e+1}throw S(this._thisDoc,this.lines,t,m,"unterminated URI reference")}if(this.keywordsSet){var m;v=new s([]);if((m=this.bareWord(t,e,v))<0)return-1;if(o(this.keywords,v[0])>=0)throw S(this._thisDoc,this.lines,t,e,'Keyword "'+v[0]+'" not allowed here.');return n.push(this._store.sym(this._bindings[""]+v[0])),m}return-1},x.prototype.skipSpace=function(t,e){for(var n=e||0;n<t.length;n++){var r=t.charAt(n);if(" \n\r\t\f\v\u2028\u2029".indexOf(r)<0){if("#"!==t.charAt(n))return n;for(;;n++){if(n===t.length)return-1;if("\n"===t.charAt(n)){this.lines=this.lines+1;break}}}else"\n"===t.charAt(n)&&(this.lines=this.lines+1)}return-1},x.prototype.variable=function(t,e,n){if((r=this.skipSpace(t,e))<0)return-1;if("?"!=t.slice(r,r+1))return-1;var r;e=r+=1;if("0123456789-".indexOf(t.charAt(r))>=0)throw S(this._thisDoc,this.lines,t,r,"Varible name can't start with '"+t.charAt(r)+"s'");for(;e<u(t)&&y.indexOf(t.charAt(e))<0;)e=e+1;if(null==this._parentContext)throw S(this._thisDoc,this.lines,t,r,"Can't use ?xxx syntax for variable in outermost level: "+t.slice(r-1,e));return n.push(this._store.variable(t.slice(r,e))),e},x.prototype.bareWord=function(t,e,n){var r=this.skipSpace(t,e);if(r<0)return-1;var i=t.charAt(r);if("0123456789-".indexOf(i)>=0)return-1;if(y.indexOf(i)>=0)return-1;for(e=r;e<u(t)&&y.indexOf(t.charAt(e))<0;)e=e+1;return n.push(t.slice(r,e)),e},x.prototype.qname=function(t,e,r){if((e=this.skipSpace(t,e))<0)return-1;var i=t.charAt(e);if("0123456789-+".indexOf(i)>=0)return-1;if(y.indexOf(i)<0){var s=i;for(e=e+1;e<u(t);){i=t.charAt(e);if(!(y.indexOf(i)<0))break;s=s+i,e=e+1}}else s="";if(e<u(t)&&":"==t.charAt(e)){var a=s;for(e=e+1,s="";e<u(t);){i=t.charAt(e);if(!(y.indexOf(i)<0))break;s=s+i,e=e+1}return r.push(new n([a,s])),e}return s&&this.keywordsSet&&o(this.keywords,s)<0?(r.push(new n(["",s])),e):-1},x.prototype.object=function(t,e,n){if((s=this.subject(t,e,n))>=0)return s;if((s=this.skipSpace(t,e))<0)return-1;e=s;var r=null,i=t.charAt(e);if('"'==i||"'"==i){r=t.slice(e,e+3==i+i)?i+i+i:i;e=e+u(r);var o=this.strconst(t,e,r),s=o[0],a=o[1];return n.push(this._store.literal(a)),s}return-1},x.prototype.nodeOrLiteral=function(t,e,n){if((l=this.node(t,e,n))>=0)return l;if((l=this.skipSpace(t,e))<0)return-1;e=l;var r=t.charAt(e);if("-+0987654321".indexOf(r)>=0){if(m.lastIndex=0,null!=(p=m.exec(t.slice(e)))){l=e+(i=p[0]).length,i.indexOf("T")>=0?n.push(this._store.literal(i,void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#dateTime"))):n.push(this._store.literal(i,void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#date")))}else{var i;if(g.lastIndex=0,null==(p=g.exec(t.slice(e))))throw S(this._thisDoc,this.lines,t,e,"Bad number or date syntax");l=e+g.lastIndex,(i=t.slice(e,l)).indexOf("e")>=0?n.push(this._store.literal(parseFloat(i),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#double"))):t.slice(e,l).indexOf(".")>=0?n.push(this._store.literal(parseFloat(i),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#decimal"))):n.push(this._store.literal(parseInt(i),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#integer")))}return l}if('"'==t.charAt(e)){if('"""'==t.slice(e,e+3))var o='"""';else o='"';e=e+u(o);var a=null,c=this.strconst(t,e,o),l=c[0],f=c[1],h=null;if("@"==t.slice(l,l+1)){var p;if(b.lastIndex=0,null==(p=b.exec(t.slice(l+1))))throw S(this._thisDoc,startline,t,e,"Bad language code syntax on string literal, after @");e=b.lastIndex+l+1,h=t.slice(l+1,e),l=e}if("^^"==t.slice(l,l+2)){var d=new s([]);l=this.uri_ref2(t,l+2,d),a=d[0]}return n.push(this._store.literal(f,h,a)),l}return-1},x.prototype.strconst=function(t,e,r){for(var i=e,o="",s=this.lines;i<u(t);){e=i+u(r);if(t.slice(i,e)==r)return new n([e,o]);if('"'!=t.charAt(i)){if(w.lastIndex=0,!w.exec(t.slice(i)))throw S(this._thisDoc,s,t,i,"Closing quote missing in string at ^ in "+t.slice(i-20,i)+"^"+t.slice(i,i+20));e=i+w.lastIndex-1,o=o+t.slice(i,e);if('"'!=(l=t.charAt(e)))if("\r"!=l){if("\n"==l){if('"'==r)throw S(this._thisDoc,s,t,e,"newline found in string literal");this.lines=this.lines+1;o=o+l,i=e+1;this.previousLine=this.startOfLine,this.startOfLine=i}else if("\\"==l){i=e+1;if(!(l=t.slice(i,i+1)))throw S(this._thisDoc,s,t,e,"unterminated string literal (2)");var a=h('abfrtvn\\"',l);if(a>=0)o=o+'a\b\f\r\t\v\n\\"'.charAt(a),i=i+1;else if("u"==l)i=(c=this.uEscape(t,i+1,s))[0],o=o+(l=c[1]);else{if("U"!=l)throw S(this._thisDoc,this.lines,t,e,"bad escape");var c,l;i=(c=this.UEscape(t,i+1,s))[0],o=o+(l=c[1])}}}else var i=e+1;else var i=e}else var o=o+'"',i=i+1}throw S(this._thisDoc,this.lines,t,e,"unterminated string literal")},x.prototype.uEscape=function(t,e,r){for(var i=e,o=0,s=0;o<4;){var a=t.slice(i,i+1).toLowerCase();i=i+1;if(""==a)throw S(this._thisDoc,r,t,e,"unterminated string literal(3)");var u=h("0123456789abcdef",a);if(u<0)throw S(this._thisDoc,r,t,e,"bad string literal hex escape");s=16*s+u,o=o+1}var c=String.fromCharCode(s);return new n([i,c])},x.prototype.UEscape=function(t,e,r){for(var i=e,o=0,s="\\U";o<8;){var a=t.slice(i,i+1).toLowerCase();i=i+1;if(""==a)throw S(this._thisDoc,r,t,e,"unterminated string literal(3)");if(h("0123456789abcdef",a)<0)throw S(this._thisDoc,r,t,e,"bad string literal hex escape");s=s+a,o=o+1}var u,l=(u="0x"+c(s,2,10)-0,String.fromCharCode(u));return new n([i,l])},_.prototype.toString=function(){var t=this._str,e=this._i,r=0;if(e>60){var i="...";r=e-60}else i="";if(u(t)-e>60)var o="...";else o="";return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new n([this.lines+1,this._uri,this._why,i,t.slice(r,e),t.slice(e,e+60),o])},function(t,e,n,r,i,o,s,a){return new x(t,e,n,r,i,o,s,a)}}();t.exports=s},function(t,e,n){(function(e){var n=String.fromCharCode,r="function"==typeof e?e:function(t){setTimeout(t,0)},i=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,o={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},s=/[\x00-\x20<>\\"\{\}\|\^\`]/;function a(t){if(!(this instanceof a))return new a(t);if(t&&t.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var e=this;this._tokenize=this.tokenize,this.tokenize=function(t,n){this._tokenize(t,function(t,r){!t&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(r.type)?n&&n(t,r):n&&n(t||e._syntaxError(r.type,n=null))})}}}a.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(t,e){for(var n=this._input;;){for(var r;r=this._newline.exec(n);)n=n.substr(r[0].length,n.length),this._line++;if((r=this._whitespace.exec(n))&&(n=n.substr(r[0].length,n.length)),this._endOfFile.test(n))return e&&t(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var i,o=this._line,a="",u="",c="",l=n[0],f=null,h=0,p=!1;switch(l){case"^":if(1===n.length)break;if("^"!==n[1])return d(this);if(this._prevTokenType="^","<"!==(n=n.substr(2))[0]){p=!0;break}case"<":if(f=this._unescapedIri.exec(n))a="IRI",u=f[1];else if(f=this._iri.exec(n)){if(null===(i=this._unescape(f[1]))||s.test(i))return d(this);a="IRI",u=i}break;case"_":((f=this._blank.exec(n))||e&&(f=this._blank.exec(n+" ")))&&(a="prefixed",c="_",u=f[1]);break;case'"':case"'":if(f=this._unescapedString.exec(n))a="literal",u=f[0];else if(f=this._singleQuotedString.exec(n)){if(null===(i=this._unescape(f[0])))return d(this);a="literal",u=i.replace(/^'|'$/g,'"')}else if(f=this._tripleQuotedString.exec(n)){if(i=f[1]||f[2],this._line+=i.split(/\r\n|\r|\n/).length-1,null===(i=this._unescape(i)))return d(this);a="literal",u=i.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(f=this._langcode.exec(n))?(a="langcode",u=f[1]):(f=this._keyword.exec(n))&&(a=f[0]);break;case".":if(1===n.length?e:n[1]<"0"||n[1]>"9"){a=".",h=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(f=this._number.exec(n))&&(a="literal",u='"'+f[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(f[1]?"double":/^[+\-]?\d+$/.test(f[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(f=this._sparqlKeyword.exec(n))?a=f[0].toUpperCase():p=!0;break;case"f":case"t":(f=this._boolean.exec(n))?(a="literal",u='"'+f[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):p=!0;break;case"a":(f=this._shortPredicates.exec(n))?(a="abbreviation",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):p=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":h=1,a=l;break;default:p=!0}if(p&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(f=this._prefix.exec(n))?((f=this._prefixed.exec(n))||e&&(f=this._prefixed.exec(n+" ")))&&(a="prefixed",c=f[1]||"",u=this._unescape(f[2])):(a="prefix",u=f[1]||"")),"^"===this._prevTokenType&&(a="IRI"===a||"prefixed"===a?"type":""),!a)return e||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?d(this):this._input=n;t(null,{line:o,type:a,value:u,prefix:c}),this._prevTokenType=a,n=n.substr(h||f[0].length,n.length)}function d(e){t(e._syntaxError(/^\S*/.exec(n)[0]))}},_unescape:function(t){try{return t.replace(i,function(t,e,r,i){var s;if(e){if(s=parseInt(e,16),isNaN(s))throw new Error;return n(s)}if(r){if(s=parseInt(r,16),isNaN(s))throw new Error;return s<=65535?n(s):n(55296+(s-=65536)/1024,56320+(1023&s))}var a=o[i];if(!a)throw new Error;return a})}catch(t){return null}},_syntaxError:function(t){return this._input=null,new Error('Syntax error: unexpected "'+t+'" on line '+this._line+".")},tokenize:function(t,e){var n=this;function i(t){null!==n._input&&(n._input+=t,n._tokenizeToEnd(e,!1))}function o(){null!==n._input&&n._tokenizeToEnd(e,!0)}this._line=1,"string"==typeof t?(this._input=t,r(function(){n._tokenizeToEnd(e,!0)})):(this._input="",t&&"function"!=typeof t?("function"==typeof t.setEncoding&&t.setEncoding("utf8"),t.on("data",i),t.on("end",o)):(this.addChunk=i,this.end=o,e||(e=t)))}},t.exports=a}).call(this,n(13).setImmediate)},function(t,e,n){var r=n(25),i="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o=i+"nil",s=i+"first",a=/^[a-z][a-z0-9+.-]*:/i,u=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,c=/(?:^|\/)\.\.?(?:$|[\/#?])/,l=0,f=0;function h(t){if(!(this instanceof h))return new h(t);this._tripleStack=[],this._graph=null,t=t||{},this._setBase(t.documentIRI);var e="string"==typeof t.format&&t.format.match(/\w*$/)[0].toLowerCase(),n="turtle"===e,i="trig"===e,o=/triple/.test(e),s=/quad/.test(e),a=o||s;(this._supportsNamedGraphs=!n)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||o),a&&(this._base="",this._resolveIRI=function(t){return this._error("Disallowed relative IRI",t),this._callback=p,this._subject=null}),this._blankNodePrefix="string"!=typeof t.blankNodePrefix?"":"_:"+t.blankNodePrefix.replace(/^_:/,""),this._lexer=t.lexer||new r({lineMode:a})}function p(){}h._resetBlankNodeIds=function(){l=f=0},h.prototype={_setBase:function(t){if(t){if(t.indexOf("#")>=0)throw new Error("Invalid base IRI "+t)}else t=null;(this._base=t)&&(this._basePath=t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(u),this._baseRoot=t[0],this._baseScheme=t[1])},_readInTopContext:function(t){switch(t.type){case"eof":return null!==this._graph?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}},_readSubject:function(t){switch(this._predicate=null,t.type){case"IRI":null===this._base||a.test(t.value)?this._subject=t.value:this._subject=this._resolveIRI(t);break;case"prefixed":var e=this._prefixes[t.prefix];if(void 0===e)return this._error('Undefined prefix "'+t.prefix+':"',t);this._subject=e+t.value;break;case"[":return this._subject="_:b"+f++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:o,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(t);default:return this._error("Expected subject but got "+t.type,t)}return this._readPredicateOrNamedGraph},_readPredicate:function(t){var e=t.type;switch(e){case"IRI":case"abbreviation":null===this._base||a.test(t.value)?this._predicate=t.value:this._predicate=this._resolveIRI(t);break;case"prefixed":if("_"===t.prefix)return this._error("Disallowed blank node as predicate",t);var n=this._prefixes[t.prefix];if(void 0===n)return this._error('Undefined prefix "'+t.prefix+':"',t);this._predicate=n+t.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+e,t):(this._subject=null,"]"===e?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',t)}return this._readObject},_readObject:function(t){switch(t.type){case"IRI":null===this._base||a.test(t.value)?this._object=t.value:this._object=this._resolveIRI(t);break;case"prefixed":var e=this._prefixes[t.prefix];if(void 0===e)return this._error('Undefined prefix "'+t.prefix+':"',t);this._object=e+t.value;break;case"literal":return this._object=t.value,this._readDataTypeOrLang;case"[":var n="_:b"+f++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:n,type:"blank"}),this._subject=n,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:o,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',t)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(t){return"{"===t.type?this._readGraph(t):this._readPredicate(t)},_readGraph:function(t){return"{"!==t.type?this._error("Expected graph but got "+t.type,t):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(t){return"]"===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))},_readBlankNodeTail:function(t){if("]"!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var e=this._tripleStack.pop();return this._subject=e.subject,null!==e.object?(this._predicate=e.predicate,this._object=e.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(t){switch(t.type){case"type":var e;if(""===t.prefix)e=null===this._base||a.test(t.value)?t.value:this._resolveIRI(t);else{var n=this._prefixes[t.prefix];if(void 0===n)return this._error('Undefined prefix "'+t.prefix+':"',t);e=n+t.value}return this._object+="^^"+e,this._getTripleEndReader();case"langcode":return this._object+="@"+t.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,t)}},_readListItem:function(t){var e=null,n=null,r=this._subject,i=this._tripleStack,u=i[i.length-1],c=this._readListItem;switch(t.type){case"IRI":e=null===this._base||a.test(t.value)?t.value:this._resolveIRI(t);break;case"prefixed":var l=this._prefixes[t.prefix];if(void 0===l)return this._error('Undefined prefix "'+t.prefix+':"',t);e=l+t.value;break;case"literal":e=t.value,c=this._readDataTypeOrLang;break;case"[":n="_:b"+f++,e="_:b"+f++,i.push({subject:n,predicate:s,object:e,type:"blank"}),this._subject=e,c=this._readBlankNodeHead;break;case"(":n="_:b"+f++,i.push({subject:n,predicate:s,object:o,type:"list"}),this._subject=null,c=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:u.subject,predicate:u.predicate,object:u.object,graph:this._graph||""}),this._subject=u.subject,null===u.predicate){if(c=this._readPredicate,u.subject===o)return c}else if(this._predicate=u.predicate,this._object=u.object,c=this._getTripleEndReader(),u.object===o)return c;n=o;break;default:return this._error('Expected list item instead of "'+t.type+'"',t)}return null===n&&(this._subject=n="_:b"+f++),null===r?u.object===o?u.object=n:u.subject=n:this._callback(null,{subject:r,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:n,graph:this._graph||""}),null!==e&&this._callback(null,{subject:n,predicate:s,object:e,graph:this._graph||""}),c},_readPunctuation:function(t){var e,n=this._subject,r=this._graph;switch(t.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",t);this._graph=null;case".":this._subject=null,e=this._readInTopContext;break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){r=null===this._base||a.test(t.value)?t.value:this._resolveIRI(t),n=this._subject,e=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[t.prefix];if(void 0===i)return this._error('Undefined prefix "'+t.prefix+':"',t);r=i+t.value,e=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',t)}return null!==n&&this._callback(null,{subject:n,predicate:this._predicate,object:this._object,graph:r||""}),e},_readBlankNodePunctuation:function(t){var e;switch(t.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',t)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),e},_readQuadPunctuation:function(t){return"."!==t.type?this._error("Expected dot to follow quad",t):this._readInTopContext},_readPrefix:function(t){return"prefix"!==t.type?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)},_readPrefixIRI:function(t){return"IRI"!==t.type?this._error('Expected IRI to follow prefix "'+this._prefix+':"',t):(e=null===this._base||a.test(t.value)?t.value:this._resolveIRI(t),this._prefixes[this._prefix]=e,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation);var e},_readBaseIRI:function(t){if("IRI"!==t.type)return this._error("Expected IRI to follow base declaration",t);try{this._setBase(null===this._base||a.test(t.value)?t.value:this._resolveIRI(t))}catch(e){this._error(e.message,t)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(t){switch(t.type){case"IRI":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}},_readNamedGraphBlankLabel:function(t){return"]"!==t.type?this._error("Invalid graph label",t):(this._subject="_:b"+f++,this._readGraph)},_readDeclarationPunctuation:function(t){return this._sparqlStyle?this._readInTopContext(t):"."!==t.type?this._error("Expected declaration to end with a dot",t):this._readInTopContext},_getTripleEndReader:function(){var t=this._tripleStack;if(0===t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(t,e){this._callback(new Error(t+" at line "+e.line+"."))},_resolveIRI:function(t){var e=t.value;switch(e[0]){case void 0:return this._base;case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return this._removeDotSegments(this._basePath+e)}},_removeDotSegments:function(t){if(!c.test(t))return t;for(var e="",n=t.length,r=-1,i=-1,o=0,s="/";r<n;){switch(s){case":":if(i<0&&"/"===t[++r]&&"/"===t[++r])for(;(i=r+1)<n&&"/"!==t[i];)r=i;break;case"?":case"#":r=n;break;case"/":if("."===t[r+1])switch(s=t[++r+1]){case"/":e+=t.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return e+t.substring(o,r)+t.substr(r+1);case".":if(void 0===(s=t[++r+1])||"/"===s||"?"===s||"#"===s){if((o=(e+=t.substring(o,r-2)).lastIndexOf("/"))>=i&&(e=e.substr(0,o)),"/"!==s)return e+"/"+t.substr(r+1);o=r+1}}}s=t[++r]}return e+t.substring(o)},parse:function(t,e,n){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+l+++"_","function"==typeof t&&(n=e,e=t,t=null),this._callback=e||p,this._prefixCallback=n||p;var r=this;this._lexer.tokenize(t,function(t,e){null!==t?(r._callback(t),r._callback=p):void 0!==r._readCallback&&(r._readCallback=r._readCallback(e))}),t||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},t.exports=h},function(t,e){var n={isIRI:function(t){if(!t)return t;var e=t[0];return'"'!==e&&"_"!==e},isLiteral:function(t){return t&&'"'===t[0]},isBlank:function(t){return t&&"_:"===t.substr(0,2)},getLiteralValue:function(t){var e=/^"([^]*)"/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]},getLiteralType:function(t){var e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(t){var e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]?e[1].toLowerCase():""},isPrefixedName:function(t){return t&&/^[^:\/"']*:[^:\/"']+$/.test(t)},expandPrefixedName:function(t,e){var n,r,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(t);return o&&(r=e[n=o[1]],i=o.index),void 0===r?t:0===i?r+t.substr(n.length+1):t.substr(0,i+3)+r+t.substr(i+n.length+4)},createIRI:function(t){return t&&'"'===t[0]?n.getLiteralValue(t):t},createLiteral:function(t,e){if(!e)switch(typeof t){case"boolean":e="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":if(isFinite(t)){e=t%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+t+'"'}return'"'+t+(/^[a-z]+(-[a-z0-9]+)*$/i.test(e)?'"@'+e.toLowerCase():'"^^'+e)}};function r(t,e){for(var r in n)e?t.prototype[r]=i(n[r]):t[r]=n[r];return t}function i(t){return function(e){return t(this,e)}}t.exports=r(r)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(e=t.exports=n(47)).Stream=e,e.Readable=e,e.Writable=n(30),e.Duplex=n(9),e.Transform=n(53),e.PassThrough=n(74)},function(t,e,n){"use strict";(function(e,r,i){var o=n(18);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;m.WritableState=g;var c=n(14);c.inherits=n(8);var l={deprecate:n(73)},f=n(49),h=n(19).Buffer,p=i.Uint8Array||function(){};var d,v=n(51);function y(){}function g(t,e){a=a||n(9),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}(t,n,r,e,i);else{var s=_(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||x(t,n),r?u(b,t,n,s,i):b(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function m(t){if(a=a||n(9),!(d.call(m,this)||this instanceof a))return new m(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function w(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),E(t,e)}function x(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,w(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(w(t,e,!1,e.objectMode?1:c.length,c,l,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function _(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function E(t,e){var n=_(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(m,f),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===m&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,h.isBuffer(r)||r instanceof p);return a&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=y),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||x(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=v.destroy,m.prototype._undestroy=v.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(5),n(13).setImmediate,n(3))},function(t,e){var n=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,r=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,i=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,o={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function s(t,e){if(!(this instanceof s))return new s(t,e);if(t&&"function"!=typeof t.write&&(e=t,t=null),e=e||{},t)this._outputStream=t,this._endStream=void 0===e.end||!!e.end;else{var n="";this._outputStream={write:function(t,e,r){n+=t,r&&r()},end:function(t){t&&t(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(e.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes))}function a(t){var e=o[t];return void 0===e&&(1===t.length?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}s.prototype={_write:function(t,e){this._outputStream.write(t,"utf8",e)},_writeTriple:function(t,e,n,r,i){try{this._graph!==r&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(r?this._encodeIriOrBlankNode(r)+" {\n":"")),this._subject=null,this._graph="["!==r[0]?r:"]"),this._subject===t?this._predicate===e?this._write(", "+this._encodeObject(n),i):this._write(";\n    "+this._encodePredicate(this._predicate=e)+" "+this._encodeObject(n),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=t)+" "+this._encodePredicate(this._predicate=e)+" "+this._encodeObject(n),i)}catch(t){i&&i(t)}},_writeTripleLine:function(t,e,n,r,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(t)+" "+this._encodeIriOrBlankNode(e)+" "+this._encodeObject(n)+(r?" "+this._encodeIriOrBlankNode(r)+".\n":".\n"),i)}catch(t){i&&i(t)}},_encodeIriOrBlankNode:function(t){var e=t[0];if("["===e||"("===e||"_"===e&&":"===t[1])return t;r.test(t)&&(t=t.replace(i,a));var n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:"<"+t+">"},_encodeLiteral:function(t,e,n){return r.test(t)&&(t=t.replace(i,a)),n?'"'+t+'"@'+n:e?'"'+t+'"^^'+this._encodeIriOrBlankNode(e):'"'+t+'"'},_encodeSubject:function(t){if('"'===t[0])throw new Error("A literal as subject is not allowed: "+t);return"["===t[0]&&(this._subject="]"),this._encodeIriOrBlankNode(t)},_encodePredicate:function(t){if('"'===t[0])throw new Error("A literal as predicate is not allowed: "+t);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===t?"a":this._encodeIriOrBlankNode(t)},_encodeObject:function(t){if('"'!==t[0])return this._encodeIriOrBlankNode(t);var e=n.exec(t);if(!e)throw new Error("Invalid literal: "+t);return this._encodeLiteral(e[1],e[2],e[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(t,e,n,r,i){void 0===n?this._writeTriple(t.subject,t.predicate,t.object,t.graph||"",e):"string"!=typeof r?this._writeTriple(t,e,n,"",r):this._writeTriple(t,e,n,r,i)},addTriples:function(t){for(var e=0;e<t.length;e++)this.addTriple(t[e])},addPrefix:function(t,e,n){var r={};r[t]=e,this.addPrefixes(r,n)},addPrefixes:function(t,e){var n=this._prefixIRIs,r=!1;for(var i in t){var o=t[i];/[#\/]$/.test(o)&&n[o]!==(i+=":")&&(r=!0,n[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(r){var s="",a="";for(var u in n)s+=s?"|"+u:u,a+=(a?"|":"")+n[u];s=s.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+a+")[^/]*$|^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(r?"\n":"",e)},blank:function(t,e){var n,r,i=t;switch(void 0===t?i=[]:"string"==typeof t?i=[{predicate:t,object:e}]:"length"in t||(i=[t]),r=i.length){case 0:return"[]";case 1:if("["!==(n=i[0]).object[0])return"[ "+this._encodePredicate(n.predicate)+" "+this._encodeObject(n.object)+" ]";default:for(var o="[",s=0;s<r;s++)(n=i[s]).predicate===t?o+=", "+this._encodeObject(n.object):(o+=(s?";\n  ":"\n  ")+this._encodePredicate(n.predicate)+" "+this._encodeObject(n.object),t=n.predicate);return o+"\n]"}},list:function(t){for(var e=t&&t.length||0,n=new Array(e),r=0;r<e;r++)n[r]=this._encodeObject(t[r]);return"("+n.join(" ")+")"},_prefixRegex:/$0^/,end:function(t){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var e=t&&function(n,r){e=null,t(n,r)};if(this._endStream)try{return this._outputStream.end(e)}catch(t){}e&&e()}},t.exports=s},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=n(15),h=n(10),p=n(24),d=n(0),v=n(16),y=n(58),g=n(35).parseRDFaDOM,m=n(36),w=n(2),b=n(4),x=n(33),_=n(37),S=_?_.fetch:function(t,e){return window.fetch(t,e)},E={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},k={rdf:"application/rdf+xml",owl:"application/rdf+xml",n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},T={link:v("http://www.w3.org/2007/ont/link#"),http:v("http://www.w3.org/2007/ont/http#"),httph:v("http://www.w3.org/2007/ont/httph#"),rdf:v("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rdfs:v("http://www.w3.org/2000/01/rdf-schema#"),dc:v("http://purl.org/dc/elements/1.1/"),ldp:v("http://www.w3.org/ns/ldp#")},O=function t(e,n){l(this,t),this.response=e,this.dom=n},A=function(t){function e(){return l(this,e),s(this,a(e).apply(this,arguments))}return u(e,O),o(e,[{key:"parse",value:function(t,e,n,r){var i=t.store;if(this.dom||(this.dom=b.parseXML(e)),"parsererror"===this.dom.documentElement.nodeName)return t.failFetch(n,"Badly formed XML in "+n.resource.uri,"parse_error");var o=new m(i);try{o.parse(this.dom,n.original.uri,n.original,r)}catch(e){return t.failFetch(n,"Syntax error parsing RDF/XML! "+e,"parse_error")}return n.noMeta||i.add(n.original,T.rdf("type"),T.link("RDFDocument"),t.appNode),t.doneFetch(n,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(t){t.mediatypes["application/rdf+xml"]={q:.9}}}]),e}();A.pattern=new RegExp("application/rdf\\+xml");var R=function(t){function e(){return l(this,e),s(this,a(e).apply(this,arguments))}return u(e,O),o(e,[{key:"parse",value:function(t,e,n,r){var i,o;this.dom||(this.dom=b.parseXML(e));var s=t.store,a=this.dom.getElementsByTagName("title");a.length>0&&s.add(n.resource,T.dc("title"),s.literal(a[0].textContent),n.resource);for(var u=this.dom.getElementsByTagName("link"),c=u.length-1;c>=0;c--)o=!1,(i=u[c].getAttribute("rel"))||(i=u[c].getAttribute("rev"),o=!0),i&&t.linkData(n.original,i,u[c].getAttribute("href"),n.resource,o);for(var l=this.dom.getElementsByTagName("script"),f=0;f<l.length;f++){var h=l[f].getAttribute("type");E[h]&&(y(l[f].textContent,s,n.original.uri,h),y(l[f].textContent,s,n.original.uri,h))}if(n.noMeta||s.add(n.resource,T.rdf("type"),T.link("WebPage"),t.appNode),!n.noRDFa&&g)try{g(this.dom,s,n.original.uri)}catch(e){var p="Error trying to parse "+n.resource+" as RDFa:\n"+e+":\n"+e.stack;return t.failFetch(n,p,"parse_error")}return t.doneFetch(n,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(t){t.mediatypes["application/xhtml+xml"]={}}}]),e}();R.pattern=new RegExp("application/xhtml");var I=function(t){function e(){return l(this,e),s(this,a(e).apply(this,arguments))}return u(e,O),o(e,[{key:"parse",value:function(t,e,n,r){for(var i=b.parseXML(e),o=0;o<i.childNodes.length;o++)if(1===i.childNodes[o].nodeType){var s=i.childNodes[o].namespaceURI;if(s&&s===s.rdf)return t.addStatus(n.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new A(this.response,i).parse(t,e,n,r);break}if(i.doctype&&("html"===i.doctype.name&&i.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&i.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)))return t.addStatus(n.req,"Has XHTML DOCTYPE. Switching to XHTML Handler.\n"),new R(this.response,i).parse(t,e,n,r);var a=i.getElementsByTagName("html")[0];if(a){var u=a.getAttribute("xmlns");if(u&&u.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return t.addStatus(n.req,"Has a default namespace for XHTML. Switching to XHTMLHandler.\n"),new R(this.response,i).parse(t,e,n,r)}return t.failFetch(n,"Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n"+e.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/xml"]={q:.5},t.mediatypes["application/xml"]={q:.5}}}]),e}();I.pattern=new RegExp("(text|application)/(.*)xml");var j=function(t){function e(){return l(this,e),s(this,a(e).apply(this,arguments))}return u(e,O),o(e,[{key:"parse",value:function(t,e,n,r){var i=t.store;if(e.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/))return t.addStatus(n.req,"Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.\n"),new R(this.response).parse(t,e,n,r);if(e.match(/.*<!DOCTYPE\s+html[^<]+-\/\/W3C\/\/DTD XHTML[^<]+http:\/\/www.w3.org\/TR\/xhtml[^<]+>/))return t.addStatus(n.req,"Has XHTML DOCTYPE. Switching to XHTMLHandler.\n"),new R(this.response).parse(t,e,n,r);if(e.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/))return t.addStatus(n.req,"Has default namespace for XHTML, so switching to XHTMLHandler.\n"),new R(this.response).parse(t,e,n,r);var o=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(e);return o&&i.add(n.resource,T.dc("title"),i.literal(o[1]),n.resource),i.add(n.resource,T.rdf("type"),T.link("WebPage"),t.appNode),t.addStatus(n.req,"non-XML HTML document, not parsed for data."),t.doneFetch(n,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/html"]={q:.9}}}]),e}();j.pattern=new RegExp("text/html");var N=function(t){function e(){return l(this,e),s(this,a(e).apply(this,arguments))}return u(e,O),o(e,[{key:"parse",value:function(t,e,n,r){return e.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)?(t.addStatus(n.req,"Warning: "+n.resource+" has an XML declaration. We'll assume it's XML but its content-type wasn't XML.\n"),new I(this.response).parse(t,e,n,r)):e.slice(0,500).match(/xmlns:/)?(t.addStatus(n.req,"May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.\n"),new I(this.response).parse(t,e,n,r)):(t.addStatus(n.req,"Plain text document, no known RDF semantics."),t.doneFetch(n,this.response))}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(t){t.mediatypes["text/plain"]={q:.5}}}]),e}();N.pattern=new RegExp("text/plain");var P=function(t){function e(){return l(this,e),s(this,a(e).apply(this,arguments))}return u(e,O),o(e,[{key:"parse",value:function(t,e,n,r){var i=t.store,o=p(i,i,n.original.uri,n.original.uri,null,null,"",null);try{o.loadBuf(e)}catch(e){var s="Error trying to parse "+n.resource+" as Notation3:\n"+e;return t.failFetch(n,s,"parse_error",r)}return t.addStatus(n.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),t.store.add(n.original,T.rdf("type"),T.link("RDFDocument"),t.appNode),t.doneFetch(n,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(t){t.mediatypes["text/n3"]={q:"1.0"},t.mediatypes["text/turtle"]={q:1}}}]),e}();P.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var C={RDFXMLHandler:A,XHTMLHandler:R,XMLHandler:I,HTMLHandler:j,TextHandler:N,N3Handler:P},D=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(this,t),this.store=e||new f,this.timeout=r.timeout||3e4,this._fetch=r.fetch||S,!this._fetch)throw new Error("No _fetch function availble for Fetcher");this.appNode=this.store.bnode(),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},b.callbackify(this,["request","fail","refresh","retract","done"]),Object.keys(C).map(function(t){return n.addHandler(C[t])})}return o(t,[{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t instanceof Array)return Promise.all(t.map(function(t){return e.load(t,Object.assign({},n))}));var r=t.uri||t;return r=r.split("#")[0],n=this.initFetchOptions(r,n),this.pendingFetchPromise(r,n.baseURI,n)}},{key:"pendingFetchPromise",value:function(t,e,n){var r,i=this;return!n.force&&this.fetchQueue[e]?r=this.fetchQueue[e]:(r=Promise.race([this.setRequestTimeout(t,n),this.fetchUri(t,n)]),this.fetchQueue[e]=r,this.cleanupFetchRequest(e,n,this.timeout)),r.then(function(e){return t in i.timeouts&&(i.timeouts[t].forEach(clearTimeout),delete i.timeouts[t]),e})}},{key:"cleanupFetchRequest",value:function(t,e,n){var r=this;this.timeouts[t]=(this.timeouts[t]||[]).concat(setTimeout(function(){r.isPending(t)||delete r.fetchQueue[t]},n))}},{key:"initFetchOptions",value:function(e,n){var r=this.store;!n.method||"GET"===n.method.toUpperCase()||(n.force=!0),n.resource=r.sym(e),n.baseURI=n.baseURI||e,n.original=r.sym(n.baseURI),n.req=r.bnode(),n.headers=n.headers||{},n.contentType&&(n.headers["content-type"]=n.contentType),n.force&&(n.cache="no-cache");var i=this.acceptString();n.headers.accept=i;var o=t.offlineOverride(e);n.requestedURI=o,t.withCredentials(o,n)&&(n.credentials="include");var s=t.proxyIfNecessary(o);return o!==s&&(n.proxyUsed=!0),n.actualProxyURI=s,n}},{key:"fetchUri",value:function(e,n){var r=this;if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(t.unsupportedProtocol(e))return this.failFetch(n,"fetcher: Unsupported protocol","unsupported_protocol");var i=this.getState(e);if(n.force)delete this.nonexistent[e];else{if("fetched"===i)return Promise.resolve(this.doneFetch(n,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if("failed"===i&&404===this.requested[e]){var o="Previously failed: "+this.requested[e],s={url:e,status:this.requested[e],statusText:o,responseText:o,headers:{},ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(n,o,this.requested[e],s)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,n.noMeta||this.saveRequestMetadata(e,n);var a=n.actualProxyURI;return this._fetch(a,n).then(function(t){return r.handleResponse(t,e,n)},function(t){var e={url:a,status:999,statusText:(t.name||"network failure")+": "+(t.errno||t.code||t.type),responseText:t.message,headers:{},ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return r.failFetch(n,"fetch failed: "+t,999,e)})}},{key:"nowOrWhenFetched",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=t.uri||t,"function"==typeof e?n=e:void 0===e||(e instanceof d?r.referringTerm=e:r=e),this.load(t,r).then(function(t){if(n)if(t)if(t.ok)n(!0,"OK",t);else{var e="HTTP error: Status "+t.status+" ("+t.statusText+")";t.responseText&&(e+=" "+t.responseText),n(!1,e,t)}else{var r="@@ nowOrWhenFetched:  no response object!";n(!1,r)}},function(e){var r=e.message||e.statusText;r="Failed to load  <"+t+"> "+r,e.response&&e.response.status&&(r+=" status: "+e.response.status),n(!1,r,e.response)})}},{key:"addStatus",value:function(t,e){var n=new Date;e="["+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()+"] "+e;var r=this.store,i=r.the(t,T.link("status"));i&&i.append?i.append(r.literal(e)):h.warn("web.js: No list to add to: "+i+","+e)}},{key:"failFetch",value:function(t,e,n,r){this.addStatus(t.req,e),t.noMeta||this.store.add(t.original,T.link("error"),e);var i=(t.method||"GET").toUpperCase();("GET"===i||"HEAD"===i)&&(t.resource.sameTerm(t.original),this.requested[w.docpart(t.original.uri)]=n,this.fireCallbacks("fail",[t.original.uri,e]));var o=new Error("Fetcher: "+e);return o.status=n,o.statusText=e,o.response=r,Promise.reject(o)}},{key:"linkData",value:function(t,e,n,r,i){if(n){var o,s=this.store,a=s.sym(w.join(n,t.uri));if("alternate"===e||"seeAlso"===e||"meta"===e||"describedby"===e){if(a.uri===t.uri)return;o=T.rdfs("seeAlso")}else o="type"===e?s.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):s.sym(w.join(encodeURIComponent(e),"http://www.iana.org/assignments/link-relations/"));i?s.add(a,o,t,r):s.add(t,o,a,r)}}},{key:"parseLinkHeader",value:function(t,e,n){if(t)for(var r=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,i=t.match(/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g),o=0;o<i.length;o++)for(var s=i[o].split(">"),a=s[0].substring(1),u=s[1].match(r),c=0;c<u.length;c++){var l=u[c].split("=")[1].replace(/["']/g,"");this.linkData(e,l,a,n)}}},{key:"doneFetch",value:function(t,e){return this.addStatus(t.req,"Done."),this.requested[t.original.uri]="done",this.fireCallbacks("done",[t.original.uri]),e.req=t.req,e}},{key:"nowKnownAs",value:function(t,e){this.lookedUp[t.uri]?this.lookedUp[e.uri]||this.lookUpThing(e,t):this.lookedUp[e.uri]&&(this.lookedUp[t.uri]||this.lookUpThing(t,e))}},{key:"putBack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t.uri||t;var n=new d(t).doc();return e.contentType=e.contentType||"text/turtle",e.data=x(n,this.store,n.uri,e.contentType),this.webOperation("PUT",t,e)}},{key:"webCopy",value:function(t,e,n){var r=this;return this.webOperation("GET",t).then(function(t){return r.webOperation("PUT",e,{data:t.responseText,contentType:n})})}},{key:"delete",value:function(t,e){var n=this;return this.webOperation("DELETE",t,e).then(function(e){return n.requested[t]=404,n.nonexistent[t]=!0,n.unload(n.store.sym(t)),e})}},{key:"createContainer",value:function(t,e,n){var r={"content-type":"text/turtle",link:T.ldp("BasicContainer")+'; rel="type"'};e&&(r.slug=e);var i={headers:r};return n&&(i.body=n),this.webOperation("POST",t,i)}},{key:"webOperation",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=n.uri||n,r.method=e,r.body=r.data||r.body,r.force=!0;var i=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),t.withCredentials(n,r)&&(r.credentials="include"),new Promise(function(t,o){i._fetch(n,r).then(function(r){if(r.ok)r.body?r.text().then(function(e){r.responseText=e,t(r)}):t(r);else{var i="Web error: "+r.status;r.statusText&&(i+=" ("+r.statusText+")"),i+=" on "+e+" of <"+n+">",r.responseText&&(i+=": "+r.responseText);var s=new Error(i);s.response=r,o(s)}},function(t){o(new Error("Fetch error for "+e+" of <"+n+">:"+t))})})}},{key:"lookUpThing",value:function(t,e){var n=this,r=this.store.uris(t);return(r=r.map(function(t){return w.docpart(t)})).forEach(function(t){n.lookedUp[t]=!0}),this.load(r,{referringTerm:e})}},{key:"getHeader",value:function(t,e){for(var n=this.store,r=n.each(void 0,T.link("requestedURI"),t.uri),i=0;i<r.length;i++){var o=r[i];if(void 0!==o){var s=n.any(o,T.link("response"));if(void 0!==s){var a=n.each(s,T.httph(e.toLowerCase()));return a.length?a.map(function(t){return t.value}):[]}}}}},{key:"saveRequestMetadata",value:function(t,e){var n=e.req,r=this.store,i=e.referringTerm;this.addStatus(e.req,"Accept: "+e.headers.accept),i&&i.uri&&r.add(t,T.link("requestedBy"),i.uri,this.appNode),e.original&&e.original.uri!==t&&r.add(n,T.link("orginalURI"),r.literal(e.original.uri),this.appNode);var o=new Date,s="["+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"] ";r.add(n,T.rdfs("label"),r.literal(s+" Request for "+t),this.appNode),r.add(n,T.link("requestedURI"),r.literal(t),this.appNode),r.add(n,T.link("status"),r.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(t,e){var n=this.store,r=n.bnode();return n.add(e.req,T.link("response"),r,r),n.add(r,T.http("status"),n.literal(t.status),r),n.add(r,T.http("statusText"),n.literal(t.statusText),r),e.resource.uri.startsWith("http")?(t.headers.forEach(function(t,i){n.add(r,T.httph(i),t,r),"content-type"===i&&n.add(e.resource,T.rdf("type"),b.mediaTypeClass(t),r)}),r):r}},{key:"objectRefresh",value:function(t){var e=this.store.uris(t);if(void 0!==e)for(var n=0;n<e.length;n++)this.refresh(this.store.sym(w.docpart(e[n])))}},{key:"refresh",value:function(t,e){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(t,{force:!0,clearPreviousData:!0},e)}},{key:"refreshIfExpired",value:function(t,e){var n=this.getHeader(t,"Expires");!n||new Date(n).getTime()<=(new Date).getTime()?this.refresh(t,e):e(!0,"Not expired",{})}},{key:"retract",value:function(t){this.store.removeMany(void 0,void 0,void 0,t),t.uri&&delete this.requested[w.docpart(t.uri)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(t){return void 0===this.requested[t]?"unrequested":!0===this.requested[t]?"requested":"done"===this.requested[t]?"fetched":"redirected"===this.requested[t]?this.getState(this.redirectedTo[t]):"failed"}},{key:"isPending",value:function(t){return!0===this.requested[t]}},{key:"unload",value:function(t){this.store.removeDocument(t),delete this.requested[t.uri]}},{key:"addHandler",value:function(t){this.handlers.push(t),t.register(this)}},{key:"retryNoCredentials",value:function(t,e){e.retriedWithNoCredentials=!0,delete this.requested[t];var n=Object.assign({},e,{withCredentials:!1});return this.addStatus(e.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(t,n)}},{key:"isCrossSite",value:function(t){if("undefined"==typeof document||!document.location)return!1;var e=w.hostpart,n=""+document.location;return e(n)&&e(t)&&e(n)!==e(t)}},{key:"handleError",value:function(e,n,r){if(this.isCrossSite(n)){if(r.withCredentials&&!r.retriedWithNoCredentials)return this.retryNoCredentials(n,r);var i=t.crossSiteProxy(n);if(i&&!r.proxyUsed)return this.redirectToProxy(i,r)}var o;return e.message?o="Fetch error: "+e.message:(o=e.statusText,e.responseText&&(o+=" ".concat(e.responseText))),this.failFetch(r,o,e.status||998,e)}},{key:"addType",value:function(t,e,n,r){var i=e;if(r){var o=n.any(i,T.link("requestedURI"));o&&o!==r&&n.add(n.sym(r),T.rdf("type"),t,this.appNode)}for(;;){var s=n.any(i,T.link("requestedURI"));if(s&&s.value&&n.add(n.sym(s.value),T.rdf("type"),t,this.appNode),!(i=n.any(void 0,n.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),i)))break;var a=n.any(i,n.sym("http://www.w3.org/2007/ont/link#response"));if(!a)break;var u=n.any(a,n.sym("http://www.w3.org/2007/ont/http#status"));if(!u)break;if("301"!==u&&"302"!==u)break}}},{key:"handleResponse",value:function(t,e,n){var r=this,i=this.store,o=t.headers,s=n.req,a=this.saveResponseMetadata(t,n),u=this.normalizedContentType(n,o)||"",c=o.get("content-location");if(0===t.status)return this.handleError(t,e,n);if(t.status>=400)return 404===t.status&&(this.nonexistent[n.original.uri]=!0,this.nonexistent[e]=!0),this.saveErrorResponse(t,a).then(function(){var e=n.resource+" "+t.statusText;return r.failFetch(n,e,t.status,t)});var l=null,f=null;if(c&&(f=w.join(c,e))!==e&&(l=f),200===t.status){this.addType(T.link("Document"),s,i,e),l&&this.addType(T.link("Document"),s,i,l),n.clearPreviousData&&i.removeDocument(n.resource);var h=u.includes("image/")||u.includes("application/pdf");u&&h&&(this.addType(i.sym("http://purl.org/dc/terms/Image"),s,i,e),l&&this.addType(i.sym("http://purl.org/dc/terms/Image"),s,i,l))}if(c){if(!n.force&&l&&"done"===this.requested[f])return this.doneFetch(n,t);this.requested[f]=!0}this.parseLinkHeader(o.get("link"),n.original,s);var p=this.handlerForContentType(u,t);return p?t.text().then(function(e){return t.responseText=e,p.parse(r,e,n,t)}):(this.addStatus(s,"Fetch over. No data handled."),this.doneFetch(n,t))}},{key:"saveErrorResponse",value:function(t,e){var n=this.store;return t.text().then(function(t){t.length>10&&n.add(e,T.http("content"),n.literal(t),e)})}},{key:"handlerForContentType",value:function(t,e){if(!t)return null;var n=this.handlers.find(function(e){return t.match(e.pattern)});return n?new n(e):null}},{key:"guessContentType",value:function(t){return k[t.split(".").pop()]}},{key:"normalizedContentType",value:function(t,e){if(t.forceContentType)return t.forceContentType;var n=e.get("content-type");if(!n||n.includes("application/octet-stream")){var r=this.guessContentType(t.resource.uri);if(r)return r}var i=w.protocol(t.resource.uri);return!n&&["file","chrome"].includes(i)?"text/xml":n}},{key:"redirectToProxy",value:function(t,e){var n=this;this.addStatus(e.req,"BLOCKED -> Cross-site Proxy to <"+t+">"),e.proxyUsed=!0;var r=this.store,i=e.req;e.noMeta||(r.add(i,T.link("redirectedTo"),r.sym(t),i),this.addStatus(i,"redirected to new request")),this.requested[e.resource.uri]="redirected",this.redirectedTo[e.resource.uri]=t;var o=Object.assign({},e);return o.baseURI=e.resource.uri,this.fetchUri(t,o).then(function(t){return o.noMeta||r.add(i,T.link("redirectedRequest"),o.req,n.appNode),t})}},{key:"setRequestTimeout",value:function(t,e){var n=this;return new Promise(function(r){n.timeouts[t]=(n.timeouts[t]||[]).concat(setTimeout(function(){!n.isPending(t)||e.retriedWithNoCredentials||e.proxyUsed||r(n.failFetch(e,"Request to ".concat(t," timed out"),"timeout"))},n.timeout))})}},{key:"addFetchCallback",value:function(t,e){this.fetchCallbacks[t]?this.fetchCallbacks[t].push(e):this.fetchCallbacks[t]=[e]}},{key:"acceptString",value:function(){var t="";for(var e in this.mediatypes)for(var n in""!==t&&(t+=", "),t+=e,this.mediatypes[e])t+=";"+n+"="+this.mediatypes[e][n];return t}}],[{key:"crossSiteProxy",value:function(e){return t.crossSiteProxyTemplate?t.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):void 0}},{key:"offlineOverride",value:function(t){var e,n=t;return"undefined"!=typeof window&&window.panes&&(e=window.panes.UI)&&e.preferences&&e.preferences.get("offlineModeUsingLocalhost")&&"http://"===n.slice(0,7)&&"localhost/"!==n.slice(7,17)&&(n="http://localhost/"+n.slice(7),h.warn("Localhost kludge for offline use: actually getting <"+n+">")),n}},{key:"proxyIfNecessary",value:function(e){var n;if("undefined"!=typeof window&&window.panes&&(n=window.panes.UI)&&n.isExtension)return e;if("undefined"!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.localSiteMap){var r=function t(e,n){var r=n[e.shift()];return r?"string"==typeof r?r+e.join("/"):e?t(e,r):null:null}(e.split("/").slice(2),$SolidTestEnvironment.localSiteMap);if(r)return r}return t.crossSiteProxyTemplate&&"undefined"!=typeof document&&document.location&&"https:"===(""+document.location).slice(0,6)&&"http:"===e.slice(0,5)?t.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}},{key:"unsupportedProtocol",value:function(t){var e=w.protocol(t);return"tel"===e||"mailto"===e||"urn"===e}},{key:"withCredentials",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.startsWith("https:");return void 0!==e.withCredentials&&(n=e.withCredentials),n}}]),t}();t.exports=D,t.exports.HANDLERS=C,t.exports.CONTENT_TYPE_BY_EXT=k},function(t,e,n){"use strict";t.exports=function(t,e,n,o,s,a){n=n||t.uri,a=a||{},o=o||"text/turtle";try{var u=i(e);a.flags&&u.setFlags(a.flags);var c,l=e.statementsMatching(void 0,void 0,void 0,t);switch(u.suggestNamespaces(e.namespaces),u.setBase(n),o){case"application/rdf+xml":return f(null,u.statementsToXML(l));case"text/n3":case"application/n3":return f(null,u.statementsToN3(l));case"text/turtle":case"application/x-turtle":return u.setFlags("si"),f(null,u.statementsToN3(l));case"application/n-triples":return u.setFlags("deinprstux"),f(null,u.statementsToNTriples(l));case"application/ld+json":u.setFlags("deinprstux"),c=u.statementsToNTriples(l),r.convertToJson(c,s);break;case"application/n-quads":case"application/nquads":return u.setFlags("deinprstux q"),f(null,u.statementsToNTriples(l));default:throw new Error("Serialize: Content-type "+o+" not supported for data write.")}}catch(t){if(s)return s(t);throw t}function f(t,e){return s?void s(t,e):e}};var r=n(40),i=n(34)},function(t,e,n){"use strict";var r=n(0),i=n(6),o=n(2),s=n(4),a=n(39),u=function(){var t=function(t){this.flags="",this.base=null,this.prefixes=[],this.namespaces=[],this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=t};t.prototype.setBase=function(t){return this.base=t,this},t.prototype.setFlags=function(t){return this.flags=t||"",this},t.prototype.toStr=function(t){var e=t.toNT();return"Graph"===t.termType&&(this.formulas[e]=t),e},t.prototype.fromStr=function(t){if("{"===t[0]){var e=this.formulas[t];return e}return this.store.fromNT(t)},t.prototype.suggestPrefix=function(t,e){"default"!==t.slice(0,7)&&"ns"!==t.slice(0,2)&&t&&e&&(t in this.namespaces||e in this.prefixes||(this.prefixes[e]=t,this.namespaces[t]=e))},t.prototype.suggestNamespaces=function(t){for(var e in t)return this.suggestPrefix(e,t[e]),this},t.prototype.checkIntegrity=function(){var t,e;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error("Serializer integity error 1: "+t+", "+this.namespaces[t]+", "+this.prefixes[this.namespaces[t]]+"!");for(e in this.prefixes)if(this.namespaces[this.prefixes[e]]!==e)throw new Error("Serializer integity error 2: "+e+", "+this.prefixs[e]+", "+this.namespaces[this.prefixes[e]]+"!")},t.prototype.makeUpPrefix=function(e){var n=e;var r=function(n){return!!t.prototype.validPrefix.test(n)&&"ns"!==n&&!(n in this.namespaces)&&(this.prefixes[e]=n,this.namespaces[n]=e,n)}.bind(this);"#/".indexOf(n[n.length-1])>=0&&(n=n.slice(0,-1));var i=n.lastIndexOf("/");i>=0&&(n=n.slice(i+1));for(var o=0;o<n.length&&this.prefixchars.indexOf(n[o]);)o++;if((n=n.slice(0,o)).length<6&&r(n))return n;if(r(n.slice(0,3)))return n.slice(0,3);if(r(n.slice(0,2)))return n.slice(0,2);if(r(n.slice(0,4)))return n.slice(0,4);if(r(n.slice(0,1)))return n.slice(0,1);if(r(n.slice(0,5)))return n.slice(0,5);t.prototype.validPrefix.test(n)||(n="n");for(var s=0;;s++)if(r(n.slice(0,3)+s))return n.slice(0,3)+s},t.prototype.rootSubjects=function(t){for(var e={},n={},r={},i=0;i<t.length;i++){var o=t[i],s=function(t){e.hasOwnProperty(t)||(e[t]=[]),e[t].push(o.subject)};[o.subject,o.predicate,o.object].map(function(t){"BlankNode"===t.termType?r[t.toNT()]=!0:"Collection"===t.termType&&t.elements.forEach(function(t){s(t)})}),s(t[i].object);var a=n[this.toStr(o.subject)];a||(a=[]),a.push(o),n[this.toStr(o.subject)]=a}var u=[];for(var c in n)if(n.hasOwnProperty(c)){var l=this.fromStr(c);"BlankNode"===l.termType&&e[l]&&1===e[l].length||u.push(l)}this.incoming=e;for(var f={},h=0;h<u.length;h++)f[u[h].toNT()]=!0;return{roots:u,subjects:n,rootsHash:f,incoming:e}},t.prototype.toN3=function(t){return this.statementsToN3(t.statements)},t.prototype._notQNameChars="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",t.prototype._notNameChars=t.prototype._notQNameChars+":",t.prototype.explicitURI=function(t){return"<"+(t=this.flags.indexOf("r")<0&&this.base?o.refTo(this.base,t):this.flags.indexOf("u")>=0?function(t){for(var e,n="",r=0;r<t.length;r++)e=t.charCodeAt(r),n+=e>65535?"\\U"+("00000000"+e.toString(16)).slice(-8):e>126?"\\u"+("0000"+e.toString(16)).slice(-4):t[r];return n}(t):encodeURI(t))+">"},t.prototype.statementsToNTriples=function(t){var e=t.slice();e.sort();for(var n="",r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o=this,s=this.store,a=function t(e){if("Collection"!==e.termType)return o.atomicTermToN3(e);for(var a=e.elements,u=s.sym(r+"nill"),c=a.length-1;c>=0;c--){var l=new i;n+=t(l)+" "+t(s.sym(r+"first"))+" "+t(a[c])+".\n",n+=t(l)+" "+t(s.sym(r+"rest"))+" "+t(u)+".\n",u=l}return o.atomicTermToN3(u)},u=0;u<e.length;u++){var c=e[u],l="";l+=a(c.subject)+" ",l+=a(c.predicate)+" ",l+=a(c.object)+" ",this.flags.indexOf("q")>=0&&(l+=a(c.why)+" "),n+=l+=".\n"}return n},t.prototype.statementsToN3=function(e){var n=this.store,r={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"};e.sort(function(t,e){return s.heavyCompareSPO(t,e,n,r)}),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var i={};this.flags.indexOf("s")<0&&(i["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(i["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(i["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function(t){for(var e="",n=0;n<t;n++)e+=" ";return e},a=function t(e){for(var n="",r=0;r<e.length;r++){var i=e[r],o="string"==typeof i?i:t(i);if(0!==r){var s=n.slice(-1)||" ";","===o||";"===o||("."!==o||"0123456789.".includes(s))&&(n+=" ")}n+=o}return n};var u=function(t){for(var e=this.rootSubjects(t),n=e.roots,r=[],i=0;i<n.length;i++){var o=n[i];r.push(c(o,e))}return r}.bind(this);function c(t,e){return"BlankNode"!==t.termType||e.incoming[t]?[h(t,e)].concat([l(t,e)]).concat(["."]):f(t,e,!0).concat(["."])}var l=function(t,e){var n=[],r=null,o=e.subjects[this.toStr(t)]||[];if(void 0===o)throw new Error("Cant find statements for "+t);for(var s=[],a=0;a<o.length;a++){var u=o[a];u.predicate.uri===r?s.push(","):(r&&(n=n.concat([s]).concat([";"]),s=[]),n.push(i[u.predicate.uri]?i[u.predicate.uri]:h(u.predicate,e))),r=u.predicate.uri,s.push(f(u.object,e))}return n=n.concat([s])}.bind(this);var f=function(t,e,n){return"BlankNode"!==t.termType||!n&&void 0!==e.rootsHash[t.toNT()]?h(t,e):e.subjects[this.toStr(t)]?["[",l(t,e),"]"]:"[]"}.bind(this);t.prototype.termToN3=h;var h=function(t,e){var n,r;switch(t.termType){case"Graph":return(r=(r=["{"]).concat(u(t.statements))).concat(["}"]);case"Collection":for(r=["("],n=0;n<t.elements.length;n++)r.push([f(t.elements[n],e)]);return r.push(")"),r;default:return this.atomicTermToN3(t)}}.bind(this);var p=function(){var t="";for(var e in this.defaultNamespace&&(t+="@prefix : "+this.explicitURI(this.defaultNamespace)+".\n"),this.prefixes)this.prefixes.hasOwnProperty(e)&&this.namespacesUsed[e]&&(t+="@prefix "+this.prefixes[e]+": "+this.explicitURI(e)+".\n");return t+"\n"}.bind(this),d=u(e);return p()+function t(e,n){var r="",i=1e5;void 0===n&&(n=-1);for(var s=0;s<e.length;s++){var u=e[s];if("string"!=typeof u){var c=t(u,n+1);if(c.length<10*(80-4*n)&&c.indexOf('"""')<0){var l=a(u);l.length<80-4*n&&(u=l,c="")}c&&(i=1e4),r+=c}if("string"==typeof u){if(1===u.length&&"\n"===r.slice(-1)&&",.;".indexOf(u)>=0){r=r.slice(0,-1)+u+"\n",i+=1;continue}if(i<4*n+4||i+u.length+1<80&&";.".indexOf(r[r.length-2])<0)r=r.slice(0,-1)+" "+u+"\n",i+=u.length+1;else{var f=o(4*n)+u;r+=f+"\n",i=f.length,n<0&&(r+="\n",i=1e5)}}}return r}(d)},t.prototype.atomicTermToN3=function(t,e){switch(t.termType){case"BlankNode":case"Variable":return t.toNT();case"Literal":var n=t.value;if("string"!=typeof n)throw new TypeError("Value of RDF literal node must be a string");if(t.datatype&&this.flags.indexOf("x")<0)switch(t.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return n;case"http://www.w3.org/2001/XMLSchema#decimal":return n.indexOf(".")<0&&(n+=".0"),n;case"http://www.w3.org/2001/XMLSchema#double":return n.indexOf(".")<0&&(n+=".0"),n.indexOf("e")<0&&(n+="e0"),n;case"http://www.w3.org/2001/XMLSchema#boolean":return"1"===t.value?"true":"false"}var r=this.stringToN3(t.value);return t.language?r+="@"+t.language:t.datatype.equals(a.string)||(r+="^^"+this.atomicTermToN3(t.datatype,e)),r;case"NamedNode":return this.symbolToN3(t);default:throw new Error("Internal: atomicTermToN3 cannot handle "+t+" of termType: "+t.termType)}},t.prototype.validPrefix=new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/),t.prototype.forbidden1=new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm),t.prototype.forbidden3=new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm),t.prototype.stringToN3=function(e,n){n||(n="e");var r,i,o,s,a,u="";for(e.length>20&&'"'!==e.slice(-1)&&n.indexOf("n")<0&&(e.indexOf("\n")>0||e.indexOf('"')>0)?(s='"""',a=t.prototype.forbidden3):(s='"',a=t.prototype.forbidden1),r=0;r<e.length;){if(a.lastIndex=0,null==a.exec(e.slice(r)))break;i=r+a.lastIndex-1,u+=e.slice(r,i);var c=e[i];'"'===c&&'"""'===s&&'"""'!==e.slice(i,i+3)?u+=c:(o='\b\f\r\t\v\n\\"'.indexOf(c))>=0?u+="\\"+'bfrtvn\\"'[o]:n.indexOf("e")>=0?u+="\\u"+("000"+c.charCodeAt(0).toString(16).toLowerCase()).slice(-4):u+=c,r=i+1}return s+u+e.slice(r)+s},t.prototype.symbolToN3=function(e){var n=e.uri,r=n.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=n.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(0===n.indexOf("http")||0===n.indexOf("ws")||0===n.indexOf("file"))){for(var i=!0,o=r+1;o<n.length;o++)if(t.prototype._notNameChars.indexOf(n[o])>=0){i=!1;break}if(i){var s=n.slice(r+1),a=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===a&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(s)<0?s:":"+s;var u=this.prefixes[a];if(u||(u=this.makeUpPrefix(a)),u)return this.namespacesUsed[a]=!0,u+":"+s}}return this.explicitURI(n)},t.prototype.writeStore=function(t){var e=this.store,n=e.fetcher,r=n&&n.appNode,i=this.store.index[3];for(var o in i){var s=e.fromNT(o);r&&s.sameTerm(r)||t("\n"+this.atomicTermToN3(s)+" "+this.atomicTermToN3(e.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(e.statementsMatching(void 0,void 0,void 0,s))+" }.\n")}e.statementsMatching(void 0,e.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(n){t("\n<"+n.object.value+"> log:metadata {\n");var r=e.statementsMatching(void 0,void 0,void 0,n.subject);t(this.statementsToN3(this.statementsToN3(r))),t("}.\n")});var a=[];r&&a.push(r);var u=[];a.map(function(t){u=u.concat(e.statementsMatching(void 0,void 0,void 0,t))}),t(this.statementsToN3(u))},t.prototype.statementsToXML=function(e){var n=[];n["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var i="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",o=function(t){for(var e="",n=0;n<t;n++)e+=" ";return e},u=function t(e){for(var n="",r=0;r<e.length;r++){var i=e[r];n+="string"==typeof i?i:t(i)}return n};var c=function(t){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var e=this.rootSubjects(t),n=e.roots,r=[],i=0;i<n.length;i++){var o=n[i];r.push(h(o,e))}return r}.bind(this);function l(t){return void 0===t?"@@@undefined@@@@":t.replace(/[&<"]/g,function(t){switch(t[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}var f=function(t){return l(this.base?s.uri.refTo(this.base,t.uri):t.uri)}.bind(this);var h=function(t,e){var n,o,s,u,c=[],y=e.subjects[this.toStr(t)];if(void 0===y)return d(t,e);y.sort(function(t,e){var n=t.predicate.uri,r=e.predicate.uri;if(n.substring(0,i.length)===i||r.substring(0,i.length)===i)return n.localeCompare(r);var o=n.substring(i.length),s=r.substring(i.length),a=parseInt(o,10),u=parseInt(s,10);return isNaN(a)||isNaN(u)||a!==o||u!==s?n.localeCompare(r):a-u});for(var g=0;g<y.length;g++)if("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==(s=y[g]).predicate.uri||n||"symbol"!==s.object.termType){if((u=s.predicate).uri.substr(0,i.length)===i){var m=u.uri.substr(i.length);m===parseInt(m,10).toString()&&(u=new r("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(o=v(u),s.object.termType){case"BlankNode":c=1===e.incoming[s.object].length?c.concat(["<"+o+' rdf:parseType="Resource">',h(s.object,e),"</"+o+">"]):c.concat(["<"+o+' rdf:nodeID="'+s.object.toNT().slice(2)+'"/>']);break;case"NamedNode":c=c.concat(["<"+o+' rdf:resource="'+f(s.object)+'"/>']);break;case"Literal":c=c.concat(["<"+o+(s.object.datatype.equals(a.string)?"":' rdf:datatype="'+l(s.object.datatype.uri)+'"')+(s.object.language?' xml:lang="'+s.object.language+'"':"")+">"+l(s.object.value)+"</"+o+">"]);break;case"Collection":c=c.concat(["<"+o+' rdf:parseType="Collection">',p(s.object,e),"</"+o+">"]);break;default:throw new Error("Can't serialize object of type "+s.object.termType+" into XML")}}else n=s.object;var w=n?v(n):"rdf:Description",b="";return"BlankNode"===t.termType?e.incoming[t]&&1===e.incoming[t].length||(b=' rdf:nodeID="'+t.toNT().slice(2)+'"'):b=' rdf:about="'+f(t)+'"',["<"+w+b+">"].concat([c]).concat(["</"+w+">"])}.bind(this);function p(t,e){for(var n=[],r=0;r<t.elements.length;r++)n.push(h(t.elements[r],e));return n}var d=function(t,e){var n=[],r=e.subjects[this.toStr(t)];if(!r)return n;r.sort();for(var i=0;i<r.length;i++){var o=r[i];switch(o.object.termType){case"BlankNode":n=e.rootsHash[o.object.toNT()]?n.concat(["<"+v(o.predicate)+' rdf:nodeID="'+o.object.toNT().slice(2)+'">',"</"+v(o.predicate)+">"]):n.concat(["<"+v(o.predicate)+' rdf:parseType="Resource">',d(o.object,e),"</"+v(o.predicate)+">"]);break;case"NamedNode":n=n.concat(["<"+v(o.predicate)+' rdf:resource="'+f(o.object)+'"/>']);break;case"Literal":n=n.concat(["<"+v(o.predicate)+(o.object.datatype.equals(a.string)?"":' rdf:datatype="'+l(o.object.datatype.value)+'"')+(o.object.language?' xml:lang="'+o.object.language+'"':"")+">"+l(o.object.value)+"</"+v(o.predicate)+">"]);break;case"Collection":n=n.concat(["<"+v(o.predicate)+' rdf:parseType="Collection">',p(o.object,e),"</"+v(o.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+o.object.termType+" into XML")}}return n}.bind(this);var v=function(e){var r=e.uri,i=r.indexOf("#");if(i<0&&this.flags.indexOf("/")<0&&(i=r.lastIndexOf("/")),i<0)throw new Error("Cannot make qname out of <"+r+">");for(var o=i+1;o<r.length;o++)if(t.prototype._notNameChars.indexOf(r[o])>=0)throw new Error('Invalid character "'+r[o]+'" cannot be in XML qname for URI: '+r);var s=r.slice(i+1),a=r.slice(0,i+1);if(this.defaultNamespace&&this.defaultNamespace===a&&this.flags.indexOf("d")<0)return s;var u=this.prefixes[a];return u||(u=this.makeUpPrefix(a)),n[a]=!0,u+":"+s}.bind(this),y=c(e),g="<rdf:RDF";for(var m in this.defaultNamespace&&(g+=' xmlns="'+l(this.defaultNamespace)+'"'),n)if(n.hasOwnProperty(m)){var w=this.base&&this.flags.includes("z")?s.uri.refTo(this.base,m):m;g+="\n xmlns:"+this.prefixes[m]+'="'+l(w)+'"'}return function t(e,n){var r,i="",s=1e5;n||(n=0);for(var a=0;a<e.length;a++){var c=e[a];if("string"!=typeof c){var l=t(c,n+1);l.length<10*(80-4*n)&&l.indexOf('"""')<0&&(r=u(c)).length<80-4*n&&(c="   "+r,l=""),l&&(s=1e4),i+=l}"string"==typeof c&&(s<4*n+4?(i=i.slice(0,-1)+" "+c+"\n",s+=c.length+1):(i+=(r=o(4*n)+c)+"\n",s=r.length))}return i}([g+=">",y,"</rdf:RDF>"],-1)};return function(e){return new t(e)}}();t.exports=u},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(6),o=n(12),s=n(20),a=n(0),u=n(2),c=n(4);if(void 0===l)var l={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=n||{},this.kb=e,this.target=n.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}var e,n,f;return e=t,f=[{key:"parseRDFaDOM",value:function(e,n,r){var i=new t(n,{base:r});e.baseURI=r,i.process(e)}}],(n=[{key:"addTriple",value:function(t,e,n,r){var i,o,a,u;i=void 0===e?s.namedNode(this.options.base):this.toRDFNodeObject(e),a=this.toRDFNodeObject(n),o=this.toRDFNodeObject(r),u=s.namedNode(this.options.base),this.kb.add(i,a,o,u)}},{key:"ancestorPath",value:function(t){for(var e="";t&&t.nodeType!==l.DOCUMENT_NODE;)e="/"+t.localName+e,t=t.parentNode;return e}},{key:"copyMappings",value:function(t){var e={};for(var n in t)e[n]=t[n];return e}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(e){for(var n=0;n<t.dateTimeTypes.length;n++){var r=t.dateTimeTypes[n].pattern.exec(e);if(r&&r[0].length===e.length)return t.dateTimeTypes[n].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(t,e){}},{key:"parseCURIE",value:function(e,n,r){var i,o=e.indexOf(":");if(o>=0){var s=e.substring(0,o);if(""===s)return(i=n[""])?i+e.substring(o+1):null;if("_"===s)return"_:"+e.substring(o+1);if(t.NCNAME.test(s)&&(i=n[s]))return i+e.substring(o+1)}return null}},{key:"parseCURIEOrURI",value:function(t,e,n){var r=this.parseCURIE(t,e,n);return r||this.resolveAndNormalize(n,t)}},{key:"parsePredicate",value:function(t,e,n,r,i,o){if(""===t)return null;var s=this.parseTermOrCURIEOrAbsURI(t,e,o?null:n,r,i);return s&&0===s.indexOf("_:")?null:s}},{key:"parsePrefixMappings",value:function(t,e){for(var n=this.tokenize(t),r=null,i=0;i<n.length;i++)":"===n[i][n[i].length-1]?r=n[i].substring(0,n[i].length-1):r&&(e[r]=this.options.base?u.join(n[i],this.options.base):n[i],r=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(t,e,n){return"["===(t=this.trim(t)).charAt(0)&&"]"===t.charAt(t.length-1)?0===(t=(t=t.substring(1,t.length-1)).trim(t)).length?null:"_:"===t?this.theOne:this.parseCURIE(t,e,n):this.parseCURIEOrURI(t,e,n)}},{key:"parseTermOrCURIEOrAbsURI",value:function(t,e,n,r,i){t=this.trim(t);var o=this.parseCURIE(t,r,i);if(o)return o;if(n){if(e&&!this.absURIRE.exec(t))return e+t;var s=n[t];if(s)return s;if(s=n[t.toLowerCase()])return s}return this.absURIRE.exec(t)?this.resolveAndNormalize(i,t):null}},{key:"parseTermOrCURIEOrURI",value:function(t,e,n,r,i){t=this.trim(t);var o=this.parseCURIE(t,r,i);if(o)return o;var s=n[t];return s||((s=n[t.toLowerCase()])?s:e&&!this.absURIRE.exec(t)?e+t:this.resolveAndNormalize(i,t))}},{key:"parseURI",value:function(t){return t}},{key:"process",value:function(e,n){var r;e.nodeType===l.DOCUMENT_NODE?(r=e.baseURI,(e=e.documentElement).baseURI=r,this.setContext(e)):e.parentNode.nodeType===l.DOCUMENT_NODE&&this.setContext(e);var i=[],o=function(t){if(!t&&n&&n.baseURI)return n.baseURI;var e=t.indexOf("#");return e>=0&&(t=t.substring(0,e)),n&&n.baseURIMap&&(t=n.baseURIMap(t)),t};for(i.push({current:e,context:this.push(null,o(e.baseURI))});i.length>0;){var s=i.shift();if(s.parent){if(s.context.parent&&s.context.parent.listMapping===s.listMapping)continue;for(var a in s.listMapping){var c=s.listMapping[a];if(0!==c.length){for(var f=[],h=0;h<c.length;h++)f.push(this.newBlankNode());for(var p=0;p<f.length;p++)this.addTriple(s.parent,f[p],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",c[p]),this.addTriple(s.parent,f[p],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:t.objectURI,value:p+1<f.length?f[p+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(s.parent,s.subject,a,{type:t.objectURI,value:f[0]})}else this.addTriple(s.parent,s.subject,a,{type:t.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var d=s.current,v=s.context,y=!1,g=null,m=null,w=null,b=v.prefixes,x=!1,_=[],S=v.listMapping,E=!v.parent,k=v.language,T=v.vocabulary;r=this.parseURI(o(d.baseURI)),d.item=null;var O=d.getAttributeNode("vocab");if(O){var A=this.trim(O.value);if(A.length>0){T=A;var R=r.spec;this.addTriple(d,R,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:t.objectURI,value:T})}else T=this.vocabulary}for(var I=0;I<d.attributes.length;I++){var j=d.attributes[I];if("x"===j.nodeName.charAt(0)&&0===j.nodeName.indexOf("xmlns:")){x||(b=this.copyMappings(b),x=!0);var N=j.nodeName.substring(6),P=t.trim(j.value);b[N]=this.options.base?u.join(P,this.options.base):P}}var C=d.getAttributeNode("prefix");C&&(x||(b=this.copyMappings(b),x=!0),this.parsePrefixMappings(C.value,b));for(var D=null,U=0;!D&&U<this.langAttributes.length;U++)D=d.getAttributeNodeNS(this.langAttributes[U].namespaceURI,this.langAttributes[U].localName);if(D){var L=t.trim(D.value);k=L.length>0?L:null}var M,B,F=d.getAttributeNode("rel"),q=d.getAttributeNode("rev"),z=d.getAttributeNode("typeof"),H=d.getAttributeNode("property"),V=d.getAttributeNode("datatype"),J=this.inHTMLMode?d.getAttributeNode("datetime"):null,K=d.getAttributeNode("content"),W=d.getAttributeNode("about"),$=d.getAttributeNode("src"),Y=d.getAttributeNode("resource"),X=d.getAttributeNode("href"),G=d.getAttributeNode("inlist"),Q=[];if(F){B=this.tokenize(F.value);for(var Z=0;Z<B.length;Z++)(M=this.parsePredicate(B[Z],T,v.terms,b,r,this.inHTMLMode&&null!==H))&&Q.push(M)}var tt=[];if(q){B=this.tokenize(q.value);for(var et=0;et<B.length;et++)(M=this.parsePredicate(B[et],T,v.terms,b,r,this.inHTMLMode&&H))&&tt.push(M)}if(this.inHTMLMode&&(F||q)&&H&&(0===Q.length&&(F=null),0===tt.length&&(q=null)),F||q?(W&&(g=this.parseSafeCURIEOrCURIEOrURI(W.value,b,r)),z&&(w=g),g||(d.parentNode.nodeType===l.DOCUMENT_NODE?g=o(d.baseURI):v.parentObject&&(g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject)),Y&&(m=this.parseSafeCURIEOrCURIEOrURI(Y.value,b,r)),m||(X?m=this.resolveAndNormalize(r,encodeURI(X.value)):$?m=this.resolveAndNormalize(r,encodeURI($.value)):!z||W||this.inXHTMLMode&&("head"===d.localName||"body"===d.localName)||(m=this.newBlankNode())),!z||W||!this.inXHTMLMode||"head"!==d.localName&&"body"!==d.localName?z&&!W&&(w=m):w=g):!H||K||V?(W&&(g=this.parseSafeCURIEOrCURIEOrURI(W.value,b,r)),!g&&Y&&(g=this.parseSafeCURIEOrCURIEOrURI(Y.value,b,r)),!g&&X&&(g=this.resolveAndNormalize(r,encodeURI(X.value))),!g&&$&&(g=this.resolveAndNormalize(r,encodeURI($.value))),g||(d.parentNode.nodeType===l.DOCUMENT_NODE?g=o(d.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==d.localName&&"body"!==d.localName?z?g=this.newBlankNode():v.parentObject&&(g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject,H||(y=!0)):g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject),z&&(w=g)):(W&&(g=this.parseSafeCURIEOrCURIEOrURI(W.value,b,r),z&&(w=g)),g||d.parentNode.nodeType!==l.DOCUMENT_NODE?!g&&v.parentObject&&(g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject):(g=o(d.baseURI),z&&(w=g)),z&&!w&&(Y&&(w=this.parseSafeCURIEOrCURIEOrURI(Y.value,b,r)),!w&&X&&(w=this.resolveAndNormalize(r,encodeURI(X.value))),!w&&$&&(w=this.resolveAndNormalize(r,encodeURI($.value))),w||!this.inXHTMLMode&&!this.inHTMLMode||"head"!==d.localName&&"body"!==d.localName||(w=g),w||(w=this.newBlankNode()),m=w)),g&&(W||Y||w)){var nt=g;z&&!W&&!Y&&m&&(nt=m),this.newSubjectOrigin(d,nt)}if(w){B=this.tokenize(z.value);for(var rt=0;rt<B.length;rt++){var it=this.parseTermOrCURIEOrAbsURI(B[rt],T,v.terms,b,r);it&&this.addTriple(d,w,t.typeURI,{type:t.objectURI,value:it})}}if(g&&g!==v.parentObject&&(S={},E=!0),m){if(F&&G)for(var ot=0;ot<Q.length;ot++){var st=S[Q[ot]];st||(st=[],S[Q[ot]]=st),st.push({type:t.objectURI,value:m})}else if(F)for(var at=0;at<Q.length;at++)this.addTriple(d,g,Q[at],{type:t.objectURI,value:m});if(q)for(var ut=0;ut<tt.length;ut++)this.addTriple(d,m,tt[ut],{type:t.objectURI,value:g})}else{if(g&&!m&&(F||q)&&(m=this.newBlankNode()),F&&G)for(var ct=0;ct<Q.length;ct++){var lt=S[Q[ct]];lt||(lt=[],S[M]=lt),_.push({predicate:Q[ct],list:lt})}else if(F)for(var ft=0;ft<Q.length;ft++)_.push({predicate:Q[ft],forward:!0});if(q)for(var ht=0;ht<tt.length;ht++)_.push({predicate:tt[ht],forward:!1})}if(H){var pt=null,dt=null;V?(pt=""===V.value?t.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(V.value,T,v.terms,b,r),dt=J&&!K?J.value:pt===t.XMLLiteralURI||pt===t.HTMLLiteralURI?null:K?K.value:d.textContent):K?(pt=t.PlainLiteralURI,dt=K.value):J?(dt=J.value,(pt=t.deriveDateTimeType(dt))||(pt=t.PlainLiteralURI)):F||q||(Y&&(dt=this.parseSafeCURIEOrCURIEOrURI(Y.value,b,r)),!dt&&X?dt=this.resolveAndNormalize(r,encodeURI(X.value)):!dt&&$&&(dt=this.resolveAndNormalize(r,encodeURI($.value))),dt&&(pt=t.objectURI)),pt||(z&&!W?(pt=t.objectURI,dt=w):(dt=d.textContent,this.inHTMLMode&&"time"===d.localName&&(pt=t.deriveDateTimeType(dt)),pt||(pt=t.PlainLiteralURI))),B=this.tokenize(H.value);for(var vt=0;vt<B.length;vt++){var yt=this.parsePredicate(B[vt],T,v.terms,b,r);if(yt)if(G){var gt=S[yt];gt||(gt=[],S[yt]=gt),gt.push(pt===t.XMLLiteralURI||pt===t.HTMLLiteralURI?{type:pt,value:d.childNodes}:{type:pt||t.PlainLiteralURI,value:dt,language:k})}else pt===t.XMLLiteralURI||pt===t.HTMLLiteralURI?this.addTriple(d,g,yt,{type:pt,value:d.childNodes}):this.addTriple(d,g,yt,{type:pt||t.PlainLiteralURI,value:dt,language:k})}}if(g&&!y)for(var mt=0;mt<v.incomplete.length;mt++)v.incomplete[mt].list?v.incomplete[mt].list.push({type:t.objectURI,value:g}):v.incomplete[mt].forward?this.addTriple(d,v.subject,v.incomplete[mt].predicate,{type:t.objectURI,value:g}):this.addTriple(d,g,v.incomplete[mt].predicate,{type:t.objectURI,value:v.subject});var wt=null,bt=g;y?((wt=this.push(v,v.subject)).parentObject=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject,wt.incomplete=v.incomplete,wt.language=k,wt.prefixes=b,wt.vocabulary=T):((wt=this.push(v,g)).parentObject=m||(g||v.subject),wt.prefixes=b,wt.incomplete=_,m&&(bt=m,S={},E=!0),wt.listMapping=S,wt.language=k,wt.vocabulary=T),E&&i.unshift({parent:d,context:v,subject:bt,listMapping:S});for(var xt=d.lastChild;xt;xt=xt.previousSibling)xt.nodeType===l.ELEMENT_NODE&&(xt.baseURI=d.baseURI,i.unshift({current:xt,context:wt}))}}this.inHTMLMode&&this.copyProperties();for(var _t=0;_t<this.finishedHandlers.length;_t++)this.finishedHandlers[_t](e)}},{key:"push",value:function(t,e){return{parent:t,subject:e||(t?t.subject:null),parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(t,e){return u.join(e,t)}},{key:"setContext",value:function(t){"html"===t.localName&&"XHTML+RDFa 1.1"===t.getAttribute("version")?this.setXHTMLContext():"html"===t.localName||"http://www.w3.org/1999/xhtml"===t.namespaceURI?"undefined"!=typeof document&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?this.setHTMLContext():"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"toRDFNodeObject",value:function(e){if(void 0!==e){if("string"==typeof e)return"_:"===e.substring(0,2)?(void 0===this.blankNodes[e.substring(2)]&&(this.blankNodes[e.substring(2)]=new i(e.substring(2))),this.blankNodes[e.substring(2)]):s.namedNode(e);switch(e.type){case t.objectURI:return"_:"===e.value.substring(0,2)?(void 0===this.blankNodes[e.value.substring(2)]&&(this.blankNodes[e.value.substring(2)]=new i(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):s.namedNode(e.value);case t.PlainLiteralURI:return new o(e.value,e.language||"");case t.XMLLiteralURI:case t.HTMLLiteralURI:var n="";return Object.keys(e.value).forEach(function(t){n+=c.domToString(e.value[t],this.htmlOptions)}),new o(n,"",new a(e.type));default:return new o(e.value,"",new a(e.type))}}}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])&&r(e.prototype,n),f&&r(e,f),t}();f.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",f.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",f.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",f.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",f.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",f.nameChar="[-A-Z_a-z-----------0-F.0-9--]",f.nameStartChar="[A-Za-z------------------------------------------------------------------------------------------------------------------------------------------------------_]",f.NCNAME=new RegExp("^"+f.nameStartChar+f.nameChar+"*$"),f.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}],t.exports=f},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){var e={ns:{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"},nodeType:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12}};this.frameFactory=function(t,n,i){return{NODE:1,ARC:2,parent:n,parser:t,store:t.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(t,e){e=r.join(e,this.base),this.node=this.store.sym(e),this.nodeType=t},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var t=this.store.sym(r.join("#"+this.parent.rdfid,this.base));this.store.add(t,this.store.sym(e.ns.RDF+"type"),this.store.sym(e.ns.RDF+"Statement"),this.parser.why),this.store.add(t,this.store.sym(e.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(t,this.store.sym(e.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(t,this.store.sym(e.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(t){this.addSymbol(this.NODE,t),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(t){null!=t?null!=this.parser.bnodes[t]?this.node=this.parser.bnodes[t]:this.node=this.parser.bnodes[t]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(t){t===e.ns.RDF+"li"&&(t=e.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,t)},addLiteral:function(t){this.parent.datatype?this.node=this.store.literal(t,"",this.store.sym(this.parent.datatype)):this.node=this.store.literal(t,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}},this.getAttributeNodeNS=function(t,e,n){var r=null;if(t.getAttributeNodeNS)r=t.getAttributeNodeNS(e,n);else for(var i,o=t.attributes,s=0;s<o.length;++s)if((i=o[s]).namespaceURI===e&&(i.prefix?i.prefix+":"+n:n)===i.nodeName){r=i;break}return r},this.store=t,this.bnodes={},this.why=null,this.reify=!1,this.parse=function(t,n,r){var i,o=t.childNodes;if(this.cleanParser(),t.nodeType===e.nodeType.DOCUMENT){for(var s=0;s<o.length;s++)if(o[s].nodeType===e.nodeType.ELEMENT){i=o[s];break}}else{if(t.nodeType!==e.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+n+". Halting. ");i=t}this.why=r;var a=this.frameFactory(this);return this.base=n,a.base=n,a.lang=null,this.parseDOM(this.buildFrame(a,i)),!0},this.parseDOM=function(t){for(var n,i=function(t){var e="";if(null==t.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+t.localName+" in "+this.base);return t.namespaceURI&&(e+=t.namespaceURI),t.localName?e+=t.localName:t.nodeName&&(t.nodeName.indexOf(":")>=0?e+=t.nodeName.split(":")[1]:e+=t.nodeName),e}.bind(this),o=!0;t.parent;){var s=t.element,a=s.attributes;if(s.nodeType===e.nodeType.TEXT||s.nodeType===e.nodeType.CDATA_SECTION)t.parent.nodeType===t.NODE&&(t.addArc(e.ns.RDF+"value"),t=this.buildFrame(t)),t.addLiteral(s.nodeValue);else if(i(s)!==e.ns.RDF+"RDF")if(t.parent&&t.parent.collection&&(t.addCollectionArc(),(t=this.buildFrame(t,t.element)).parent.element=null),t.parent&&t.parent.nodeType&&t.parent.nodeType!==t.ARC){t.addArc(i(s)),this.reify&&(n=this.getAttributeNodeNS(s,e.ns.RDF,"ID"))&&(t.rdfid=n.nodeValue,s.removeAttributeNode(n));var u=this.getAttributeNodeNS(s,e.ns.RDF,"parseType"),c=this.getAttributeNodeNS(s,e.ns.RDF,"datatype");if(c&&(t.datatype=c.nodeValue,s.removeAttributeNode(c)),u){var l=u.nodeValue;"Literal"===l?(t.datatype=e.ns.RDF+"XMLLiteral",(t=this.buildFrame(t)).addLiteral(s.childNodes),o=!1):"Resource"===l?((t=this.buildFrame(t,t.element)).parent.element=null,t.addBNode()):"Collection"===l&&((t=this.buildFrame(t,t.element)).parent.element=null,t.addCollection()),s.removeAttributeNode(u)}if(0!==a.length){var f=this.getAttributeNodeNS(s,e.ns.RDF,"resource"),h=this.getAttributeNodeNS(s,e.ns.RDF,"nodeID");t=this.buildFrame(t),f?(t.addNode(f.nodeValue),s.removeAttributeNode(f)):h?(t.addBNode(h.nodeValue),s.removeAttributeNode(h)):t.addBNode();for(var p=a.length-1;p>=0;p--){var d=this.buildFrame(t);d.addArc(i(a[p])),i(a[p])===e.ns.RDF+"type"?this.buildFrame(d).addNode(a[p].nodeValue):this.buildFrame(d).addLiteral(a[p].nodeValue)}}else 0===s.childNodes.length&&this.buildFrame(t).addLiteral("")}else{var v=this.getAttributeNodeNS(s,e.ns.RDF,"about");if(n=this.getAttributeNodeNS(s,e.ns.RDF,"ID"),v&&n)throw new Error("RDFParser: "+s.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!v&&n)t.addNode("#"+n.nodeValue),s.removeAttributeNode(n);else if(null==v&&null==n){var y=this.getAttributeNodeNS(s,e.ns.RDF,"nodeID");y?(t.addBNode(y.nodeValue),s.removeAttributeNode(y)):t.addBNode()}else t.addNode(v.nodeValue),s.removeAttributeNode(v);var g=this.getAttributeNodeNS(s,e.ns.RDF,"type");e.ns.RDF+"Description"!==i(s)&&(g={nodeValue:i(s)}),null!=g&&(this.store.add(t.node,this.store.sym(e.ns.RDF+"type"),this.store.sym(r.join(g.nodeValue,t.base)),this.why),g.nodeName&&s.removeAttributeNode(g));for(var m=a.length-1;m>=0;m--)this.store.add(t.node,this.store.sym(i(a[m])),this.store.literal(a[m].nodeValue,t.lang),this.why)}for(s=t.element;t.parent;){for(var w=t;null==s;)s=(t=t.parent).element;var b=s.childNodes&&s.childNodes[t.lastChild];if(b&&o){if((b.nodeType===e.nodeType.ELEMENT||b.nodeType===e.nodeType.TEXT||b.nodeType===e.nodeType.CDATA_SECTION)&&(b.nodeType!==e.nodeType.TEXT&&b.nodeType!==e.nodeType.CDATA_SECTION||1===s.childNodes.length)){t.lastChild++,t=this.buildFrame(w,s.childNodes[t.lastChild-1]);break}t.lastChild++}else{if(t.terminateFrame(),!(t=t.parent))break;s=t.element,o=!0}}}},this.cleanParser=function(){this.bnodes={},this.why=null},this.buildFrame=function(t,n){var i=this.frameFactory(this,t,n);if(t&&(i.base=t.base,i.lang=t.lang),!n||n.nodeType===e.nodeType.TEXT||n.nodeType===e.nodeType.CDATA_SECTION)return i;var o=n.attributes,s=n.getAttributeNode("xml:base");null!=s&&(i.base=s.nodeValue,n.removeAttribute("xml:base"));var a=n.getAttributeNode("xml:lang");null!=a&&(i.lang=a.nodeValue,n.removeAttribute("xml:lang"));for(var u=o.length-1;u>=0;u--)if("xml"===o[u].nodeName.substr(0,3)){if("xmlns:"===o[u].name.slice(0,6)){var c=o[u].nodeValue;this.base&&(c=r.join(c,this.base)),this.store.setPrefixForURI(o[u].name.slice(6),c)}n.removeAttributeNode(o[u])}return i}}},function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=n(1);const i=new r.default;if(e.default=i,Object.getOwnPropertyNames(r.default.prototype).forEach(t=>{const e=i[t];"function"==typeof e&&(i[t]=e.bind(i))}),"undefined"!=typeof window)if("SolidAuthClient"in window);else{let t=!1;Object.defineProperty(window,"SolidAuthClient",{enumerable:!0,get:()=>(t||(t=!0),i)})}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return y});var r=n(2),i=n.n(r),o=n(3),s=n.n(o),a=n(4),u=n.n(a),c=n(5),l=n(81),f=n(9),h=n(10),p=n(7),d=n(12);const v=fetch;class y extends u.a{constructor(...t){super(...t),s()(this,"_pendingSession",void 0)}fetch(t,e){return Object(c.authnFetch)(Object(h.defaultStorage)(),v,t,e)}login(t,e){return e=i()({},g(Object(p.currentUrlNoParams)()),e),d.login(t,e)}async popupLogin(t){t=i()({},g(),t),/https?:/.test(t.popupUri)||(t.popupUri=new URL(t.popupUri||"/.well-known/solid/login",window.location).toString()),t.callbackUri||(t.callbackUri=t.popupUri);const e=Object(l.openIdpPopup)(t.popupUri),n=await Object(l.obtainSession)(t.storage,e,t);return this.emit("login",n),this.emit("session",n),n}async currentSession(t=Object(h.defaultStorage)()){let e=await Object(f.getSession)(t);if(!e){if(this._pendingSession)return this._pendingSession;try{this._pendingSession=d.currentSession(t),e=await this._pendingSession}catch(t){}delete this._pendingSession,e&&(await Object(f.saveSession)(t)(e),this.emit("login",e),this.emit("session",e))}return e}async trackSession(t){t(await this.currentSession()),this.on("session",t)}async logout(t=Object(h.defaultStorage)()){if(await Object(f.getSession)(t)){try{await d.logout(t,v),this.emit("logout"),this.emit("session",null)}catch(t){}await Object(f.clearSession)(t)}}}function g(t){return{callbackUri:t?t.split("#")[0]:"",popupUri:"",storage:Object(h.defaultStorage)()}}},function(t,e,n){var r=n(3);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"authnFetch",function(){return a});n(6);var r=n(7),i=n(8),o=n(9),s=n(12);async function a(t,e,n,r){const a=await Object(o.getSession)(t);if(!a)return e(n,r);if(await u(t,n))return Object(s.fetchWithCredentials)(a,e,n,r);let c=await e(n,r);return 401===c.status&&(await Object(i.updateHostFromResponse)(t)(c),await u(t,n)&&(c=Object(s.fetchWithCredentials)(a,e,n,r))),c}async function u(t,e){const n=await Object(i.getHost)(t)(Object(r.toUrlString)(e));return null!=n&&n.requiresAuth}},function(t,e){t.exports=window.fetch},function(t,e,n){"use strict";n.r(e),n.d(e,"currentUrl",function(){return r}),n.d(e,"currentUrlNoParams",function(){return i}),n.d(e,"navigateTo",function(){return o}),n.d(e,"originOf",function(){return s}),n.d(e,"toUrlString",function(){return a});const r=()=>window.location.href,i=()=>window.location.origin+window.location.pathname,o=t=>{window.location.href=t},s=t=>new URL(t).origin,a=t=>("string"!=typeof t&&(t="url"in t?t.url:t.toString()),new URL(t,r()).toString())},function(t,e,n){"use strict";n.r(e),n.d(e,"getHost",function(){return u}),n.d(e,"saveHost",function(){return c}),n.d(e,"updateHostFromResponse",function(){return l});var r=n(2),i=n.n(r),o=n(9),s=n(10),a=n(12);function u(t){return async e=>{const n=new URL(e).host,r=await Object(o.getSession)(t);if(r&&n===new URL(r.idp).host)return{url:n,requiresAuth:!0};const i=(await Object(s.getData)(t)).hosts;return i&&i[n]}}function c(t){return async({url:e,requiresAuth:n})=>{await Object(s.updateStorage)(t,t=>i()({},t,{hosts:i()({},t.hosts,{[e]:{requiresAuth:n}})}))}}function l(t){return async e=>{if(a.requiresAuth(e)){const n=new URL(e.url).host;await c(t)({url:n,requiresAuth:!0})}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"getSession",function(){return s}),n.d(e,"saveSession",function(){return a}),n.d(e,"clearSession",function(){return u});var r=n(2),i=n.n(r),o=n(10);async function s(t){return(await Object(o.getData)(t)).session||null}function a(t){return async e=>{return(await Object(o.updateStorage)(t,t=>i()({},t,{session:e}))).session}}async function u(t){await Object(o.updateStorage)(t,t=>i()({},t,{session:null}))}},function(t,e,n){"use strict";n.r(e),n.d(e,"NAMESPACE",function(){return r}),n.d(e,"defaultStorage",function(){return i}),n.d(e,"getData",function(){return o}),n.d(e,"updateStorage",function(){return s}),n.d(e,"asyncStorage",function(){return a}),n.d(e,"memStorage",function(){return u}),n.d(e,"ipcStorage",function(){return c});n(11);const r="solid-auth-client",i=()=>{try{if(window&&window.localStorage)return a(window.localStorage)}catch(t){if(!(t instanceof ReferenceError))throw t}return a(u())};async function o(t){let e,n;try{e=await t.getItem(r),n=JSON.parse(e||"{}")}catch(t){n={}}return n}async function s(t,e){const n=e(await o(t));return await t.setItem(r,JSON.stringify(n)),n}function a(t){return{getItem:e=>Promise.resolve(t.getItem(e)),setItem:(e,n)=>Promise.resolve(t.setItem(e,n)),removeItem:e=>Promise.resolve(t.removeItem(e))}}const u=()=>{const t={};return{getItem:e=>void 0===t[e]?null:t[e],setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}};function c(t){return{getItem:e=>t.request("storage/getItem",e),setItem:(e,n)=>t.request("storage/setItem",e,n),removeItem:e=>t.request("storage/removeItem",e)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Server",function(){return s}),n.d(e,"Client",function(){return a});var r=n(3),i=n.n(r);const o="solid-auth-client";class s{constructor(t,e,n){i()(this,"_clientWindow",void 0),i()(this,"_clientOrigin",void 0),i()(this,"_handler",void 0),i()(this,"_messageListener",void 0),this._clientWindow=t,this._clientOrigin=e,this._handler=n,this._messageListener=(t=>this._handleMessage(t))}async _handleMessage({data:t,origin:e}){if(e!==this._clientOrigin)return;const n=t&&t[o];if(n&&n.method){const t=n,e=t.id,r=t.method,i=t.args,s=await this._handler(r,...i);this._clientWindow.postMessage({[o]:{id:e,ret:s}},this._clientOrigin)}}start(){window.addEventListener("message",this._messageListener)}stop(){window.removeEventListener("message",this._messageListener)}}class a{constructor(t,e){i()(this,"_serverWindow",void 0),i()(this,"_serverOrigin",void 0),this._serverWindow=t,this._serverOrigin=e}request(t,...e){const n=Math.random();return this._serverWindow.postMessage({[o]:{id:n,method:t,args:e}},this._serverOrigin),new Promise((t,e)=>{window.addEventListener("message",i);const r=setTimeout(()=>{e(new Error("Could not connect to main window.")),window.removeEventListener("message",i)},2e3);function i({data:e}){const s=e&&e[o];s&&s.id===n&&s.hasOwnProperty("ret")&&(t(s.ret),clearTimeout(r),window.removeEventListener("message",i))}})}}},function(t,e,n){"use strict";n.r(e),n.d(e,"login",function(){return d}),n.d(e,"currentSession",function(){return v}),n.d(e,"logout",function(){return y}),n.d(e,"getRegisteredRp",function(){return g}),n.d(e,"requiresAuth",function(){return w}),n.d(e,"fetchWithCredentials",function(){return b});var r=n(13),i=n.n(r),o=n(2),s=n.n(o),a=n(15),u=n(19),c=n.n(u),l=n(80),f=n.n(l),h=n(7),p=n(10);async function d(t,e){try{const n=await g(t,e);return await async function(t){await Object(p.updateStorage)(t,t=>s()({},t,{appHashFragment:window.location.hash}))}(e.storage),async function(t,{callbackUri:e,storage:n}){const r=await Object(p.getData)(n),i=await t.createRequest({redirect_uri:e},r);return await Object(p.updateStorage)(n,()=>r),Object(h.navigateTo)(i)}(n,e)}catch(t){return null}}async function v(t=Object(p.defaultStorage)()){try{const e=await m(t);if(!e)return null;const n=Object(h.currentUrl)();if(!/#(.*&)?access_token=/.test(n))return null;window.location.hash="",await async function(t){await Object(p.updateStorage)(t,t=>{let e=t.appHashFragment,n=void 0===e?"":e,r=i()(t,["appHashFragment"]);return window.location.hash=n,r})}(t);const r=await Object(p.getData)(t),o=await e.validateResponse(n,r);return o?s()({},o,{webId:o.idClaims.sub,idp:o.issuer}):null}catch(t){return null}}async function y(t,e){const n=await m(t);if(n)try{await n.logout();try{await e("/.well-known/solid/logout",{credentials:"include"})}catch(t){}}catch(t){}}async function g(t,e){let n=await m(e.storage);return n&&n.provider.url===t&&n.registration.redirect_uris.includes(e.callbackUri)||(n=await function(t,{storage:e,callbackUri:n}){const r={issuer:t,grant_types:["implicit"],redirect_uris:[n],response_types:["id_token token"],scope:"openid profile"},i={defaults:{authenticate:{redirect_uri:n,response_type:"id_token token"}},store:e};return c.a.register(t,r,i)}(t,e),await async function(t,e,n){return await Object(p.updateStorage)(t,t=>s()({},t,{rpConfig:n})),n}(e.storage,0,n)),n}async function m(t){const e=(await Object(p.getData)(t)).rpConfig;return e?(e.store=t,c.a.from(e)):null}function w(t){if(401!==t.status)return!1;const e=t.headers.get("www-authenticate");if(!e)return!1;const n=a.parse(e);return"Bearer"===n.scheme&&n.params&&"openid webid"===n.params.scope}async function b(t,e,n,r){const i=await f.a.issueFor(Object(h.toUrlString)(n),t);return e(n,s()({},r,{credentials:"include",headers:s()({},r&&r.headers?r.headers:{},{authorization:`Bearer ${i}`})}))}},function(t,e,n){var r=n(14);t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"format",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return i.default}});var r=o(n(16)),i=o(n(18));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(17);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=function(t){return t.reduce(function(t,e){var n=o(e,2),s=n[0],a=n[1],u=function(t){return function(e){return`${t}=${e&&!(0,r.isToken)(e)?(0,r.quote)(e):e}`}}(s);if(!(0,r.isToken)(s))throw new TypeError;return Array.isArray(a)?i(t).concat(i(a.map(u))):i(t).concat([u(a)])},[])};e.default=function(t,e,n){var o="string"==typeof t?{scheme:t,token:e,params:n}:t;if("object"!=typeof o)throw new TypeError;if(!(0,r.isScheme)(o.scheme))throw new TypeError("Invalid scheme.");return[o.scheme].concat(i(void 0!==o.token?[o.token]:[]),i(void 0!==o.params?function t(e,n){if(Array.isArray(e))return s(e);if("object"==typeof e){var r=e;return t(Object.keys(e).map(function(t){return[t,r[t]]}),n)}throw new TypeError}(o.params):[])).join(" ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unquote=e.quote=e.isScheme=e.isToken=void 0;var r=/^[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+$/,i=function(t){return"string"==typeof t&&r.test(t)};e.isToken=i;var o=i;e.isScheme=o;e.quote=function(t){return`"${t.replace(/"/g,'\\"')}"`};e.unquote=function(t){return t.substr(1,t.length-2).replace(/\\"/g,'"')}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(17),i=/((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g,o=function(t,e){var n='"'===e.charAt(0)?(0,r.unquote)(e):e.trim();return Array.isArray(t)?t.concat(n):"string"==typeof t?[t,n]:n};e.default=function(t){if("string"!=typeof t)throw new TypeError("Header value must be a string.");var e=t.indexOf(" "),n=t.substr(0,e);if(!(0,r.isScheme)(n))throw new TypeError(`Invalid scheme ${n}`);return function(t,e){for(var n=null,r={};;){var s=i.exec(e);if(null===s)break;s[2]?r[s[1]]=o(r[s[1]],s[2]):n=o(n,s[1])}return{scheme:t,params:r,token:n}}(n,t.substr(e))}},function(t,e,n){"use strict";t.exports=n(20)},function(t,e,n){(function(e){const r=n(22),i=n(6),{URL:o}=n(27),s=i.Headers?i.Headers:e.Headers,{JSONDocument:a}=n(28),{JWKSet:u}=n(37),c=n(68),l=n(70),f=n(79),h=n(74),p=n(69);class d extends a{static get schema(){return f}static from(t){let e=new d(t),n=e.validate();if(!n.valid)return Promise.reject(new Error(JSON.stringify(n)));let r=e.provider.jwks;return r?u.importKeys(r).then(t=>(e.provider.jwks=t,e)):e.jwks().then(()=>e)}static register(t,e,n){let r=new d({provider:{url:t},defaults:Object.assign({},n.defaults),store:n.store});return Promise.resolve().then(()=>r.discover()).then(()=>r.jwks()).then(()=>r.register(e)).then(()=>r)}discover(){try{let t=this.provider.url;r(t,'RelyingParty provider must define "url"');let e=new o(t);return e.pathname=".well-known/openid-configuration",i(e.toString()).then(h("Error fetching openid configuration")).then(t=>t.json().then(t=>this.provider.configuration=t))}catch(t){return Promise.reject(t)}}register(t){try{let e=this.provider.configuration;r(e,"OpenID Configuration is not initialized."),r(e.registration_endpoint,"OpenID Configuration is missing registration_endpoint.");let n=e.registration_endpoint,o="post",a=new s({"Content-Type":"application/json"}),u=this.defaults.register,c=JSON.stringify(Object.assign({},u,t));return i(n,{method:o,headers:a,body:c}).then(h("Error registering client")).then(t=>t.json().then(t=>this.registration=t))}catch(t){return Promise.reject(t)}}serialize(){return JSON.stringify(this)}jwks(){try{let t=this.provider.configuration;r(t,"OpenID Configuration is not initialized."),r(t.jwks_uri,"OpenID Configuration is missing jwks_uri.");let e=t.jwks_uri;return i(e).then(h("Error resolving provider keys")).then(t=>t.json().then(t=>u.importKeys(t)).then(t=>this.provider.jwks=t))}catch(t){return Promise.reject(t)}}createRequest(t,e){return c.create(this,t,e||this.store)}validateResponse(t,e=this.store){let n;n=t.match(/^http(s?):\/\//)?{rp:this,redirect:t,session:e}:{rp:this,body:t,session:e};const r=new l(n);return l.validateResponse(r)}userinfo(){try{let t=this.provider.configuration;r(t,"OpenID Configuration is not initialized."),r(t.userinfo_endpoint,"OpenID Configuration is missing userinfo_endpoint.");let e=t.userinfo_endpoint,n=this.store.access_token;r(n,"Missing access token.");let o=new s({"Content-Type":"application/json",Authorization:`Bearer ${n}`});return i(e,{headers:o}).then(h("Error fetching userinfo")).then(t=>t.json())}catch(t){return Promise.reject(t)}}logoutRequest(t={}){const{id_token_hint:e,post_logout_redirect_uri:n,state:i}=t;let s;if(r(this.provider,"OpenID Configuration is not initialized"),s=this.provider.configuration,r(s,"OpenID Configuration is not initialized"),!s.end_session_endpoint)return null;if(n&&!e)throw new Error("id_token_hint is required when using post_logout_redirect_uri");const a={};e&&(a.id_token_hint=e),n&&(a.post_logout_redirect_uri=n),i&&(a.state=i);const u=new o(s.end_session_endpoint);return u.search=p.encode(a),u.href}logout(){let t;try{r(this.provider,"OpenID Configuration is not initialized."),t=this.provider.configuration,r(t,"OpenID Configuration is not initialized."),r(t.end_session_endpoint,"OpenID Configuration is missing end_session_endpoint.")}catch(t){return Promise.reject(t)}if(!t.end_session_endpoint)return this.clearSession(),Promise.resolve(void 0);let e=t.end_session_endpoint;return i(e,{method:"get",credentials:"include"}).then(h("Error logging out")).then(()=>this.clearSession())}clearSession(){let t=this.store;t&&delete t[v]}popTokenFor(t,e){return PoPToken.issueFor(t,e)}}const v="oidc.session.privateKey";d.SESSION_PRIVATE_KEY=v,t.exports=d}).call(this,n(21))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(23),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=g,h=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t)){if(u)return t.name;var e=t.toString().match(h);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(u||!o.isFunction(t))return o.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function y(t,e,n,r,i){throw new f.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function g(t,e){t||y(t,!0,e,"==",f.ok)}function m(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=w(t),s=w(e);if(i&&!s||!i&&s)return!1;if(i)return t=a.call(t),e=a.call(e),m(t,e,n);var u,c,l=_(t),f=_(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!m(t[u],e[u],n,r))return!1;return!0}(t,e,n,s))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&y(i,n,"Missing expected exception"+r);var s="string"==typeof r,a=!t&&o.isError(i),u=!t&&i&&!n;if((a&&s&&b(i,n)||u)&&y(i,n,"Got unwanted exception"+r),t&&i&&n&&!b(i,n)||!t&&i)throw i}f.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=d(v((e=this).actual),128)+" "+e.operator+" "+d(v(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=p(n),s=i.indexOf("\n"+o);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}},o.inherits(f.AssertionError,Error),f.fail=y,f.ok=g,f.equal=function(t,e,n){t!=e&&y(t,e,n,"==",f.equal)},f.notEqual=function(t,e,n){t==e&&y(t,e,n,"!=",f.notEqual)},f.deepEqual=function(t,e,n){m(t,e,!1)||y(t,e,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,n){m(t,e,!0)||y(t,e,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,n){m(t,e,!1)&&y(t,e,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,n,r){m(e,n,!0)&&y(e,n,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,n){t!==e&&y(t,e,n,"===",f.strictEqual)},f.notStrictEqual=function(t,e,n){t===e&&y(t,e,n,"!==",f.notStrictEqual)},f.throws=function(t,e,n){x(!0,t,e,n)},f.doesNotThrow=function(t,e,n){x(!1,t,e,n)},f.ifError=function(t){if(t)throw t};var _=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e}}).call(this,n(21))},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])v(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,i){if(m(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation,o=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=l(t,i,r)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var c,b="",E=!1,T=["{","}"];(p(n)&&(E=!0,T=["[","]"]),S(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),_(n)&&(b=" "+f(n)),0!==s.length||E&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=E?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)k(e,String(s))?o.push(h(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}(t,n,r,a,s):s.map(function(e){return h(t,n,r,a,e,E)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,T)):T[0]+b+T[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function w(t){return b(t)&&"[object RegExp]"===E(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===E(t)}function _(t){return b(t)&&("[object Error]"===E(t)||t instanceof Error)}function S(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}e.debuglog=function(t){if(m(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){r.pid;s[t]=function(){e.format.apply(e,arguments)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=w,e.isObject=b,e.isDate=x,e.isError=_,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(25);function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){},e.inherits=n(26),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(21),n(24))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=window.window},function(t,e,n){"use strict";t.exports={Formats:n(29),Initializer:n(30),JSONDocument:n(31),JSONMapping:n(34),JSONPatch:n(32),JSONPointer:n(33),JSONSchema:n(35),Validator:n(36)}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,o=/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,s=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,u=/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,c=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"register",value:function(t,e){if("string"!=typeof t)throw new Error("Format name must be a string");return"string"==typeof e&&(e=new RegExp(e)),this[t]=e}},{key:"resolve",value:function(t){var e=this[t];if(!e)throw new Error("Unknown JSON Schema format.");return e}},{key:"test",value:function(t,e){return this.resolve(t).test(e)}}],[{key:"initialize",value:function(){var e=new t;return e.register("date-time",i),e.register("uri",o),e.register("email",s),e.register("ipv4",a),e.register("ipv6",u),e.register("hostname",c),e}}]),t}();t.exports=l.initialize()},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,n||{}),this.root=this.root||this,this.root.depth=this.root.depth||1,this.level>this.root.depth&&(this.root.depth=this.level),this.level=this.level||0,this.schema=e}return i(t,[{key:"compile",value:function(){var t=this.root,e=(this.depth,this.level,""),n="";if(n+=this.default(),n+=this.properties(),n+=this.items(),n+=this.member(),n+=this.item(),t===this){for(var r=1;r<=this.root.depth;r++)e+=this.declaration(r);return"\n        options = options || {}\n\n        if (options.filter === false) {\n          Object.assign(target, JSON.parse(JSON.stringify(source)))\n        }\n\n        "+e+"\n        "+n+"\n      "}return n}},{key:"declaration",value:function(t){return"\n      var target"+t+"\n      var source"+t+"\n      var count"+t+"\n    "}},{key:"default",value:function(){var t=this.schema,e=this.level,n=this.key,r=this.index,i=t.default,o="";return t.hasOwnProperty("default")&&(n&&(o+="\n          target"+e+"['"+n+"'] = "+JSON.stringify(i)+"\n        "),r&&(o+="\n          target"+e+"["+r+"] = "+JSON.stringify(i)+"\n        "),e>1&&(o+="\n          count"+e+"++\n        "),o="\n        if (options.defaults !== false) {\n          "+o+"\n        }\n      "),o}},{key:"member",value:function(){var t=this.schema,e=(this.root,this.level),n=this.key,r=t.properties,i=t.additionalProperties,o=t.items,s=t.additionalItems,a="";return!n||r||i||o||s||(a+="\n        target"+e+"['"+n+"'] = source"+e+"['"+n+"']\n      ",e>1&&(a+="\n          count"+e+"++\n        "),a="\n        if (source"+e+".hasOwnProperty('"+n+"')) {\n          "+a+"\n        }\n      "),a}},{key:"item",value:function(){var t=this.schema,e=(this.root,this.level),n=this.index,r=t.properties,i=t.additionalProperties,o=t.items,s=t.additionalItems,a="";return!n||r||i||o||s||(a+="\n        target"+e+"["+n+"] = source"+e+"["+n+"]\n      ",e>1&&(a+="\n          count"+e+"++\n        "),a="\n        if ("+n+" < len) {\n          "+a+"\n        }\n      "),a}},{key:"properties",value:function(){var e=this.schema,n=this.root,r=this.level,i=this.key,o=this.index,s=e.properties,a="";return s&&(Object.keys(s).forEach(function(e){var i=new t(s[e],{key:e,root:n,level:r+1});a+=i.compile()}),n===this?a="\n          if (typeof source === 'object' && source !== null && !Array.isArray(source)) {\n            if (typeof target !== 'object') {\n              throw new Error('?')\n            }\n\n            source1 = source\n            target1 = target\n            count1 = 0\n\n            "+a+"\n          }\n        ":(o&&(a="\n            if ("+o+" < source"+r+".length || typeof source"+r+"["+o+"] === 'object') {\n\n              source"+(r+1)+" = source"+r+"["+o+"] || {}\n              count"+(r+1)+" = 0\n\n              if ("+o+" < target"+r+".length || typeof target"+r+"["+o+"] !== 'object') {\n                target"+(r+1)+" = {}\n                if ("+o+" < source"+r+".length) {\n                  count"+(r+1)+"++\n                }\n              } else {\n                target"+(r+1)+" = target"+r+"["+o+"]\n              }\n\n              "+a+"\n\n              if (count"+(r+1)+" > 0) {\n                target"+r+"["+o+"] = target"+(r+1)+"\n                count"+r+"++\n              }\n\n            } else {\n              target"+r+"["+o+"] = source"+r+"["+o+"]\n              count"+r+"++\n            }\n          "),i&&(a="\n            if ((typeof source"+r+"['"+i+"'] === 'object'\n                  && source"+r+"['"+i+"'] !== null\n                  && !Array.isArray(source"+r+"['"+i+"']))\n                || !source"+r+".hasOwnProperty('"+i+"')) {\n\n              source"+(r+1)+" = source"+r+"['"+i+"'] || {}\n              count"+(r+1)+" = 0\n\n              if (!target"+r+".hasOwnProperty('"+i+"')\n                  || typeof target"+r+"['"+i+"'] !== 'object'\n                  || target"+r+"['"+i+"'] === null\n                  || Array.isArray(target"+r+"['"+i+"'])) {\n                target"+(r+1)+" = {}\n                if (source"+r+".hasOwnProperty('"+i+"')) {\n                  count"+(r+1)+"++\n                }\n              } else {\n                target"+(r+1)+" = target"+r+"['"+i+"']\n                count"+(r+1)+"++\n              }\n\n              "+a+"\n\n              if (count"+(r+1)+" > 0) {\n                target"+r+"['"+i+"'] = target"+(r+1)+"\n                count"+r+"++\n              }\n\n            } else {\n              target"+r+"['"+i+"'] = source"+r+"['"+i+"']\n              count"+r+"++\n            }\n          "))),a}},{key:"additionalProperties",value:function(){}},{key:"items",value:function(){var e=this.schema,n=this.root,i=this.level,o=this.key,s=(this.index,e.items),a="";if(s){if(Array.isArray(s));else if("object"===(void 0===s?"undefined":r(s))&&null!==s){var u="i"+(i+1);a+="\n          var sLen = source"+(i+1)+".length || 0\n          var tLen = target"+(i+1)+".length || 0\n          var len = 0\n\n          if (sLen > len) { len = sLen }\n          // THIS IS WRONG, CAUSED SIMPLE ARRAY INIT TO FAIL (OVERWRITE\n          // EXISTING TARGET VALUES WITH UNDEFINED WHEN SOURCE IS SHORTER THAN\n          // TARGET). LEAVING HERE UNTIL WE FINISH TESTING AND SEE WHY IT MIGHT\n          // HAVE BEEN HERE IN THE FIRST PLACE.\n          //\n          // if (tLen > len) { len = tLen }\n\n          for (var "+u+" = 0; "+u+" < len; "+u+"++) {\n            "+new t(s,{index:u,root:n,level:i+1}).compile()+"\n          }\n        "}a=n===this?"\n          if (Array.isArray(source)) {\n            if (!Array.isArray(target)) {\n              throw new Error('?')\n            }\n\n            source1 = source\n            target1 = target\n\n            "+a+"\n          }\n        ":"\n          if (Array.isArray(source"+i+"['"+o+"']) || !source"+i+".hasOwnProperty('"+o+"')) {\n\n            source"+(i+1)+" = source"+i+"['"+o+"'] || []\n            count"+(i+1)+" = 0\n\n            if (!target"+i+".hasOwnProperty('"+o+"') || !Array.isArray(target"+i+"['"+o+"'])) {\n              target"+(i+1)+" = []\n                if (source"+i+".hasOwnProperty('"+o+"')) {\n                  count"+(i+1)+"++\n                }\n\n            } else {\n              target"+(i+1)+" = target"+i+"['"+o+"']\n              count"+(i+1)+"++\n            }\n\n            "+a+"\n\n            if (count"+(i+1)+" > 0) {\n              target"+i+"['"+o+"'] = target"+(i+1)+"\n              count"+i+"++\n            }\n\n          } else {\n            target"+i+"['"+o+"'] = source"+i+"['"+o+"']\n            count"+i+"++\n          }\n        "}return a}},{key:"additionalItems",value:function(){}}],[{key:"compile",value:function(e){var n=new t(e).compile();try{return new Function("target","source","options",n)}catch(t){}}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(32),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialize(e,n)}return r(t,null,[{key:"schema",get:function(){throw new Error("Schema must be defined by classes extending JSONDocument")}}]),r(t,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.constructor.schema.initialize(this,t,e)}},{key:"validate",value:function(t){var e=this.constructor.schema;return(t||e).validate(this)}},{key:"patch",value:function(t){var e=new i(t);e.apply(this)}},{key:"select",value:function(){}},{key:"project",value:function(t){return t.project(this)}}],[{key:"serialize",value:function(t){return JSON.stringify(t)}},{key:"deserialize",value:function(t){try{return JSON.parse(t)}catch(t){throw new Error("Failed to parse JSON")}}}]),t}();t.exports=o},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(33),s=["add","remove","replace","move","copy","test"],a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ops=e||[]}return i(t,[{key:"apply",value:function(t){var e=this;this.ops.forEach(function(n){var r=n.op;if(!r)throw new Error('Missing "op" in JSON Patch operation');if(-1===s.indexOf(r))throw new Error('Invalid "op" in JSON Patch operation');if(!n.path)throw new Error('Missing "path" in JSON Patch operation');e[r](n,t)})}},{key:"add",value:function(t,e){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch add operation');new o(t.path,2).add(e,t.value)}},{key:"remove",value:function(t,e){new o(t.path).remove(e)}},{key:"replace",value:function(t,e){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch replace operation');new o(t.path).replace(e,t.value)}},{key:"move",value:function(t,e){if(void 0===t.from)throw new Error('Missing "from" in JSON Patch move operation');if(t.path.match(new RegExp("^"+t.from)))throw new Error('Invalid "from" in JSON Patch move operation');var n=new o(t.path),r=new o(t.from),i=r.get(e);r.remove(e),n.add(e,i)}},{key:"copy",value:function(t,e){if(void 0===t.from)throw new Error('Missing "from" in JSON Patch copy operation');var n=new o(t.path),r=new o(t.from).get(e);n.add(e,r)}},{key:"test",value:function(t,e){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch test operation');var n=new o(t.path).get(e);if(r(t.value),n!==t.value)throw new Error("Mismatching JSON Patch test value")}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=0,o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expr=e,this.mode=n||i,this.tokens=e&&"#"===e.charAt(0)?this.parseURIFragmentIdentifier(e):this.parseJSONString(e)}return r(t,[{key:"escape",value:function(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}},{key:"unescape",value:function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},{key:"parseJSONString",value:function(t){if("string"!=typeof t)throw new Error("JSON Pointer must be a string");if(""===t)return[];if("/"!==t.charAt(0))throw new Error("Invalid JSON Pointer");return"/"===t?[""]:t.substr(1).split("/").map(this.unescape)}},{key:"toJSONString",value:function(){return"/"+this.tokens.map(this.escape).join("/")}},{key:"parseURIFragmentIdentifier",value:function(t){if("string"!=typeof t)throw new Error("JSON Pointer must be a string");if("#"!==t.charAt(0))throw new Error("Invalid JSON Pointer URI Fragment Identifier");return this.parseJSONString(decodeURIComponent(t.substr(1)))}},{key:"toURIFragmentIdentifier",value:function(){var t=this;return"#/"+this.tokens.map(function(e){return encodeURIComponent(t.escape(e))}).join("/")}},{key:"get",value:function(t){for(var e=t,n=this.tokens,r=0;r<n.length;r++){if(!e||void 0===e[n[r]]){if(this.mode!==i)return;throw new Error("Invalid JSON Pointer reference")}e=e[n[r]]}return e}},{key:"add",value:function(t,e){for(var n=this.tokens,r=t,o=0;o<n.length;o++){var s=n[o];if(o===n.length-1)"-"===s?r.push(e):Array.isArray(r)?r.splice(s,0,e):void 0!==e&&(r[s]=e);else if(r[s])r=r[s];else switch(this.mode){case i:throw new Error("Invalid JSON Pointer reference");case 1:r=r[s]=parseInt(s)?[]:{};break;case 2:return;default:throw new Error("Invalid pointer mode")}}}},{key:"replace",value:function(t,e){for(var n=this.tokens,r=t,i=0;i<n.length;i++){var o=n[i];i===n.length-1?r[o]=e:r=r[o]?r[o]:r[o]=parseInt(o)?[]:{}}}},{key:"remove",value:function(t){for(var e=this.tokens,n=t,r=0;r<e.length;r++){var i=e[r];if(void 0===n||void 0===n[i])return;if(Array.isArray(n))return void n.splice(i,1);r===e.length-1&&delete n[i],n=n[i]}}}],[{key:"parse",value:function(e){return new t(e)}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(33),o=1,s=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"mapping",{enumerable:!1,value:new Map}),Object.keys(e).forEach(function(t){var r=e[t];n.mapping.set(new i(t,o),new i(r,o))})}return r(t,[{key:"map",value:function(t,e){this.mapping.forEach(function(n,r){r.add(t,n.get(e))})}},{key:"project",value:function(t,e){this.mapping.forEach(function(n,r){n.add(e,r.get(t))})}}]),t}();t.exports=s},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n(30),a=n(36),u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,e),Object.defineProperties(this,{initialize:{enumerable:!1,writeable:!1,value:s.compile(e)},validate:{enumerable:!1,writeable:!1,value:a.compile(e)}})}return i(t,[{key:"extend",value:function(e){function n(t){return t&&"object"===(void 0===t?"undefined":r(t))&&null!==t&&!Array.isArray(t)}return new t(function t(e,r){var i=Object.assign({},e);return n(e)&&n(r)&&Object.keys(r).forEach(function(s){n(r[s])&&s in e?i[s]=t(e[s],r[s]):Object.assign(i,o({},s,r[s]))}),i}(this,e))}}]),t}();t.exports=u},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(29),s=0,a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schema=e,Object.assign(this,n),this.address||(this.address=""),!0!==this.require&&(this.require=!1)}return i(t,null,[{key:"compile",value:function(e){var n='\n      // "cursor"\n      let value = data\n      let container\n      let stack = []\n      let top = -1\n\n      // error state\n      let valid = true\n      let errors = []\n\n      // complex schema state\n      let initialValidity\n      let anyValid\n      let notValid\n      let countOfValid\n      let initialErrorCount\n      let accumulatedErrorCount\n\n      // validation code\n      '+new t(e).compile()+"\n\n      // validation result\n      return {\n        valid,\n        errors\n      }\n    ";return new Function("data",n)}},{key:"counter",get:function(){return s++}}]),i(t,[{key:"compile",value:function(){var t="";return this.require&&(t+=this.required()),t+=this.type(),t+=this.array(),t+=this.number(),t+=this.object(),t+=this.string(),t+=this.enum(),t+=this.anyOf(),t+=this.allOf(),t+=this.not(),t+=this.oneOf()}},{key:"push",value:function(){return"\n      stack.push(value)\n      container = value\n      top++\n    "}},{key:"pop",value:function(){return"\n      if (stack.length > 1) {\n        top--\n        stack.pop()\n      }\n\n      value = container = stack[top]\n    "}},{key:"type",value:function(){var t=this.schema.type,e=this.address,n="";t&&(n+="\n      // "+e+" type checking\n      if (value !== undefined && "+(Array.isArray(t)?t:[t]).map(function(t){return"array"===t?"!Array.isArray(value)":"boolean"===t?"typeof value !== 'boolean'":"integer"===t?"!Number.isInteger(value)":"null"===t?"value !== null":"number"===t?"typeof value !== 'number'":"object"===t?"(typeof value !== 'object' || Array.isArray(value) || value === null)":"string"===t?"typeof value !== 'string'":void 0}).join(" && ")+") {\n        valid = false\n        errors.push({\n          keyword: 'type',\n          message: 'invalid type'\n        })\n      }\n      ");return n}},{key:"array",value:function(){var t=this.validations(["additionalItems","items","minItems","maxItems","uniqueItems"]),e="";return t.length>0&&(e+="\n      /**\n       * Array validations\n       */\n      if (Array.isArray(value)) {\n      "+t+"\n      }\n      "),e}},{key:"number",value:function(){var t=this.validations(["minimum","maximum","multipleOf"]),e="";return t.length>0&&(e+="\n      /**\n       * Number validations\n       */\n      if (typeof value === 'number') {\n      "+t+"\n      }\n      "),e}},{key:"object",value:function(){var t=this.validations(["maxProperties","minProperties","additionalProperties","properties","patternProperties","dependencies","schemaDependencies","propertyDependencies"]),e="";return t.length>0&&(e+="\n      /**\n       * Object validations\n       */\n      if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n      "+t+"\n      }\n      "),e}},{key:"string",value:function(){var t=this.validations(["maxLength","minLength","pattern","format"]),e="";return t.length>0&&(e+="\n      /**\n       * String validations\n       */\n      if (typeof value === 'string') {\n      "+t+"\n      }\n      "),e}},{key:"validations",value:function(t){var e=this,n=this.schema,r="";return Object.keys(n).filter(function(e){return-1!==t.indexOf(e)}).forEach(function(t){r+=e[t]()}),r}},{key:"enum",value:function(){var t=this.schema.enum,e=this.address,n=["value !== undefined"],i="";return t&&(t.forEach(function(t){switch(void 0===t?"undefined":r(t)){case"boolean":case"number":n.push("value !== "+t);break;case"string":n.push('value !== "'+t+'"');break;case"object":null===t?n.push("value !== null"):n.push("'"+JSON.stringify(t)+"' !== JSON.stringify(value)");break;default:throw new Error("Things are not well in the land of enum")}}),i+='\n      /**\n       * Validate "'+e+'" enum\n       */\n      if ('+n.join(" && ")+") {\n        valid = false\n        errors.push({\n          keyword: 'enum',\n          message: JSON.stringify(value) + ' is not an enumerated value'\n        })\n      }\n      "),i}},{key:"anyOf",value:function(){var e=this.schema.anyOf,n=this.address,r="";return Array.isArray(e)&&(r+="\n        initialValidity = valid\n        initialErrorCount = errors.length\n        anyValid = false\n      ",e.forEach(function(e){var i=new t(e,{address:n});r+="\n        accumulatedErrorCount = errors.length\n        "+i.compile()+"\n        if (accumulatedErrorCount === errors.length) {\n          anyValid = true\n        }\n        "}),r+="\n          if (anyValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          }\n      "),r}},{key:"allOf",value:function(){var e=this.schema.allOf,n=this.address,r="";return Array.isArray(e)&&e.forEach(function(e){var i=new t(e,{address:n});r+="\n        "+i.compile()+"\n        "}),r}},{key:"oneOf",value:function(){var e=this.schema.oneOf,n=this.address,r="";return Array.isArray(e)&&(r+="\n        /**\n         * Validate "+n+" oneOf\n         */\n        initialValidity = valid\n        initialErrorCount = errors.length\n        countOfValid = 0\n      ",e.forEach(function(e){var i=new t(e,{address:n});r+="\n        accumulatedErrorCount = errors.length\n        "+i.compile()+"\n        if (accumulatedErrorCount === errors.length) {\n          countOfValid += 1\n        }\n        "}),r+="\n          if (countOfValid === 1) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors.push({\n              keyword: 'oneOf',\n              message: 'what is a reasonable error message for this case?'\n            })\n          }\n      "),r}},{key:"not",value:function(){var e=this.schema.not,n=this.address,i="";"object"!==(void 0===e?"undefined":r(e))||null===e||Array.isArray(e)||(i+="\n        /**\n         * NOT\n         */\n        if (value !== undefined) {\n          initialValidity = valid\n          initialErrorCount = errors.length\n          notValid = true\n\n          accumulatedErrorCount = errors.length\n\n          "+new t(e,{address:n}).compile()+"\n\n          if (accumulatedErrorCount === errors.length) {\n            notValid = false\n          }\n\n          if (notValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors = errors.slice(0, initialErrorCount)\n            errors.push({\n              keyword: 'not',\n              message: 'hmm...'\n            })\n          }\n        }\n      ");return i}},{key:"properties",value:function(){var e=this.schema,n=this.address,i=e.properties,o=e.required,s=this.push();return o=Array.isArray(o)?o:[],"object"===(void 0===i?"undefined":r(i))&&Object.keys(i).forEach(function(e){var r=i[e],a=-1!==o.indexOf(e),u=new t(r,{address:[n,e].filter(function(t){return!!t}).join("."),require:a});s+="\n        value = container['"+e+"']\n        ",s+=u.compile()}),s+=this.pop()}},{key:"otherProperties",value:function(){return"\n      /**\n       * Validate Other Properties\n       */\n      "+this.push()+"\n\n      for (let key in container) {\n        value = container[key]\n        matched = false\n\n        "+this.patternValidations()+"\n        "+this.additionalValidations()+"\n      }\n\n      "+this.pop()+"\n    "}},{key:"patternValidations",value:function(){var e=this.schema.patternProperties,n="";return"object"===(void 0===e?"undefined":r(e))&&Object.keys(e).forEach(function(r){var i=new t(e[r]);n+="\n          if (key.match('"+r+"')) {\n            matched = true\n            "+i.compile()+"\n          }\n        "}),n}},{key:"additionalValidations",value:function(){var e=this.schema,n=e.properties,i=e.additionalProperties,o=this.address,s="",a=["matched !== true"];if(Object.keys(n||{}).forEach(function(t){a.push("key !== '"+t+"'")}),"object"===(void 0===i?"undefined":r(i))){var u=new t(i,{address:o+"[APKey]"});s+="\n        // validate additional properties\n        if ("+a.join(" && ")+") {\n          "+u.compile()+"\n        }\n      "}return!1===i&&(s+="\n        // validate non-presence of additional properties\n        if ("+a.join(" && ")+") {\n          valid = false\n          errors.push({\n            keyword: 'additionalProperties',\n            message: key + ' is not a defined property'\n          })\n        }\n      "),s}},{key:"patternProperties",value:function(){var t="";return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,t+=this.otherProperties()),t}},{key:"additionalProperties",value:function(){var t="";return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,t+=this.otherProperties()),t}},{key:"minProperties",value:function(){var t=this.schema.minProperties;return"\n        // "+this.address+" min properties\n        if (Object.keys(value).length < "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'minProperties',\n            message: 'too few properties'\n          })\n        }\n    "}},{key:"maxProperties",value:function(){var t=this.schema.maxProperties;return"\n        // "+this.address+" max properties\n        if (Object.keys(value).length > "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'maxProperties',\n            message: 'too many properties'\n          })\n        }\n    "}},{key:"dependencies",value:function(){var e=this.schema.dependencies,n=this.address,i=this.push();return"object"===(void 0===e?"undefined":r(e))&&Object.keys(e).forEach(function(o){var s=e[o],a=[];if(Array.isArray(s))s.forEach(function(t){a.push("container['"+t+"'] === undefined")}),i+="\n            if (container['"+o+"'] !== undefined && ("+a.join(" || ")+")) {\n              valid = false\n              errors.push({\n                keyword: 'dependencies',\n                message: 'unmet dependencies'\n              })\n            }\n          ";else if("object"===(void 0===s?"undefined":r(s))){var u=new t(s,{address:n});i+="\n            if (container['"+o+"'] !== undefined) {\n              "+u.compile()+"\n            }\n          "}}),i+=this.pop()}},{key:"required",value:function(){this.schema.properties;var t="";return t+="\n      // validate "+this.address+" presence\n      if (value === undefined) {\n        valid = false\n        errors.push({\n          keyword: 'required',\n          message: 'is required'\n        })\n      }\n    "}},{key:"additionalItems",value:function(){var e=this.schema,n=e.items,i=e.additionalItems,o=(this.address,"");if(!1===i&&Array.isArray(n)&&(o+="\n        // don't allow additional items\n        if (value.length > "+n.length+") {\n          valid = false\n          errors.push({\n            keyword: 'additionalItems',\n            message: 'additional items not allowed'\n          })\n        }\n      "),"object"===(void 0===i?"undefined":r(i))&&null!==i&&Array.isArray(n)){var s=new t(i),a=t.counter;o+="\n        // additional items\n        "+this.push()+"\n\n        for (var i"+a+" = "+n.length+"; i"+a+" <= container.length; i"+a+"++) {\n          value = container[i"+a+"]\n          "+s.compile()+"\n        }\n\n        "+this.pop()+"\n      "}return o}},{key:"items",value:function(){var e=this.schema.items,n=this.address,i="";if(Array.isArray(e))i+=this.push(),e.forEach(function(e,r){var o=new t(e,{address:n+"["+r+"]"});i+="\n          // item #"+r+"\n          value = container["+r+"]\n          "+o.compile()+"\n        "}),i+=this.pop();else if("object"===(void 0===e?"undefined":r(e))&&null!==e){var o=new t(e),s=t.counter;i+="\n        // items\n        "+this.push()+"\n\n        for (var i"+s+" = 0; i"+s+" < container.length; i"+s+"++) {\n          // read array element\n          value = container[i"+s+"]\n          "+o.compile()+"\n        }\n\n        "+this.pop()+"\n      "}return i}},{key:"minItems",value:function(){var t=this.schema.minItems;return"\n        // "+this.address+" min items\n        if (value.length < "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'minItems',\n            message: 'too few properties'\n          })\n        }\n    "}},{key:"maxItems",value:function(){var t=this.schema.maxItems;return"\n        // "+this.address+" max items\n        if (value.length > "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'maxItems',\n            message: 'too many properties'\n          })\n        }\n    "}},{key:"uniqueItems",value:function(){var t=this.schema.uniqueItems,e=this.address,n="";return!0===t&&(n+="\n        // validate "+e+" unique items\n        let values = value.map(v => JSON.stringify(v)) // TODO: optimize\n        let set = new Set(values)\n        if (values.length !== set.size) {\n          valid = false\n          errors.push({\n            keyword: 'uniqueItems',\n            message: 'items must be unique'\n          })\n        }\n      "),n}},{key:"minLength",value:function(){var t=this.schema.minLength;return"\n        // "+this.address+" validate minLength\n        if (Array.from(value).length < "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'minLength',\n            message: 'too short'\n          })\n        }\n    "}},{key:"maxLength",value:function(){var t=this.schema.maxLength;return"\n        // "+this.address+" validate maxLength\n        if (Array.from(value).length > "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'maxLength',\n            message: 'too long'\n          })\n        }\n    "}},{key:"pattern",value:function(){var t=this.schema.pattern,e=this.address;if(t)return"\n          // "+e+" validate pattern\n          if (!value.match(new RegExp('"+t+"'))) {\n            valid = false\n            errors.push({\n              keyword: 'pattern',\n              message: 'does not match the required pattern'\n            })\n          }\n      "}},{key:"format",value:function(){var t=this.schema.format,e=this.address,n=o.resolve(t);if(n)return"\n      // "+e+" validate format\n      if (!value.match("+n+")) {\n        valid = false\n        errors.push({\n          keyword: 'format',\n          message: 'is not \""+t+"\" format'\n        })\n      }\n      "}},{key:"minimum",value:function(){var t=this.schema,e=t.minimum,n=t.exclusiveMinimum;return"\n        // "+this.address+" validate minimum\n        if (value "+(!0===n?"<=":"<")+" "+e+") {\n          valid = false\n          errors.push({\n            keyword: 'minimum',\n            message: 'too small'\n          })\n        }\n    "}},{key:"maximum",value:function(){var t=this.schema,e=t.maximum,n=t.exclusiveMaximum;return"\n        // "+this.address+" validate maximum\n        if (value "+(!0===n?">=":">")+" "+e+") {\n          valid = false\n          errors.push({\n            keyword: 'maximum',\n            message: 'too large'\n          })\n        }\n    "}},{key:"multipleOf",value:function(){var t=this.schema.multipleOf,e="";if("number"==typeof t){var n=t.toString().length-t.toFixed(0).length-1,r=n>0?Math.pow(10,n):1;e+="\n        if ("+(n>0?"(value * "+r+") % "+t*r+" !== 0":"value % "+t+" !== 0")+") {\n          valid = false\n          errors.push({\n            keyword: 'multipleOf',\n            message: 'must be a multiple of "+t+"'\n          })\n        }\n      "}return e}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=n(38),i=n(57),o=n(60),s=n(62),a=n(67),u=n(64),c=n(66),l=n(58),f=n(61),h=n(65),p=n(63);t.exports={JWA:r,JWK:i,JWKSet:o,JWT:s,JWS:a,Base64URLSchema:u,JOSEHeaderSchema:c,JWKSchema:l,JWKSetSchema:f,JWTClaimsSetSchema:h,JWTSchema:p}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(39);var i=n(46),o=n(55).NotSupportedError,s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"sign",value:function(t,e,n){var r=i.normalize("sign",t);return r instanceof Error?Promise.reject(new o(t)):r.sign(e,n)}},{key:"verify",value:function(t,e,n,r){var s=i.normalize("verify",t);return s instanceof Error?Promise.reject(new o(t)):s.verify(e,n,r)}},{key:"importKey",value:function(t){return i.normalize("importKey",t.alg).importKey(t)}}]),t}();t.exports=s},function(t,e,n){t.exports=n(40).default,t.exports.default=t.exports},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const r=n(45);function i(e,n="utf8"){return t.isBuffer(e)?s(e.toString("base64")):s(t.from(e,n).toString("base64"))}function o(t){return t=t.toString(),r.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function s(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}let a=i;a.encode=i,a.decode=function(e,n="utf8"){return t.from(o(e),"base64").toString(n)},a.toBase64=o,a.fromBase64=s,a.toBuffer=function(e){return t.from(o(e),"base64")},e.default=a}).call(this,n(41).Buffer)},function(t,e,n){"use strict";(function(t){var r=n(42),i=n(43),o=n(44);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return z(F(e,t.length-n),t,n,r)}function b(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return b(t,e,n,r)}function _(t,e,n,r){return z(q(e),t,n,r)}function S(t,e,n,r){return z(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function C(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(21))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,l=s>0?r-4:r,f=0;f<l;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){let n=e.length,r=n%4;if(!r)return e;let i=n,o=4-r,s=n+o,a=t.alloc(s);for(a.write(e);o--;)a.write("=",i++);return a.toString()}}).call(this,n(41).Buffer)},function(t,e,n){"use strict";var r=n(47),i=n(48),o=n(52),s=new(n(53));s.define("HS256","sign",new i({name:"HMAC",hash:{name:"SHA-256"}})),s.define("HS384","sign",new i({name:"HMAC",hash:{name:"SHA-384"}})),s.define("HS512","sign",new i({name:"HMAC",hash:{name:"SHA-512"}})),s.define("RS256","sign",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}})),s.define("RS384","sign",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}})),s.define("RS512","sign",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}})),s.define("none","sign",new r({})),s.define("HS256","verify",new i({name:"HMAC",hash:{name:"SHA-256"}})),s.define("HS384","verify",new i({name:"HMAC",hash:{name:"SHA-384"}})),s.define("HS512","verify",new i({name:"HMAC",hash:{name:"SHA-512"}})),s.define("RS256","verify",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}})),s.define("RS384","verify",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}})),s.define("RS512","verify",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}})),s.define("none","verify",new r({})),s.define("RS256","importKey",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}})),s.define("RS384","importKey",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}})),s.define("RS512","importKey",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}})),t.exports=s},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"sign",value:function(){return Promise.resolve("")}},{key:"verify",value:function(){}}]),t}();t.exports=i},function(t,e,n){"use strict";(function(e){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(39),o=n(49),s=n(50),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e}return r(t,[{key:"sign",value:function(t,n){var r=this.params;return n=(new s).encode(n),o.subtle.sign(r,t,n).then(function(t){return i(e.from(t))})}},{key:"verify",value:function(t,e,n){var r=this.params;return"string"==typeof e&&(e=Uint8Array.from(i.toBuffer(e))),"string"==typeof n&&(n=(new s).encode(n)),o.subtle.verify(r,t,e,n)}},{key:"assertSufficientKeyLength",value:function(t){if(t.length<this.bitlength)throw new Error("The key is too short.")}}]),t}();t.exports=a}).call(this,n(41).Buffer)},function(t,e){t.exports=window.crypto},function(t,e,n){"use strict";(function(e){var r=e.TextEncoder?e.TextEncoder:n(51).TextEncoder;t.exports=r}).call(this,n(21))},function(t,e){t.exports=window.TextEncoder},function(t,e,n){"use strict";(function(e){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(39),o=n(49),s=n(50),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e}return r(t,[{key:"sign",value:function(t,n){var r=this.params;return n=(new s).encode(n),o.subtle.sign(r,t,n).then(function(t){return i(e.from(t))})}},{key:"verify",value:function(t,e,n){var r=this.params;return"string"==typeof e&&(e=Uint8Array.from(i.toBuffer(e))),"string"==typeof n&&(n=(new s).encode(n)),o.subtle.verify(r,t,e,n)}},{key:"importKey",value:function(t){var e=Object.assign({},t),n=this.params,r=t.key_ops||[];return"sig"===t.use&&r.push("verify"),"enc"===t.use?Promise.resolve(t):(t.key_ops&&(r=t.key_ops),o.subtle.importKey("jwk",e,n,!0,r).then(function(t){return Object.defineProperty(e,"cryptoKey",{enumerable:!1,value:t}),e}))}}]),t}();t.exports=a}).call(this,n(41).Buffer)},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(54),o=["sign","verify","encrypt","decrypt","importKey"],s=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.forEach(function(t){e[t]={}})}return r(t,[{key:"define",value:function(t,e,n){this[e][t]=n}},{key:"normalize",value:function(t,e){var n=this[t];if(!n)return new SyntaxError;var r=n[e];return r||new i(e)}}],[{key:"operations",get:function(){return o}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.message=t+" is not a supported algorithm",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports=r},function(t,e,n){"use strict";t.exports={DataError:n(56),NotSupportedError:n(54)}},function(t,e,n){"use strict";var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports=r},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(28).JSONDocument,o=n(58),s=n(38),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),r(e,null,[{key:"importKey",value:function(t){return s.importKey(t)}},{key:"schema",get:function(){return o}}]),e}();t.exports=a},function(t,e,n){"use strict";var r=n(28).JSONSchema,i=(n(59).BASE64_REGEXP,new r({type:"object",properties:{kty:{type:"string",enum:["RSA","EC","oct"]},use:{type:"string",enum:["sig","enc"]},key_ops:{type:"array",items:{enum:["sign","verify","encrypt","decrypt","wrapKey","unwrapKey","deriveKey","deriveBits"]}},alg:{type:"string",enum:["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none"]},kid:{type:"string"},x5u:{type:"string"},x5c:{type:"array"},x5t:{type:"string"}}}));t.exports=i},function(t,e,n){"use strict";var r=n(28).Formats;r.register("StringOrURI",new RegExp),r.register("NumericDate",new RegExp),r.register("URI",new RegExp),r.register("url",new RegExp),r.register("base64",new RegExp),r.register("base64url",new RegExp),r.register("MediaType",new RegExp)},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(28).JSONDocument,o=n(61),s=n(57),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),r(e,null,[{key:"importKeys",value:function(t){var n=this.schema.validate(t);if(!n.valid)return Promise.reject(new Error("Invalid JWKSet: "+JSON.stringify(n,null,2)));if(!t.keys)return Promise.reject(new Error("Cannot import JWKSet: keys property is empty"));var r=void 0,i=void 0;try{r=new e(t),i=t.keys.map(function(t){return s.importKey(t)})}catch(t){return Promise.reject(t)}return Promise.all(i).then(function(t){return r.keys=t,r})}},{key:"schema",get:function(){return o}}]),e}();t.exports=a},function(t,e,n){"use strict";var r=new(0,n(28).JSONSchema)({type:"object",properties:{keys:{type:"array",items:n(58)}}});t.exports=r},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(39),s=n(28).JSONDocument,a=n(63),u=n(67),c=n(56),l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),i(e,[{key:"isJWE",value:function(){return!!this.header.enc}},{key:"resolveKeys",value:function(t){var e=this.header.kid,n=void 0,i=void 0;if(Array.isArray(t)&&(n=t),t.keys&&(n=t.keys),t.keys||"object"!==(void 0===t?"undefined":r(t))||(n=[t]),!n)throw new c("Invalid JWK argument");return!!(i=e?n.find(function(t){return t.kid===e}):n.find(function(t){return"sig"===t.use}))&&(this.key=i.cryptoKey,!0)}},{key:"encode",value:function(){var t=this.validate();if(!t.valid)return Promise.reject(t);return this.isJWE()?JWE.encrypt(this):u.sign(this)}},{key:"verify",value:function(){var t=this.validate();return t.valid?u.verify(this):Promise.reject(t)}}],[{key:"decode",value:function(t){var e=void 0;if("string"!=typeof t)throw new c("JWT must be a string");if(t.startsWith("{")){try{t=JSON.parse(t,function(){})}catch(t){throw new c("Invalid JWT serialization")}t.signatures||t.recipients?t.serialization="json":t.serialization="flattened",e=new this(t,{filter:!1})}else try{var n=t.split("."),r=n.length;if(3!==r&&5!==r)throw new Error("Malformed JWT");var i=JSON.parse(o.decode(n[0]));if(3===r){e=new this({type:"JWS",segments:n,header:i,payload:JSON.parse(o.decode(n[1])),signature:n[2],serialization:"compact"},{filter:!1})}}catch(t){throw new c("Invalid JWT compact serialization")}return e}},{key:"encode",value:function(t,n,r){return new e(t,n).encode(r)}},{key:"verify",value:function(t,n){var r=e.decode(n);return r.key=t,r.verify().then(function(t){return r})}},{key:"schema",get:function(){return a}}]),e}();t.exports=l},function(t,e,n){"use strict";var r=n(64),i=n(65),o=n(66),s=new(0,n(28).JSONSchema)({type:"object",properties:{type:{type:"string",enum:["JWS","JWE"]},segments:{type:"array"},header:o,protected:o,unprotected:o,iv:r,aad:r,ciphertext:r,tag:r,recipients:{type:"array",items:{type:"object",properties:{header:o,encrypted_key:r}}},payload:i,signatures:{type:"array",items:{type:"object",properties:{protected:o,header:o,signature:r,key:{type:"object"}}}},signature:r,verified:{type:"boolean",default:!1},key:{type:"object"},serialization:{type:"string",enum:["compact","json","flattened"],default:"compact"}}});t.exports=s},function(t,e,n){"use strict";var r=new(0,n(28).JSONSchema)({type:"string",format:"base64url"});t.exports=r},function(t,e,n){"use strict";var r=new(0,n(28).JSONSchema)({properties:{iss:{type:"string",format:"StringOrURI"},sub:{type:"string",format:"StringOrURI"},aud:{type:["array","string"],format:"StringOrURI",items:{format:"StringOrURI"}},exp:{type:"number",format:"NumericDate"},nbf:{type:"number",format:"NumericDate"},iat:{type:"number",format:"NumericDate"},jti:{type:"string"}}});t.exports=r},function(t,e,n){"use strict";n(58);var r=new(0,n(28).JSONSchema)({type:"object",properties:{typ:{type:"string"},cty:{type:"string",enum:["JWT"]},alg:{type:"string",format:"StringOrURI"},jku:{type:"string",format:"URI"},kid:{type:"string"},x5u:{type:"string",format:"URI"},x5c:{type:"array",items:{type:"string",format:"base64"}},x5t:{type:"string",format:"base64url"},crit:{type:"array",items:{type:"string"},minItems:1},enc:{type:"string",format:"StringOrURI"},zip:{type:"string"}}});t.exports=r},function(t,e,n){"use strict";var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(39),s=n(38),a=n(55).DataError,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"sign",value:function(t){var e=o(JSON.stringify(t.payload));if("compact"===t.serialization){var n=t.key,r=t.header.alg,i=o(JSON.stringify(t.header))+"."+e;return s.sign(r,n,i).then(function(t){return i+"."+t})}return t.serialization,t.serialization,Promise.reject(new a("Unsupported serialization"))}},{key:"verify",value:function(t){t.signatures;var e=t.key,n=t.signature,i=t.header.alg;if(t.signature){var o=r(t.segments,2),u=o[0]+"."+o[1];return"none"===i?Promise.reject(new a("Signature provided to verify with alg: none")):s.verify(i,e,n,u).then(function(e){return t.verified=e,e})}if("none"===i){if(!e&&!n)return t.verified=!0,Promise.resolve(!0);if(e)return Promise.reject(new a("Key provided to verify signature with alg: none"))}return Promise.reject(new a("Missing signature(s)"))}}]),t}();t.exports=u},function(t,e,n){(function(e){const r=n(22),i=n(39),o=n(49),{JWT:s}=n(37),a=n(69),{URL:u}=n(27);class c{static create(t,n,s){const{provider:l,defaults:f,registration:h}=t;let p,d,v,y;return Promise.resolve().then(()=>(r(l.configuration,"RelyingParty provider OpenID Configuration is missing"),r(f.authenticate,"RelyingParty default authentication parameters are missing"),r(h,"RelyingParty client registration is missing"),p=l.configuration.issuer,d=l.configuration.authorization_endpoint,v={client_id:h.client_id},y=Object.assign(f.authenticate,v,n),r(p,"Missing issuer in provider OpenID Configuration"),r(d,"Missing authorization_endpoint in provider OpenID Configuration"),r(y.scope,"Missing scope parameter in authentication request"),r(y.response_type,"Missing response_type parameter in authentication request"),r(y.client_id,"Missing client_id parameter in authentication request"),r(y.redirect_uri,"Missing redirect_uri parameter in authentication request"),y.state=Array.from(o.getRandomValues(new Uint8Array(16))),y.nonce=Array.from(o.getRandomValues(new Uint8Array(16))),Promise.all([o.subtle.digest({name:"SHA-256"},new Uint8Array(y.state)),o.subtle.digest({name:"SHA-256"},new Uint8Array(y.nonce))]))).then(t=>{let n=i(e.from(t[0])),r=i(e.from(t[1]));s[`${p}/requestHistory/${n}`]=JSON.stringify(y),y.state=n,y.nonce=r}).then(()=>c.generateSessionKeys()).then(t=>{c.storeSessionKeys(t,y,s)}).then(()=>{if(l.configuration.request_parameter_supported)return c.encodeRequestParams(y).then(t=>{y=t})}).then(()=>{let t=new u(d);return t.search=a.encode(y),t.href})}static generateSessionKeys(){return o.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(t=>Promise.all([o.subtle.exportKey("jwk",t.publicKey),o.subtle.exportKey("jwk",t.privateKey)])).then(t=>{let[e,n]=t;return{public:e,private:n}})}static storeSessionKeys(t,e,n){n["oidc.session.privateKey"]=JSON.stringify(t.private),e.key=t.public}static encodeRequestParams(t){const e=["scope","client_id","response_type","state"];let n={};return Object.keys(t).filter(t=>!e.includes(t)).forEach(e=>{n[e]=t[e]}),new s({header:{alg:"none"},payload:n},{filter:!1}).encode().then(e=>{return{scope:t.scope,client_id:t.client_id,response_type:t.response_type,request:e,state:t.state}})}}t.exports=c}).call(this,n(41).Buffer)},function(t,e){t.exports=class{static encode(t){let e=[];return Object.keys(t).forEach(function(n){e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]))}),e.join("&")}static decode(t){let e={};return t.split("&").forEach(function(t){let n=t.split("="),r=decodeURIComponent(n[0]),i=decodeURIComponent(n[1]);e[r]=i}),e}}},function(t,e,n){(function(e,r){const{URL:i}=n(27),o=n(22),s=n(49),a=n(39),u=n(6),c=u.Headers?u.Headers:e.Headers,l=n(69),f=n(71),h=n(73),p=n(74),d=n(76);class v{constructor({rp:t,redirect:e,body:n,session:r,mode:i,params:o={}}){this.rp=t,this.redirect=e,this.body=n,this.session=r,this.mode=i,this.params=o}static validateResponse(t){return Promise.resolve(t).then(this.parseResponse).then(this.errorResponse).then(this.matchRequest).then(this.validateStateParam).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(h.fromAuthResponse)}static parseResponse(t){let{redirect:e,body:n}=t;if(e&&n||!e&&!n)throw new d(400,"Invalid response mode");if(e){let n=new i(e),{search:r,hash:o}=n;if(r&&o||!r&&!o)throw new d(400,"Invalid response mode");r&&(t.params=l.decode(r.substring(1)),t.mode="query"),o&&(t.params=l.decode(o.substring(1)),t.mode="fragment")}return n&&(t.params=l.decode(n),t.mode="form_post"),t}static errorResponse(t){const e=t.params.error;if(e){const n={};n.error=e,n.error_description=t.params.error_description,n.error_uri=t.params.error_uri,n.state=t.params.state;const r=new Error(`AuthenticationResponse error: ${e}`);throw r.info=n,r}return t}static matchRequest(t){let{rp:e,params:n,session:r}=t,i=n.state,o=e.provider.configuration.issuer;if(!i)throw new Error("Missing state parameter in authentication response");let s=r[`${o}/requestHistory/${i}`];if(!s)throw new Error("Mismatching state parameter in authentication response");return t.request=JSON.parse(s),t}static validateStateParam(t){let e=new Uint8Array(t.request.state),n=t.params.state;return s.subtle.digest({name:"SHA-256"},e).then(e=>{if(n!==a(r.from(e)))throw new Error("Mismatching state parameter in authentication response");return t})}static validateResponseMode(t){if("code"!==t.request.response_type&&"query"===t.mode)throw new Error("Invalid response mode");return t}static validateResponseParams(t){let{request:e,params:n}=t,r=e.response_type.split(" ");return r.includes("code")&&o(n.code,"Missing authorization code in authentication response"),r.includes("id_token")&&o(n.id_token,"Missing id_token in authentication response"),r.includes("token")&&(o(n.access_token,"Missing access_token in authentication response"),o(n.token_type,"Missing token_type in authentication response")),t}static exchangeAuthorizationCode(t){let{rp:e,params:n,request:i}=t,s=n.code;if(!s||"code"!==i.response_type)return Promise.resolve(t);let{provider:a,registration:f}=e,h=f.client_id,d=f.client_secret;if(!d)return Promise.reject(new Error("Client cannot exchange authorization code because it is not a confidential client"));let v=a.configuration.token_endpoint,y=new c({"Content-Type":"application/x-www-form-urlencoded"}),g={grant_type:"authorization_code",code:s,redirect_uri:i.redirect_uri},m=f.token_endpoint_auth_method||"client_secret_basic";if("client_secret_basic"===m){let t=new r(`${h}:${d}`).toString("base64");y.set("Authorization",`Basic ${t}`)}"client_secret_post"===m&&(g.client_id=h,g.client_secret=d);let w=l.encode(g);return u(v,{method:"POST",headers:y,body:w}).then(p("Error exchanging authorization code")).then(t=>t.json()).then(e=>(o(e.access_token,"Missing access_token in token response"),o(e.token_type,"Missing token_type in token response"),o(e.id_token,"Missing id_token in token response"),t.params=Object.assign(t.params,e),t))}static validateIDToken(t){return t.params.id_token?Promise.resolve(t).then(v.decryptIDToken).then(v.decodeIDToken).then(v.validateIssuer).then(v.validateAudience).then(v.resolveKeys).then(v.verifySignature).then(v.validateExpires).then(v.verifyNonce).then(v.validateAcr).then(v.validateAuthTime).then(v.validateAccessTokenHash).then(v.validateAuthorizationCodeHash):Promise.resolve(t)}static decryptIDToken(t){return Promise.resolve(t)}static decodeIDToken(t){let e=t.params.id_token;try{t.decoded=f.decode(e)}catch(t){const n=new d(400,"Error decoding ID Token");throw n.cause=t,n.info={id_token:e},n}return t}static validateIssuer(t){let e=t.rp.provider.configuration;if(t.decoded.payload.iss!==e.issuer)throw new Error("Mismatching issuer in ID Token");return t}static validateAudience(t){let e=t.rp.registration,{aud:n,azp:r}=t.decoded.payload;if("string"==typeof n&&n!==e.client_id)throw new Error("Mismatching audience in id_token");if(Array.isArray(n)&&!n.includes(e.client_id))throw new Error("Mismatching audience in id_token");if(Array.isArray(n)&&!r)throw new Error("Missing azp claim in id_token");if(r&&r!==e.client_id)throw new Error("Mismatching azp claim in id_token");return t}static resolveKeys(t){let e=t.rp,n=e.provider,r=t.decoded;return Promise.resolve(n.jwks).then(t=>t||e.jwks()).then(e=>{if(r.resolveKeys(e))return Promise.resolve(t);throw new Error("Cannot resolve signing key for ID Token")})}static verifySignature(t){let e=t.decoded.header.alg,n=t.rp.registration.id_token_signed_response_alg||"RS256";if(e!==n)throw new Error(`Expected ID Token to be signed with ${n}`);return t.decoded.verify().then(e=>{if(!e)throw new Error("Invalid ID Token signature");return t})}static validateExpires(t){if(t.decoded.payload.exp<=Math.floor(Date.now()/1e3))throw new Error("Expired ID Token");return t}static verifyNonce(t){let e=new Uint8Array(t.request.nonce),n=t.decoded.payload.nonce;if(!n)throw new Error("Missing nonce in ID Token");return s.subtle.digest({name:"SHA-256"},e).then(e=>{if(n!==a(r.from(e)))throw new Error("Mismatching nonce in ID Token");return t})}static validateAcr(t){return t}static validateAuthTime(t){return t}static validateAccessTokenHash(t){return t}static validateAuthorizationCodeHash(t){return t}}t.exports=v}).call(this,n(21),n(41).Buffer)},function(t,e,n){const{JWT:r}=n(37),i=n(72);t.exports=class extends r{static get schema(){return i}}},function(t,e,n){const{JWTSchema:r}=n(37),i=r.extend({properties:{header:{},payload:{properties:{iss:{type:"string",format:"url"},sub:{type:"string",maxLength:255},auth_time:{type:"integer",format:"NumericDate"},nonce:{type:"string"},acr:{type:"string"},amr:{type:"array",items:{type:"string"}},azp:{type:"string",format:"StringOrURI"}},required:["iss","sub","aud","exp","iat"]}}});t.exports=i},function(t,e,n){"use strict";const r=n(6),i=n(74),o=n(75);class s{constructor(t){this.credentialType=t.credentialType||"access_token",this.issuer=t.issuer,this.authorization=t.authorization||{},this.sessionKey=t.sessionKey,this.idClaims=t.idClaims,this.accessClaims=t.accessClaims}static from(t){return new s(t)}static fromAuthResponse(t){const e=n(20);let r=t.decoded&&t.decoded.payload||{},{rp:i}=t,o=i.registration,a={credentialType:(i.defaults.authenticate||{}).credential_type||i.defaults.popToken?"pop_token":"access_token",sessionKey:t.session[e.SESSION_PRIVATE_KEY],issuer:r.iss,idClaims:r,authorization:{client_id:o.client_id,access_token:t.params.access_token,id_token:t.params.id_token,refresh_token:t.params.refresh_token}};return s.from(a)}get fetch(){return(t,e)=>Promise.resolve().then(()=>this.hasCredentials()?this.fetchWithCredentials(t,e):r(t,e)).then(i("Error while fetching resource"))}bearerTokenFor(t){switch(this.credentialType){case"pop_token":return o.issueFor(t,this);default:return Promise.resolve(this.authorization[this.credentialType])}}hasCredentials(){switch(this.credentialType){case"pop_token":return!!this.authorization.id_token;default:return!!this.authorization[this.credentialType]}}fetchWithCredentials(t,e={}){return e.headers=e.headers||{},this.bearerTokenFor(t).then(n=>(e.headers.authorization=`Bearer ${n}`,r(t,e)))}}t.exports=s},function(t,e,n){"use strict";t.exports=function(t="fetch error"){return e=>{if(e.status>=200&&e.status<300)return e;let n=`${t}: ${e.status} ${e.statusText}`,r=new Error(n);throw r.response=e,r.statusCode=e.status,r}}},function(t,e,n){"use strict";const{URL:r}=n(27),{JWT:i,JWK:o}=n(37),s=3600;class a extends i{static issueFor(t,e){if(!t)throw new Error("Cannot issue PoPToken - missing resource server URI");if(!e.sessionKey)throw new Error("Cannot issue PoPToken - missing session key");if(!e.authorization.id_token)throw new Error("Cannot issue PoPToken - missing id token");let n=JSON.parse(e.sessionKey);return o.importKey(n).then(n=>{let i={aud:new r(t).origin,key:n,iss:e.authorization.client_id,id_token:e.authorization.id_token};return a.issue(i)}).then(t=>t.encode())}static issue(t){let{aud:e,iss:n,key:r}=t,i=r.alg,o=t.iat||Math.floor(Date.now()/1e3),u={alg:i},c={iss:n,aud:e,exp:o+(t.max||s),iat:o,id_token:t.id_token,token_type:"pop"};return new a({header:u,payload:c,key:r.cryptoKey},{filter:!1})}}t.exports=a},function(t,e,n){e=t.exports=s;var r=n(77),i=n(78),o=e;function s(t,e,n){if("string"==typeof t&&(t=o[t]),"number"!=typeof t)throw new TypeError("Non-numeric HTTP code");"object"==typeof e&&null!=e&&(n=e,e=null),r.call(this,e||i[t],n),this.code=t}for(var a in s.prototype=Object.create(r.prototype,{constructor:{value:s,configurable:!0,writable:!0}}),s.prototype.name="HttpError",Object.defineProperties(s.prototype,{statusCode:u("code"),statusMessage:u("message"),status:{configurable:!0,get:function(){return this.code},set:function(t){Object.defineProperty(this,"status",{value:t,configurable:!0,enumerable:!0,writable:!0})}}}),s.prototype.toString=function(){return this.name+": "+this.code+" "+this.message},i){e[i[a].replace("'","").replace(/[- ]/g,"_").toUpperCase()]=+a}function u(t){return{configurable:!0,get:function(){return this[t]},set:function(e){return this[t]=e}}}},function(t,e){var n=Object.hasOwnProperty,r=Object.getPrototypeOf,i=Error.captureStackTrace;function o(t,e){if(t&&"object"==typeof t?(e=t,t=void 0):this.message=t,e)for(var o in e)this[o]=e[o];n.call(this,"name")||(this.name=n.call(r(this),"name")?this.name:this.constructor.name),!i||"stack"in this||i(this,this.constructor)}t.exports=o,o.prototype=Object.create(Error.prototype,{constructor:{value:o,configurable:!0,writable:!0}}),o.prototype.name="StandardError"},function(t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){const{JSONSchema:r}=n(28),i=new r({type:"object",properties:{provider:{type:"object",properties:{name:{type:"string"},url:{type:"string",format:"uri"},configuration:{},jwks:{}},required:["url"]},defaults:{type:"object",properties:{popToken:{type:"boolean",default:!1},authenticate:{type:"object",properties:{redirect_uri:{type:"string",format:"uri"},response_type:{type:"string",default:"id_token token",enum:["code","token","id_token token","id_token token code"]},display:{type:"string",default:"page",enum:["page","popup"]},scope:{type:["string","array"],default:["openid"]}}},register:{}}},registration:{},store:{type:"object",default:{}}}});t.exports=i},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(27).URL,o=n(37),s=o.JWT,a=o.JWK,u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),r(e,null,[{key:"issueFor",value:function(t,n){if(!t)throw new Error("Cannot issue PoPToken - missing resource server URI");if(!n.sessionKey)throw new Error("Cannot issue PoPToken - missing session key");if(!n.authorization.id_token)throw new Error("Cannot issue PoPToken - missing id token");var r=JSON.parse(n.sessionKey);return a.importKey(r).then(function(r){var o={aud:new i(t).origin,key:r,iss:n.authorization.client_id,id_token:n.authorization.id_token};return e.issue(o)}).then(function(t){return t.encode()})}},{key:"issue",value:function(t){var n=t.aud,r=t.iss,i=t.key,o=i.alg,s=t.iat||Math.floor(Date.now()/1e3);return new e({header:{alg:o},payload:{iss:r,aud:n,exp:s+(t.max||3600),iat:s,id_token:t.id_token,token_type:"pop"},key:i.cryptoKey},{filter:!1})}}]),e}();t.exports=u},function(t,e,n){"use strict";n.r(e),n.d(e,"openIdpPopup",function(){return o}),n.d(e,"obtainSession",function(){return s}),n.d(e,"popupHandler",function(){return a});var r=n(11),i=n(7);function o(t){const e=`width=650,height=400,left=${window.screenX+(window.innerWidth-650)/2},top=${window.screenY+(window.innerHeight-400)/2}`;return window.open(t,"solid-auth-client",e)}function s(t,e,n){return new Promise((o,s)=>{const u=new r.Server(e,Object(i.originOf)(n.popupUri||""),a(t,n,t=>{u.stop(),o(t)}));u.start()})}function a(t,{popupUri:e,callbackUri:n},r){return async(i,...o)=>{switch(i){case"getAppOrigin":return window.location.origin;case"storage/getItem":return t.getItem(...o);case"storage/setItem":return t.setItem(...o);case"storage/removeItem":return t.removeItem(...o);case"getLoginOptions":return{popupUri:e,callbackUri:n};case"foundSession":r(...o)}}}}]).default},function(t,e,n){"use strict";var r={BlankNode:n(6),Collection:n(17),convert:n(40),DataFactory:n(20),Empty:n(84),Fetcher:n(32),Formula:n(57),Store:n(15),jsonParser:n(85),Literal:n(12),log:n(10),N3Parser:n(24),NamedNode:n(0),Namespace:n(16),Node:n(1),parse:n(58),Query:n(23).Query,queryToSPARQL:n(86),RDFaProcessor:n(35),RDFParser:n(36),serialize:n(33),Serializer:n(34),SPARQLToQuery:n(87),sparqlUpdateParser:n(59),Statement:n(21),term:n(1).fromValue,UpdateManager:n(88),UpdatesSocket:n(60).UpdatesSocket,UpdatesVia:n(60).UpdatesVia,uri:n(2),Util:n(4),Variable:n(22)};r.IndexedFormula=r.Store,r.NextId=r.BlankNode.nextId,r.fromNT=r.Formula.prototype.fromNT,r.fetcher=r.DataFactory.fetcher,r.graph=r.DataFactory.graph,r.lit=r.DataFactory.lit,r.st=r.DataFactory.st,r.sym=r.DataFactory.namedNode,r.variable=r.DataFactory.variable,r.blankNode=r.DataFactory.blankNode,r.defaultGraph=r.DataFactory.defaultGraph,r.literal=r.DataFactory.literal,r.namedNode=r.DataFactory.namedNode,r.quad=r.DataFactory.quad,r.triple=r.DataFactory.triple,t.exports=r},function(t,e,n){"use strict";var r=n(0),i=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};i.boolean=new r("http://www.w3.org/2001/XMLSchema#boolean"),i.dateTime=new r("http://www.w3.org/2001/XMLSchema#dateTime"),i.decimal=new r("http://www.w3.org/2001/XMLSchema#decimal"),i.double=new r("http://www.w3.org/2001/XMLSchema#double"),i.integer=new r("http://www.w3.org/2001/XMLSchema#integer"),i.langString=new r("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.string=new r("http://www.w3.org/2001/XMLSchema#string"),t.exports=i},function(t,e,n){"use strict";t.exports.convertToJson=function(t,e){var n,s=o.Parser(),a=o.Writer({format:"N-Quads"});r.waterfall([function(e){s.parse(t,e)},function(t,e,n){null!==t&&a.addTriple(t),"function"==typeof n&&a.end(n)},function(t,e){try{i.fromRDF(t,{format:"application/nquads"},e)}catch(t){e(t)}},function(t,r){n=JSON.stringify(t),e(null,n)}],function(t,r){e(t,n)})},t.exports.convertToNQuads=function(t,e){var n,i=o.Parser(),s=o.Writer({format:"N-Quads"});r.waterfall([function(e){i.parse(t,e)},function(t,e,n){null!==t&&s.addTriple(t),"function"==typeof n&&s.end(n)},function(t,r){e(null,n=t)}],function(t,r){e(t,n)})};var r=n(63),i=n(41),o=n(43)},function(t,e,n){(function(r,i,o,s){var a;!function(){var u=void 0!==r&&r.versions&&r.versions.node,c=!u&&("undefined"!=typeof window||"undefined"!=typeof self);c&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$));var l=function(t){function e(){}t.compact=function(e,n,r,i){if(arguments.length<2)return t.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof r&&(i=r,r={}),r=r||{},null===n)return t.nextTick(function(){i(new I("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===e)return t.nextTick(function(){i(null,null)});"base"in r||(r.base="string"==typeof e?e:""),"compactArrays"in r||(r.compactArrays=!0),"graph"in r||(r.graph=!1),"skipExpansion"in r||(r.skipExpansion=!1),"documentLoader"in r||(r.documentLoader=t.loadDocument),"link"in r||(r.link=!1),r.link&&(r.skipExpansion=!0);!function(e,n,r){if(n.skipExpansion)return t.nextTick(function(){r(null,e)});t.expand(e,n,r)}(e,r,function(e,o){if(e)return i(new I("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var s=tt(r);t.processContext(s,n,r,function(t,e){if(t)return i(new I("Could not process context before compaction.","jsonld.CompactError",{cause:t}));var s;try{s=(new j).compact(e,null,o,r)}catch(t){return i(t)}!function(t,e,r,o){if(t)return i(t);o.compactArrays&&!o.graph&&rt(e)?1===e.length?e=e[0]:0===e.length&&(e={}):o.graph&&nt(e)&&(e=[e]);nt(n)&&"@context"in n&&(n=n["@context"]);rt(n=vt(n))||(n=[n]);var s=n;n=[];for(var a=0;a<s.length;++a)(!nt(s[a])||Object.keys(s[a]).length>0)&&n.push(s[a]);var u=n.length>0;1===n.length&&(n=n[0]);if(rt(e)){var c=G(r,"@graph"),l=e;e={},u&&(e["@context"]=n),e[c]=l}else if(nt(e)&&u){var l=e;for(var f in e={"@context":n},l)e[f]=l[f]}i(null,e,r)}(null,s,e,r)})})},t.expand=function(e,n,r){if(arguments.length<1)return t.nextTick(function(){r(new TypeError("Could not expand, too few arguments."))});function i(t){"base"in n||(n.base=t.documentUrl||"");var e={document:vt(t.document),remoteContext:{"@context":t.contextUrl}};if("expandContext"in n){var i=vt(n.expandContext);e.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}gt(e,n,function(t,e){if(t)return r(t);var i;try{var o=new j,s=tt(n),a=e.document,u=e.remoteContext["@context"];e.expandContext&&(s=o.processContext(s,e.expandContext["@context"],n)),u&&(s=o.processContext(s,u,n)),nt(i=o.expand(s,null,a,n,!1))&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),rt(i)||(i=[i])}catch(t){return r(t)}r(null,i)})}"function"==typeof n&&(r=n,n={}),"documentLoader"in(n=n||{})||(n.documentLoader=t.loadDocument),"keepFreeFloatingNodes"in n||(n.keepFreeFloatingNodes=!1),t.nextTick(function(){if("string"!=typeof e)i({contextUrl:null,documentUrl:null,document:e});else{var t=function(t,e){if(t)return r(t);try{if(!e.document)throw new I("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof e.document&&(e.document=JSON.parse(e.document))}catch(t){return r(new I("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:t,remoteDoc:e}))}i(e)},o=n.documentLoader(e,t);o&&"then"in o&&o.then(t.bind(null,null),t)}})},t.flatten=function(e,n,r,i){if(arguments.length<1)return t.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))});"function"==typeof r?(i=r,r={}):"function"==typeof n&&(i=n,n=null,r={}),"base"in(r=r||{})||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),t.expand(e,r,function(e,o){if(e)return i(new I("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));var s;try{s=(new j).flatten(o)}catch(t){return i(t)}if(null===n)return i(null,s);r.graph=!0,r.skipExpansion=!0,t.compact(s,n,r,function(t,e){if(t)return i(new I("Could not compact flattened output.","jsonld.FlattenError",{cause:t}));i(null,e)})})},t.frame=function(e,n,r,i){if(arguments.length<2)return t.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))});function o(n){var o,s=n.document;s?(o=s["@context"],n.contextUrl?(o?rt(o)?o.push(n.contextUrl):o=[o,n.contextUrl]:o=n.contextUrl,s["@context"]=o):o=o||{}):o={},t.expand(e,r,function(e,n){if(e)return i(new I("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var a=vt(r);a.isFrame=!0,a.keepFreeFloatingNodes=!0,t.expand(s,a,function(e,r){if(e)return i(new I("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));var s;try{s=(new j).frame(n,r,a)}catch(t){return i(t)}a.graph=!0,a.skipExpansion=!0,a.link={},t.compact(s,o,a,function(e,n,r){if(e)return i(new I("Could not compact framed output.","jsonld.FrameError",{cause:e}));var o=G(r,"@graph");a.link={},n[o]=function e(n,r,i){if(rt(r)){for(var o=[],s=0;s<r.length;++s){var a=e(n,r[s],i);null!==a&&o.push(a)}r=o}else if(nt(r)){if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(ft(r))return r;if(ht(r))return r["@list"]=e(n,r["@list"],i),r;var u=G(n,"@id");if(u in r){var c=r[u];if(c in i.link){var l=i.link[c].indexOf(r);if(-1!==l)return i.link[c][l];i.link[c].push(r)}else i.link[c]=[r]}for(var f in r){var a=e(n,r[f],i),h=t.getContextValue(n,f,"@container");i.compactArrays&&rt(a)&&1===a.length&&null===h&&(a=a[0]),r[f]=a}}return r}(r,n[o],a),i(null,n)})})})}"function"==typeof r&&(i=r,r={}),"base"in(r=r||{})||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),"embed"in r||(r.embed="@last"),r.explicit=r.explicit||!1,"requireAll"in r||(r.requireAll=!0),r.omitDefault=r.omitDefault||!1,t.nextTick(function(){if("string"!=typeof n)o({contextUrl:null,documentUrl:null,document:n});else{var t=function(t,e){if(t)return i(t);try{if(!e.document)throw new I("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof e.document&&(e.document=JSON.parse(e.document))}catch(t){return i(new I("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:t,remoteDoc:e}))}o(e)},e=r.documentLoader(n,t);e&&"then"in e&&e.then(t.bind(null,null),t)}})},t.link=function(e,n,r,i){var o={};n&&(o["@context"]=n),o["@embed"]="@link",t.frame(e,o,r,i)},t.objectify=function(e,n,r,i){"function"==typeof r&&(i=r,r={}),"base"in(r=r||{})||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),t.expand(e,r,function(e,o){if(e)return i(new I("Could not expand input before linking.","jsonld.LinkError",{cause:e}));var s;try{s=(new j).flatten(o)}catch(t){return i(t)}r.graph=!0,r.skipExpansion=!0,t.compact(s,n,r,function(e,n,r){if(e)return i(new I("Could not compact flattened output before linking.","jsonld.LinkError",{cause:e}));var o=n[G(r,"@graph")][0],s=function(e){if(nt(e)||rt(e)){if(nt(e)){if(s.visited[e["@id"]])return;s.visited[e["@id"]]=!0}for(var n in e){var i=e[n],a="@id"===t.getContextValue(r,n,"@type");if(rt(i)||nt(i)||a)if(ot(i)&&a)e[n]=i=o[i],s(i);else if(rt(i))for(var u=0;u<i.length;++u)ot(i[u])&&a?i[u]=o[i[u]]:nt(i[u])&&"@id"in i[u]&&(i[u]=o[i[u]["@id"]]),s(i[u]);else if(nt(i)){var c=i["@id"];e[n]=i=o[c],s(i)}}}};for(var a in s.visited={},s(o),n.of_type={},o)if("@type"in o[a]){var u=o[a]["@type"];rt(u)||(u=[u]);for(var c=0;c<u.length;++c)u[c]in n.of_type||(n.of_type[u[c]]=[]),n.of_type[u[c]].push(o[a])}i(null,n)})})},t.normalize=function(e,n,r){if(arguments.length<1)return t.nextTick(function(){r(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof n&&(r=n,n={}),"algorithm"in(n=n||{})||(n.algorithm="URGNA2012"),"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),"inputFormat"in n){if("application/nquads"!==n.inputFormat)return r(new I("Unknown normalization input format.","jsonld.NormalizeError"));var i=mt(e);(new j).normalize(i,n,r)}else{var o=vt(n);delete o.format,o.produceGeneralizedRdf=!1,t.toRDF(e,o,function(t,e){if(t)return r(new I("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:t}));(new j).normalize(e,n,r)})}},t.fromRDF=function(e,n,r){if(arguments.length<1)return t.nextTick(function(){r(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof n&&(r=n,n={}),"useRdfType"in(n=n||{})||(n.useRdfType=!1),"useNativeTypes"in n||(n.useNativeTypes=!1),"format"in n||!ot(e)||"format"in n||(n.format="application/nquads"),t.nextTick(function(){var t;if(n.format){if(!(t=n.rdfParser||h[n.format]))return r(new I("Unknown input format.","jsonld.UnknownFormat",{format:n.format}))}else t=function(){return e};var i=!1;try{e=t(e,function(t,e){if(i=!0,t)return r(t);o(e,n,r)})}catch(t){if(!i)return r(t);throw t}if(e){if("then"in e)return e.then(function(t){o(t,n,r)},r);o(e,n,r)}function o(t,e,n){(new j).fromRDF(t,e,n)}})},t.toRDF=function(e,n,r){if(arguments.length<1)return t.nextTick(function(){r(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof n&&(r=n,n={}),"base"in(n=n||{})||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),t.expand(e,n,function(t,e){if(t)return r(new I("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:t}));var i;try{if(i=j.prototype.toRDF(e,n),n.format){if("application/nquads"===n.format)return r(null,function(t){var e=[];for(var n in t)for(var r=t[n],i=0;i<r.length;++i){var o=r[i];"@default"===n&&(n=null),e.push(wt(o,n))}return e.sort().join("")}(i));throw new I("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}}catch(t){return r(t)}r(null,i)})},t.createNodeMap=function(e,n,r){if(arguments.length<1)return t.nextTick(function(){r(new TypeError("Could not create node map, too few arguments."))});"function"==typeof n&&(r=n,n={}),"base"in(n=n||{})||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),t.expand(e,n,function(t,e){if(t)return r(new I("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:t}));var i;try{i=(new j).createNodeMap(e,n)}catch(t){return r(t)}r(null,i)})},t.merge=function(e,n,r,i){if(arguments.length<1)return t.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!rt(e))return t.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof r?(i=r,r={}):"function"==typeof n&&(i=n,n=null,r={}),r=r||{};for(var o=[],s=null,a=e.length,u=0;u<e.length;++u){var c={};for(var l in r)c[l]=r[l];t.expand(e[u],c,f)}function f(e,u){if(!s){if(e)return s=e,i(new I("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));o.push(u),0==--a&&function(e){var o=!0;"mergeNodes"in r&&(o=r.mergeNodes);var s,a=r.namer||r.issuer||new bt("_:b"),u={"@default":{}};try{for(var c=0;c<e.length;++c){var l=e[c];l=t.relabelBlankNodes(l,{issuer:new bt("_:b"+c+"-")});var f=o||0===c?u:{"@default":{}};if(z(l,f,"@default",a),f!==u)for(var h in f){var p=f[h];if(h in u){var d=u[h];for(var v in p)v in d||(d[v]=p[v])}else u[h]=p}}s=H(u)}catch(t){return i(t)}for(var y=[],g=Object.keys(s).sort(),m=0;m<g.length;++m){var w=s[g[m]];lt(w)||y.push(w)}if(null===n)return i(null,y);r.graph=!0,r.skipExpansion=!0,t.compact(y,n,r,function(t,e){if(t)return i(new I("Could not compact merged output.","jsonld.MergeError",{cause:t}));i(null,e)})}(o)}}},t.relabelBlankNodes=function(t,e){return function t(e,n){if(rt(n))for(var r=0;r<n.length;++r)n[r]=t(e,n[r]);else if(ht(n))n["@list"]=t(e,n["@list"]);else if(nt(n)){pt(n)&&(n["@id"]=e.getId(n["@id"]));for(var i=Object.keys(n).sort(),o=0;o<i.length;++o){var s=i[o];"@id"!==s&&(n[s]=t(e,n[s]))}}return n}((e=e||{}).namer||e.issuer||new bt("_:b"),t)},t.prependBase=function(e,n){return function(e,n){if(null===e)return n;if(-1!==n.indexOf(":"))return n;ot(e)&&(e=t.url.parse(e||""));var r=t.url.parse(n),i={protocol:e.protocol||""};if(null!==r.authority)i.authority=r.authority,i.path=r.path,i.query=r.query;else if(i.authority=e.authority,""===r.path)i.path=e.path,null!==r.query?i.query=r.query:i.query=e.query;else{if(0===r.path.indexOf("/"))i.path=r.path;else{var o=e.path;""!==r.path&&((o=o.substr(0,o.lastIndexOf("/")+1)).length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=r.path),i.path=o}i.query=r.query}i.path=Et(i.path,!!i.authority);var s=i.protocol;null!==i.authority&&(s+="//"+i.authority);s+=i.path,null!==i.query&&(s+="?"+i.query);null!==r.fragment&&(s+="#"+r.fragment);""===s&&(s="./");return s}(e,n)},t.documentLoader=function(e,n){var r=new I("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return u?n(r,{contextUrl:null,documentUrl:e,document:null}):t.promisify(function(t){t(r)})},t.loadDocument=function(e,n){var r=t.documentLoader(e,n);r&&"then"in r&&r.then(n.bind(null,null),n)},t.promises=function(e){e=e||{};var r=Array.prototype.slice,o=t.promisify,s=e.api||{},a=e.version||"jsonld.js";"string"==typeof e.api&&(e.version||(a=e.api),s={}),s.expand=function(e){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[t.expand].concat(r.call(arguments)))},s.compact=function(e,n){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");return o.apply(null,[function(e,n,r,i){"function"==typeof r&&(i=r,r={}),r=r||{},t.compact(e,n,r,function(t,e){i(t,e)})}].concat(r.call(arguments)))},s.flatten=function(e){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[t.flatten].concat(r.call(arguments)))},s.frame=function(e,n){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[t.frame].concat(r.call(arguments)))},s.fromRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[t.fromRDF].concat(r.call(arguments)))},s.toRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[t.toRDF].concat(r.call(arguments)))},s.normalize=function(e){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[t.normalize].concat(r.call(arguments)))},"jsonld.js"===a&&(s.link=function(e,n){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[t.link].concat(r.call(arguments)))},s.objectify=function(e){return o.apply(null,[t.objectify].concat(r.call(arguments)))},s.createNodeMap=function(e){return o.apply(null,[t.createNodeMap].concat(r.call(arguments)))},s.merge=function(e){return o.apply(null,[t.merge].concat(r.call(arguments)))});try{t.Promise=i.Promise||n(42).Promise}catch(t){var u=function(){throw new Error("Unable to find a Promise implementation.")};for(var c in s)s[c]=u}return s},t.promisify=function(e){if(!t.Promise)try{t.Promise=i.Promise||n(42).Promise}catch(t){throw new Error("Unable to find a Promise implementation.")}var r=Array.prototype.slice.call(arguments,1);return new t.Promise(function(t,n){e.apply(null,r.concat(function(e,r){e?n(e):t(r)}))})},t.promises({api:t.promises}),e.prototype=t.promises({version:"json-ld-1.0"}),e.prototype.toString=function(){return this instanceof e?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},t.JsonLdProcessor=e;var a=!!Object.defineProperty;if(a)try{Object.defineProperty({},"x",{})}catch(t){a=!1}a&&(Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e})),c&&void 0===i.JsonLdProcessor&&(a?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e}):i.JsonLdProcessor=e);var l="function"==typeof o&&o,f=l?function(t){l(t)}:function(t){setTimeout(t,0)};"object"==typeof r&&"function"==typeof r.nextTick?t.nextTick=r.nextTick:t.nextTick=f,t.setImmediate=l?f:t.nextTick,t.parseLinkHeader=function(t){for(var e={},n=t.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<n.length;++i){var o=n[i].match(r);if(o){for(var s={target:o[1]},a=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(a);)s[o[1]]=void 0===o[2]?o[3]:o[2];var c=s.rel||"";rt(e[c])?e[c].push(s):e[c]=c in e?[e[c],s]:s}}return e},t.RequestQueue=function(){this._requests={}},t.RequestQueue.prototype.wrapLoader=function(t){return this._loader=t,this._usePromise=1===t.length,this.add.bind(this)},t.RequestQueue.prototype.add=function(e,n){var r=this;if(!n&&!r._usePromise)throw new Error("callback must be specified.");if(r._usePromise)return new t.Promise(function(t,n){var i=r._requests[e];i||(i=r._requests[e]=r._loader(e).then(function(t){return delete r._requests[e],t}).catch(function(t){throw delete r._requests[e],t})),i.then(function(e){t(e)}).catch(function(t){n(t)})});e in r._requests?r._requests[e].push(n):(r._requests[e]=[n],r._loader(e,function(t,n){var i=r._requests[e];delete r._requests[e];for(var o=0;o<i.length;++o)i[o](t,n)}))},t.DocumentCache=function(t){this.order=[],this.cache={},this.size=t||50,this.expires=3e4},t.DocumentCache.prototype.get=function(t){if(t in this.cache){var e=this.cache[t];if(e.expires>=+new Date)return e.ctx;delete this.cache[t],this.order.splice(this.order.indexOf(t),1)}return null},t.DocumentCache.prototype.set=function(t,e){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(t),this.cache[t]={ctx:e,expires:+new Date+this.expires}},t.ActiveContextCache=function(t){this.order=[],this.cache={},this.size=t||100},t.ActiveContextCache.prototype.get=function(t,e){var n=JSON.stringify(t),r=JSON.stringify(e),i=this.cache[n];return i&&r in i?i[r]:null},t.ActiveContextCache.prototype.set=function(t,e,n){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var i=JSON.stringify(t),o=JSON.stringify(e);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=vt(n)},t.cache={activeCtx:new t.ActiveContextCache},t.documentLoaders={},t.documentLoaders.jquery=function(e,n){n=n||{};var r=new t.RequestQueue;return("usePromise"in n?n.usePromise:"undefined"!=typeof Promise)?r.wrapLoader(function(e){return t.promisify(i,e)}):r.wrapLoader(i);function i(r,i){return 0!==r.indexOf("http:")&&0!==r.indexOf("https:")?i(new I('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null}):n.secure&&0!==r.indexOf("https")?i(new I('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null}):void e.ajax({url:r,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(e,n,o){var s={contextUrl:null,documentUrl:r,document:e},a=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==a){if(rt(u=t.parseLinkHeader(u)[A]))return i(new I("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),s);u&&(s.contextUrl=u.target)}i(null,s)},error:function(t,e,n){i(new I("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:n}),{contextUrl:null,documentUrl:r,document:null})}})}},t.documentLoaders.node=function(e){var r=!("strictSSL"in(e=e||{}))||e.strictSSL,i="maxRedirects"in e?e.maxRedirects:-1,o="request"in e?e.request:n(7),s="application/ld+json, application/json",a=n(7),u=new t.RequestQueue;if(e.usePromise)return u.wrapLoader(function(e){return t.promisify(l,e,[])});var c=e.headers||{};if("Accept"in c||"accept"in c)throw new RangeError('Accept header may not be specified as an option; only "'+s+'" is supported.');return u.wrapLoader(function(t,e){l(t,[],e)});function l(n,u,c){if(0!==n.indexOf("http:")&&0!==n.indexOf("https:"))return c(new I('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null});if(e.secure&&0!==n.indexOf("https"))return c(new I('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null});var f=null;if(null!==f)return c(null,f);var h={Accept:s};for(var p in e.headers)h[p]=e.headers[p];o({url:n,headers:h,strictSSL:r,followRedirect:!1},function(e,r,o){if(f={contextUrl:null,documentUrl:n,document:o||null},e)return c(new I("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:e}),f);var s=a.STATUS_CODES[r.statusCode];if(r.statusCode>=400)return c(new I("URL could not be dereferenced: "+s,"jsonld.InvalidUrl",{code:"loading document failed",url:n,httpStatusCode:r.statusCode}),f);if(r.headers.link&&"application/ld+json"!==r.headers["content-type"]){var h=t.parseLinkHeader(r.headers.link)[A];if(rt(h))return c(new I("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),f);h&&(f.contextUrl=h.target)}if(r.statusCode>=300&&r.statusCode<400&&r.headers.location)return u.length===i?c(new I("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:n,httpStatusCode:r.statusCode,redirects:u}),f):-1!==u.indexOf(n)?c(new I("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:n,httpStatusCode:r.statusCode,redirects:u}),f):(u.push(n),l(r.headers.location,u,c));u.push(n),c(e,f)})}},t.documentLoaders.xhr=function(e){e=e||{};var n=/(^|(\r\n))link:/i,r=new t.RequestQueue;return("usePromise"in e?e.usePromise:"undefined"!=typeof Promise)?r.wrapLoader(function(e){return t.promisify(i,e)}):r.wrapLoader(i);function i(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new I('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(e.secure&&0!==r.indexOf("https"))return i(new I('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=new(e.xhr||XMLHttpRequest);o.onload=function(){if(o.status>=400)return i(new I("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:o.status}),{contextUrl:null,documentUrl:r,document:null});var e,s={contextUrl:null,documentUrl:r,document:o.response},a=o.getResponseHeader("Content-Type");if(n.test(o.getAllResponseHeaders())&&(e=o.getResponseHeader("Link")),e&&"application/ld+json"!==a){if(rt(e=t.parseLinkHeader(e)[A]))return i(new I("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),s);e&&(s.contextUrl=e.target)}i(null,s)},o.onerror=function(){i(new I("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},o.open("GET",r,!0),o.setRequestHeader("Accept","application/ld+json, application/json"),o.send()}},t.useDocumentLoader=function(e){if(!(e in t.documentLoaders))throw new I('Unknown document loader type: "'+e+'"',"jsonld.UnknownDocumentLoader",{type:e});t.documentLoader=t.documentLoaders[e].apply(t,Array.prototype.slice.call(arguments,1))},t.processContext=function(e,n){var r={},i=2;arguments.length>3&&(r=arguments[2]||{},i+=1);var o=arguments[i];if("base"in r||(r.base=""),"documentLoader"in r||(r.documentLoader=t.loadDocument),null===n)return o(null,tt(r));nt(n=vt(n))&&"@context"in n||(n={"@context":n}),gt(n,r,function(t,n){if(t)return o(t);try{n=(new j).processContext(e,n,r)}catch(t){return o(t)}o(null,n)})},t.hasProperty=function(t,e){var n=!1;if(e in t){var r=t[e];n=!rt(r)||r.length>0}return n},t.hasValue=function(e,n,r){var i=!1;if(t.hasProperty(e,n)){var o=e[n],s=ht(o);if(rt(o)||s){s&&(o=o["@list"]);for(var a=0;a<o.length;++a)if(t.compareValues(r,o[a])){i=!0;break}}else rt(r)||(i=t.compareValues(r,o))}return i},t.addValue=function(e,n,r,i){if("propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),rt(r)){0!==r.length||!i.propertyIsArray||n in e||(e[n]=[]);for(var o=0;o<r.length;++o)t.addValue(e,n,r[o],i)}else if(n in e){var s=!i.allowDuplicate&&t.hasValue(e,n,r);rt(e[n])||s&&!i.propertyIsArray||(e[n]=[e[n]]),s||e[n].push(r)}else e[n]=i.propertyIsArray?[r]:r},t.getValues=function(t,e){var n=t[e]||[];return rt(n)||(n=[n]),n},t.removeProperty=function(t,e){delete t[e]},t.removeValue=function(e,n,r,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1);var o=t.getValues(e,n).filter(function(e){return!t.compareValues(e,r)});0===o.length?t.removeProperty(e,n):1!==o.length||i.propertyIsArray?e[n]=o:e[n]=o[0]},t.compareValues=function(t,e){return t===e||(!(!ft(t)||!ft(e)||t["@value"]!==e["@value"]||t["@type"]!==e["@type"]||t["@language"]!==e["@language"]||t["@index"]!==e["@index"])||!!(nt(t)&&"@id"in t&&nt(e)&&"@id"in e)&&t["@id"]===e["@id"])},t.getContextValue=function(t,e,n){var r=null;if(null===e)return r;if("@language"===n&&n in t&&(r=t[n]),t.mappings[e]){var i=t.mappings[e];ut(n)?r=i:n in i&&(r=i[n])}return r};var h={};if(t.registerRDFParser=function(t,e){h[t]=e},t.unregisterRDFParser=function(t){delete h[t]},u){if(void 0===p)var p=null;if(void 0===d)var d={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var v="http://www.w3.org/2001/XMLSchema#boolean",y="http://www.w3.org/2001/XMLSchema#double",g="http://www.w3.org/2001/XMLSchema#integer",m="http://www.w3.org/2001/XMLSchema#string",w="http://www.w3.org/1999/02/22-rdf-syntax-ns#",b=w+"first",x=w+"rest",_=w+"nil",S=w+"type",E=w+"PlainLiteral",k=w+"XMLLiteral",T=w+"object",O=w+"langString",A="http://www.w3.org/ns/json-ld#context",R=10,I=function(t,e,n){u?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=e||"jsonld.Error",this.message=t||"An unspecified JSON-LD error occurred.",this.details=n||{}};u?n(7).inherits(I,Error):"undefined"!=typeof Error&&(I.prototype=new Error);var j=function(){};function N(t){for(var e=[],n=Object.keys(t).sort(),r=0;r<n.length;++r){var i=n[r],o=t[i];rt(o)||(o=[o]);for(var s=0;s<o.length;++s){var a=o[s];if(null!==a){if(!ot(a))throw new I("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});e.push({"@value":a,"@language":i.toLowerCase()})}}}return e}function P(t,e,n){for(var r=[],i=Object.keys(t).sort(),o=0;o<i.length;++o)for(var s=i[o],a=t[s],u=Object.keys(a).sort(),c=0;c<u.length;++c){var l=u[c],f=a[l];if("@type"===l)l=S;else if(et(l))continue;for(var h=0;h<f.length;++h){var p=f[h],d={};if(d.type=0===s.indexOf("_:")?"blank node":"IRI",d.value=s,dt(s)){var v={};if(v.type=0===l.indexOf("_:")?"blank node":"IRI",v.value=l,dt(l)&&("blank node"!==v.type||n.produceGeneralizedRdf))if(ht(p))C(p["@list"],e,d,v,r);else{var y=D(p);y&&r.push({subject:d,predicate:v,object:y})}}}}return r}function C(t,e,n,r,i){for(var o={type:"IRI",value:b},s={type:"IRI",value:x},a={type:"IRI",value:_},u=0;u<t.length;++u){var c=t[u],l={type:"blank node",value:e.getId()};i.push({subject:n,predicate:r,object:l}),n=l,r=o;var f=D(c);f&&i.push({subject:n,predicate:r,object:f}),r=s}i.push({subject:n,predicate:r,object:a})}function D(t){var e,n={};if(ft(t)){n.type="literal";var r=t["@value"],i=t["@type"]||null;"boolean"==typeof(e=r)||"[object Boolean]"===Object.prototype.toString.call(e)?(n.value=r.toString(),n.datatype=i||v):at(r)||i===y?(at(r)||(r=parseFloat(r)),n.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),n.datatype=i||y):st(r)?(n.value=r.toFixed(0),n.datatype=i||g):"@language"in t?(n.value=r,n.datatype=i||O,n.language=t["@language"]):(n.value=r,n.datatype=i||m)}else{var o=nt(t)?t["@id"]:t;n.type=0===o.indexOf("_:")?"blank node":"IRI",n.value=o}return"IRI"!==n.type||dt(n.value)?n:null}function U(t,e){if("IRI"===t.type||"blank node"===t.type)return{"@id":t.value};var n,r={"@value":t.value};if(t.language)r["@language"]=t.language;else{var i=t.datatype;if(i||(i=m),e){if(i===v)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(n=r["@value"],!isNaN(parseFloat(n))&&isFinite(n))if(i===g){var o=parseInt(r["@value"],10);o.toFixed(0)===r["@value"]&&(r["@value"]=o)}else i===y&&(r["@value"]=parseFloat(r["@value"]));-1===[v,g,y,m].indexOf(i)&&(r["@type"]=i)}else i!==m&&(r["@type"]=i)}return r}function L(t,e){for(var n=["subject","predicate","object"],r=0;r<n.length;++r){var i=n[r];if(t[i].type!==e[i].type||t[i].value!==e[i].value)return!1}return t.object.language===e.object.language&&t.object.datatype===e.object.datatype}j.prototype.compact=function(e,n,r,i){if(rt(r)){for(var o=[],s=0;s<r.length;++s){var a=this.compact(e,n,r[s],i);null!==a&&o.push(a)}if(i.compactArrays&&1===o.length)null===(_=t.getContextValue(e,n,"@container"))&&(o=o[0]);return o}if(nt(r)){if(i.link&&"@id"in r&&r["@id"]in i.link){var u=i.link[r["@id"]];for(s=0;s<u.length;++s)if(u[s].expanded===r)return u[s].compacted}if(ft(r)||lt(r)){o=function(e,n,r){if(ft(r)){var i=t.getContextValue(e,n,"@type"),o=t.getContextValue(e,n,"@language"),s=t.getContextValue(e,n,"@container"),a="@index"in r&&"@index"!==s;if(!a&&(r["@type"]===i||r["@language"]===o))return r["@value"];var u=Object.keys(r).length,c=1===u||2===u&&"@index"in r&&!a,l="@language"in e,f=ot(r["@value"]),h=e.mappings[n]&&null===e.mappings[n]["@language"];if(c&&(!l||!f||h))return r["@value"];var p={};return a&&(p[G(e,"@index")]=r["@index"]),"@type"in r?p[G(e,"@type")]=G(e,r["@type"],null,{vocab:!0}):"@language"in r&&(p[G(e,"@language")]=r["@language"]),p[G(e,"@value")]=r["@value"],p}var d=Z(e,n,{vocab:!0}),i=t.getContextValue(e,n,"@type"),v=G(e,r["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===d)return v;return(p={})[G(e,"@id")]=v,p}(e,n,r);return i.link&&lt(r)&&(r["@id"]in i.link||(i.link[r["@id"]]=[]),i.link[r["@id"]].push({expanded:r,compacted:o})),o}var c="@reverse"===n;o={};i.link&&"@id"in r&&(r["@id"]in i.link||(i.link[r["@id"]]=[]),i.link[r["@id"]].push({expanded:r,compacted:o}));for(var l=Object.keys(r).sort(),f=0;f<l.length;++f){var h=l[f],p=r[h];if("@id"!==h&&"@type"!==h)if("@reverse"!==h)if("@index"!==h)if("@graph"!==h&&"@list"!==h&&et(h)){k=G(e,h);t.addValue(o,k,p)}else{if(0===p.length){var d=G(e,h,p,{vocab:!0},c);t.addValue(o,d,p,{propertyIsArray:!0})}for(O=0;O<p.length;++O){var v=p[O],y=(d=G(e,h,v,{vocab:!0},c),_=t.getContextValue(e,d,"@container"),ht(v)),g=null;y&&(g=v["@list"]);var m=this.compact(e,d,y?g:v,i);if(y)if(rt(m)||(m=[m]),"@list"!==_){var w={};w[G(e,"@list")]=m,m=w,"@index"in v&&(m[G(e,"@index")]=v["@index"])}else if(d in o)throw new I('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===_||"@index"===_){var b;d in o?b=o[d]:o[d]=b={},"@language"===_&&ft(m)&&(m=m["@value"]),t.addValue(b,v[_],m)}else{A=!i.compactArrays||"@set"===_||"@list"===_||rt(m)&&0===m.length||"@list"===h||"@graph"===h;t.addValue(o,d,m,{propertyIsArray:A})}}}else{if("@index"===(_=t.getContextValue(e,n,"@container")))continue;k=G(e,h);t.addValue(o,k,p)}else{T=this.compact(e,"@reverse",p,i);for(var x in T)if(e.mappings[x]&&e.mappings[x].reverse){var _,S=T[x],E="@set"===(_=t.getContextValue(e,x,"@container"))||!i.compactArrays;t.addValue(o,x,S,{propertyIsArray:E}),delete T[x]}if(Object.keys(T).length>0){var k=G(e,h);t.addValue(o,k,T)}}else{var T;if(ot(p))T=G(e,p,null,{vocab:"@type"===h});else{T=[];for(var O=0;O<p.length;++O)T.push(G(e,p[O],null,{vocab:!0}))}var k=G(e,h),A=rt(T)&&0===p.length;t.addValue(o,k,T,{propertyIsArray:A})}}return o}return r},j.prototype.expand=function(e,n,r,i,o){var s=this;if(null===r||void 0===r)return null;if(!rt(r)&&!nt(r))return o||null!==n&&"@graph"!==Z(e,n,{vocab:!0})?function(e,n,r){if(null===r||void 0===r)return null;var i=Z(e,n,{vocab:!0});if("@id"===i)return Z(e,r,{base:!0});if("@type"===i)return Z(e,r,{vocab:!0,base:!0});var o=t.getContextValue(e,n,"@type");if("@id"===o||"@graph"===i&&ot(r))return{"@id":Z(e,r,{base:!0})};if("@vocab"===o)return{"@id":Z(e,r,{vocab:!0,base:!0})};if(et(i))return r;var s={};if(null!==o)s["@type"]=o;else if(ot(r)){var a=t.getContextValue(e,n,"@language");null!==a&&(s["@language"]=a)}-1===["boolean","number","string"].indexOf(typeof r)&&(r=r.toString());return s["@value"]=r,s}(e,n,r):null;if(rt(r)){var a=[],u=t.getContextValue(e,n,"@container");o=o||"@list"===u;for(var c=0;c<r.length;++c){var l=s.expand(e,n,r[c],i);if(o&&(rt(l)||ht(l)))throw new I("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==l&&(rt(l)?a=a.concat(l):a.push(l))}return a}"@context"in r&&(e=s.processContext(e,r["@context"],i));for(var f=Z(e,n,{vocab:!0}),h=(a={},Object.keys(r).sort()),p=0;p<h.length;++p){var d,v=h[p],y=r[v];if("@context"!==v){var g=Z(e,v,{vocab:!0});if(null!==g&&(dt(g)||et(g))){if(et(g)){if("@reverse"===f)throw new I("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y});if(g in a)throw new I("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:g})}if("@id"===g&&!ot(y)){if(!i.isFrame)throw new I('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(!nt(y))throw new I('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}if("@type"===g&&it(y),"@graph"===g&&!nt(y)&&!rt(y))throw new I('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y});if("@value"===g&&(nt(y)||rt(y)))throw new I('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:y});if("@language"===g){if(null===y)continue;if(!ot(y))throw new I('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y});y=y.toLowerCase()}if("@index"===g&&!ot(y))throw new I('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y});if("@reverse"!==g){if("@language"===(u=t.getContextValue(e,v,"@container"))&&nt(y))d=N(y);else if("@index"===u&&nt(y))d=function(t){for(var n=[],r=Object.keys(y).sort(),o=0;o<r.length;++o){var a=r[o],u=y[a];rt(u)||(u=[u]),u=s.expand(e,t,u,i,!1);for(var c=0;c<u.length;++c){var l=u[c];"@index"in l||(l["@index"]=a),n.push(l)}}return n}(v);else{var m="@list"===g;if(m||"@set"===g){var w=n;if(m&&"@graph"===f&&(w=null),d=s.expand(e,w,y,i,m),m&&ht(d))throw new I("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else d=s.expand(e,v,y,i,!1)}if(null!==d||"@value"===g)if("@list"===g||ht(d)||"@list"!==u||(d={"@list":d=rt(d)?d:[d]}),e.mappings[v]&&e.mappings[v].reverse){_=a["@reverse"]=a["@reverse"]||{};rt(d)||(d=[d]);for(E=0;E<d.length;++E){if(ft(k=d[E])||ht(k))throw new I('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:d});t.addValue(_,g,k,{propertyIsArray:!0})}}else{var b=-1===["@index","@id","@type","@value","@language"].indexOf(g);t.addValue(a,g,d,{propertyIsArray:b})}}else{if(!nt(y))throw new I('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y});if("@reverse"in(d=s.expand(e,"@reverse",y,i)))for(var x in d["@reverse"])t.addValue(a,x,d["@reverse"][x],{propertyIsArray:!0});var _=a["@reverse"]||null;for(var x in d)if("@reverse"!==x){null===_&&(_=a["@reverse"]={}),t.addValue(_,x,[],{propertyIsArray:!0});for(var S=d[x],E=0;E<S.length;++E){var k;if(ft(k=S[E])||ht(k))throw new I('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:d});t.addValue(_,x,k,{propertyIsArray:!0})}}}}}}var T=(h=Object.keys(a)).length;if("@value"in a){if("@type"in a&&"@language"in a)throw new I('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:a});var O=T-1;if("@type"in a&&(O-=1),"@index"in a&&(O-=1),"@language"in a&&(O-=1),0!==O)throw new I('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:a});if(null===a["@value"])a=null;else{if("@language"in a&&!ot(a["@value"]))throw new I("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:a});if("@type"in a&&(!dt(a["@type"])||0===a["@type"].indexOf("_:")))throw new I('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:a})}}else if("@type"in a&&!rt(a["@type"]))a["@type"]=[a["@type"]];else if("@set"in a||"@list"in a){if(T>1&&!(2===T&&"@index"in a))throw new I('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:a});"@set"in a&&(a=a["@set"],T=(h=Object.keys(a)).length)}else 1===T&&"@language"in a&&(a=null);return!nt(a)||i.keepFreeFloatingNodes||o||null!==n&&"@graph"!==f||(0===T||"@value"in a||"@list"in a||1===T&&"@id"in a)&&(a=null),a},j.prototype.createNodeMap=function(t,e){var n={"@default":{}};return z(t,n,"@default",(e=e||{}).namer||e.issuer||new bt("_:b")),H(n)},j.prototype.flatten=function(t){for(var e=this.createNodeMap(t),n=[],r=Object.keys(e).sort(),i=0;i<r.length;++i){var o=e[r[i]];lt(o)||n.push(o)}return n},j.prototype.frame=function(t,e,n){var r={options:n,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new bt("_:b");z(t,r.graphs,"@merged",i),r.subjects=r.graphs["@merged"];var o=[];return function t(e,n,r,i,o){!function(t){if(!rt(t)||1!==t.length||!nt(t[0]))throw new I("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:t})}(r);r=r[0];var s=e.options;var a={embed:K(r,s,"embed"),explicit:K(r,s,"explicit"),requireAll:K(r,s,"requireAll")};var u=function(t,e,n,r){for(var i={},o=0;o<e.length;++o){var s=e[o],a=t.subjects[s];W(a,n,r)&&(i[s]=a)}return i}(e,n,r,a);var c=Object.keys(u).sort();for(var l=0;l<c.length;++l){var f=c[l],h=u[f];if("@link"===a.embed&&f in e.link)Y(i,o,e.link[f]);else{null===o&&(e.uniqueEmbeds={});var p={};if(p["@id"]=f,e.link[f]=p,"@never"===a.embed||J(h,e.subjectStack))Y(i,o,p);else{"@last"===a.embed&&(f in e.uniqueEmbeds&&$(e,f),e.uniqueEmbeds[f]={parent:i,property:o}),e.subjectStack.push(h);for(var d=Object.keys(h).sort(),v=0;v<d.length;v++){var y=d[v];if(et(y))p[y]=vt(h[y]);else if(!a.explicit||y in r)for(var g=h[y],m=0;m<g.length;++m){var w=g[m];if(ht(w)){var b={"@list":[]};Y(p,y,b);var x=w["@list"];for(var _ in x)if(lt(w=x[_])){var S=y in r?r[y][0]["@list"]:V(a);t(e,[w["@id"]],S,b,"@list")}else Y(b,"@list",vt(w))}else if(lt(w)){var S=y in r?r[y]:V(a);t(e,[w["@id"]],S,p,y)}else Y(p,y,vt(w))}}for(var d=Object.keys(r).sort(),v=0;v<d.length;++v){var y=d[v];if(!et(y)){var E=r[y][0],k=K(E,s,"omitDefault");if(!(k||y in p)){var T="@null";"@default"in E&&(T=vt(E["@default"])),rt(T)||(T=[T]),p[y]=[{"@preserve":T}]}}}Y(i,o,p),e.subjectStack.pop()}}}}(r,Object.keys(r.subjects).sort(),e,o,null),o},j.prototype.normalize=function(t,e,n){return"URDNA2015"===e.algorithm?new F(e).main(t,n):"URGNA2012"===e.algorithm?new q(e).main(t,n):void n(new Error("Invalid RDF Dataset Normalization algorithm: "+e.algorithm))},j.prototype.fromRDF=function(e,n,r){var i={},o={"@default":i},s={};for(var a in e){var u=e[a];a in o||(o[a]={}),"@default"===a||a in i||(i[a]={"@id":a});for(var c=o[a],l=0;l<u.length;++l){var f=u[l],h=f.subject.value,p=f.predicate.value,d=f.object;h in c||(c[h]={"@id":h});var v=c[h],y="IRI"===d.type||"blank node"===d.type;if(!y||d.value in c||(c[d.value]={"@id":d.value}),p!==S||n.useRdfType||!y){var g=U(d,n.useNativeTypes);if(t.addValue(v,p,g,{propertyIsArray:!0}),y)if(d.value===_){var m=c[d.value];"usages"in m||(m.usages=[]),m.usages.push({node:v,property:p,value:g})}else d.value in s?s[d.value]=!1:s[d.value]={node:v,property:p,value:g}}else t.addValue(v,"@type",d.value,{propertyIsArray:!0})}}for(var a in o){var w=o[a];if(_ in w){for(var E=w[_],k=0;k<E.usages.length;++k){for(var T=E.usages[k],O=(v=T.node,T.property),A=T.value,R=[],I=[],j=Object.keys(v).length;O===x&&nt(s[v["@id"]])&&rt(v[b])&&1===v[b].length&&rt(v[x])&&1===v[x].length&&(3===j||4===j&&rt(v["@type"])&&1===v["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===v["@type"][0])&&(R.push(v[b][0]),I.push(v["@id"]),v=(T=s[v["@id"]]).node,O=T.property,A=T.value,j=Object.keys(v).length,0===v["@id"].indexOf("_:")););if(O===b){if(v["@id"]===_)continue;A=w[A["@id"]][x][0],R.pop(),I.pop()}delete A["@id"],A["@list"]=R.reverse();for(var N=0;N<I.length;++N)delete w[I[N]]}delete E.usages}}var P=[],C=Object.keys(i).sort();for(k=0;k<C.length;++k){var D=C[k];v=i[D];if(D in o){u=v["@graph"]=[],w=o[D];for(var L=Object.keys(w).sort(),M=0;M<L.length;++M){var B=w[L[M]];lt(B)||u.push(B)}}lt(v)||P.push(v)}r(null,P)},j.prototype.toRDF=function(t,e){var n=new bt("_:b"),r={"@default":{}};z(t,r,"@default",n);for(var i={},o=Object.keys(r).sort(),s=0;s<o.length;++s){var a=o[s];("@default"===a||dt(a))&&(i[a]=P(r[a],n,e))}return i},j.prototype.processContext=function(e,n,r){nt(n)&&"@context"in n&&rt(n["@context"])&&(n=n["@context"]);var i=rt(n)?n:[n];if(0===i.length)return e.clone();for(var o=e,s=0;s<i.length;++s){var a=i[s];if(null!==a){if(nt(a)&&"@context"in a&&(a=a["@context"]),!nt(a))throw new I("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:a});if(t.cache.activeCtx){var u=t.cache.activeCtx.get(e,a);if(u){o=e=u;continue}}e=o,o=o.clone();var c={};if("@base"in a){var l=a["@base"];if(null===l)l=null;else{if(!ot(l))throw new I('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:a});if(""!==l&&!dt(l))throw new I('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:a})}null!==l&&(l=t.url.parse(l||"")),o["@base"]=l,c["@base"]=!0}if("@vocab"in a){if(null===(f=a["@vocab"]))delete o["@vocab"];else{if(!ot(f))throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:a});if(!dt(f))throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:a});o["@vocab"]=f}c["@vocab"]=!0}if("@language"in a){var f;if(null===(f=a["@language"]))delete o["@language"];else{if(!ot(f))throw new I('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:a});o["@language"]=f.toLowerCase()}c["@language"]=!0}for(var h in a)Q(o,a,h,c);t.cache.activeCtx&&t.cache.activeCtx.set(e,a,o)}else o=e=tt(r)}return o};var M,B,F=(M={subject:"s",object:"o",name:"g"},(B=function(t){t=t||{},this.name="URDNA2015",this.options=t,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new bt("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in t?t.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in t?t.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in t?t.timeSlice:10}).prototype.doWork=function(e,n){var r=this.schedule;if(r.totalDepth>=r.MAX_TOTAL_DEPTH)return n(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function i(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,t.nextTick(i);var o=(new Date).getTime();if(r.running||(r.start=(new Date).getTime(),r.deadline=r.start+r.timeSlice),o<r.deadline)return r.running=!0,r.depth++,r.totalDepth++,e(function(t,e){r.depth--,r.totalDepth--,n(t,e)});r.depth=0,r.running=!1,t.setImmediate(i)}()},B.prototype.forEach=function(t,e,n){var r,i,o=this,s=0;if(rt(t))i=t.length,r=function(){return s!==i&&(r.value=t[s++],r.key=s,!0)};else{var a=Object.keys(t);i=a.length,r=function(){return s!==i&&(r.key=a[s++],r.value=t[r.key],!0)}}!function t(i,s){return i?n(i):r()?o.doWork(function(){e(r.value,r.key,t)}):void n()}()},B.prototype.waterfall=function(t,e){var n=this;n.forEach(t,function(t,e,r){n.doWork(t,r)},e)},B.prototype.whilst=function(t,e,n){var r=this;!function i(o){return o?n(o):t()?void r.doWork(e,i):n()}()},B.prototype.main=function(t,e){var n,r=this;if(r.schedule.start=(new Date).getTime(),r.options.format&&"application/nquads"!==r.options.format)return e(new I("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(e){r.forEach(t,function(t,e,n){"@default"===e&&(e=null),r.forEach(t,function(t,n,o){null!==e&&(0===e.indexOf("_:")?t.name={type:"blank node",value:e}:t.name={type:"IRI",value:e}),r.quads.push(t),r.forEachComponent(t,function(e){if("blank node"===e.type){var n=e.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(t):(i[n]=!0,r.blankNodeInfo[n]={quads:[t]})}}),o()},n)},e)},function(t){var e=!0;r.whilst(function(){return e},function(t){e=!1,r.hashToBlankNodes={},r.waterfall([function(t){r.forEach(i,function(t,e,n){r.hashFirstDegreeQuads(e,function(t,i){if(t)return n(t);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(e):r.hashToBlankNodes[i]=[e],n()})},t)},function(t){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(t,n,o){var s=r.hashToBlankNodes[t];if(s.length>1)return o();var a=s[0];r.canonicalIssuer.getId(a),delete i[a],delete r.hashToBlankNodes[t],e=!0,o()},t)}],t)},t)},function(t){var e=Object.keys(r.hashToBlankNodes).sort();r.forEach(e,function(t,e,n){var i=[],o=r.hashToBlankNodes[t];r.waterfall([function(t){r.forEach(o,function(t,e,n){if(r.canonicalIssuer.hasId(t))return n();var o=new bt("_:b");o.getId(t),r.hashNDegreeQuads(t,o,function(t,e){if(t)return n(t);i.push(e),n()})},t)},function(t){i.sort(function(t,e){return t.hash<e.hash?-1:t.hash>e.hash?1:0}),r.forEach(i,function(t,e,n){for(var i in t.issuer.existing)r.canonicalIssuer.getId(i);n()},t)}],n)},t)},function(t){var e=[];r.waterfall([function(t){r.forEach(r.quads,function(t,n,i){r.forEachComponent(t,function(t){"blank node"===t.type&&0!==t.value.indexOf(r.canonicalIssuer.prefix)&&(t.value=r.canonicalIssuer.getId(t.value))}),e.push(wt(t)),i()},t)},function(t){if(e.sort(),"application/nquads"===r.options.format)return n=e.join(""),t();n=mt(e.join("")),t()}],t)}],function(t){e(t,n)})},B.prototype.hashFirstDegreeQuads=function(t,e){var n=this,r=n.blankNodeInfo[t];if("hash"in r)return e(null,r.hash);var i=[],o=r.quads;n.forEach(o,function(e,r,o){var s={predicate:e.predicate};n.forEachComponent(e,function(e,r){s[r]=n.modifyFirstDegreeComponent(t,e,r)}),i.push(wt(s)),o()},function(t){if(t)return e(t);i.sort(),r.hash=_t.hashNQuads(n.name,i),e(null,r.hash)})},B.prototype.modifyFirstDegreeComponent=function(t,e){return"blank node"!==e.type?e:((e=vt(e)).value=e.value===t?"_:a":"_:z",e)},B.prototype.hashRelatedBlankNode=function(t,e,n,r,i){var o,s=this;s.waterfall([function(e){return s.canonicalIssuer.hasId(t)?(o=s.canonicalIssuer.getId(t),e()):n.hasId(t)?(o=n.getId(t),e()):void s.hashFirstDegreeQuads(t,function(t,n){if(t)return e(t);o=n,e()})}],function(t){if(t)return i(t);var n=new _t(s.name);return n.update(r),"g"!==r&&n.update(s.getRelatedPredicate(e)),n.update(o),i(null,n.digest())})},B.prototype.getRelatedPredicate=function(t){return"<"+t.predicate.value+">"},B.prototype.hashNDegreeQuads=function(t,e,n){var r,i=this,o=new _t(i.name);i.waterfall([function(n){i.createHashToRelated(t,e,function(t,e){if(t)return n(t);r=e,n()})},function(t){var n=Object.keys(r).sort();i.forEach(n,function(t,n,s){o.update(t);var a,u="",c=new xt(r[t]);i.whilst(function(){return c.hasNext()},function(t){var n=c.next(),r=e.clone(),o="",s=[];i.waterfall([function(e){i.forEach(n,function(e,n,a){if(i.canonicalIssuer.hasId(e)?o+=i.canonicalIssuer.getId(e):(r.hasId(e)||s.push(e),o+=r.getId(e)),0!==u.length&&o.length>=u.length&&o>u)return t();a()},e)},function(e){i.forEach(s,function(e,n,s){i.hashNDegreeQuads(e,r,function(n,i){return n?s(n):(o+=r.getId(e),o+="<"+i.hash+">",r=i.issuer,0!==u.length&&o.length>=u.length&&o>u?t():void s())})},e)},function(t){(0===u.length||o<u)&&(u=o,a=r),t()}],t)},function(t){if(t)return s(t);o.update(u),e=a,s()})},t)}],function(t){n(t,{hash:o.digest(),issuer:e})})},B.prototype.createHashToRelated=function(t,e,n){var r=this,i={},o=r.blankNodeInfo[t].quads;r.forEach(o,function(n,o,s){r.forEach(n,function(o,s,a){if("predicate"===s||"blank node"!==o.type||o.value===t)return a();var u=o.value,c=M[s];r.hashRelatedBlankNode(u,n,e,c,function(t,e){if(t)return a(t);e in i?i[e].push(u):i[e]=[u],a()})},s)},function(t){n(t,i)})},B.prototype.forEachComponent=function(t,e){for(var n in t)"predicate"!==n&&e(t[n],n,t)},B),q=function(){var t=function(t){F.call(this,t),this.name="URGNA2012"};return(t.prototype=new F).modifyFirstDegreeComponent=function(t,e,n){return"blank node"!==e.type?e:((e=vt(e)).value="name"===n?"_:g":e.value===t?"_:a":"_:z",e)},t.prototype.getRelatedPredicate=function(t){return t.predicate.value},t.prototype.createHashToRelated=function(t,e,n){var r=this,i={},o=r.blankNodeInfo[t].quads;r.forEach(o,function(n,o,s){var a,u;if("blank node"===n.subject.type&&n.subject.value!==t)u=n.subject.value,a="p";else{if("blank node"!==n.object.type||n.object.value===t)return s();u=n.object.value,a="r"}r.hashRelatedBlankNode(u,n,e,a,function(t,e){e in i?i[e].push(u):i[e]=[u],s()})},function(t){n(t,i)})},t}();function z(e,n,r,i,o,s){if(rt(e))for(var a=0;a<e.length;++a)z(e[a],n,r,i,void 0,s);else if(nt(e))if(ft(e)){"@type"in e&&0===(c=e["@type"]).indexOf("_:")&&(e["@type"]=c=i.getId(c)),s&&s.push(e)}else{if("@type"in e){var u=e["@type"];for(a=0;a<u.length;++a){var c;0===(c=u[a]).indexOf("_:")&&i.getId(c)}}ut(o)&&(o=pt(e)?i.getId(e["@id"]):e["@id"]),s&&s.push({"@id":o});var l=n[r],f=l[o]=l[o]||{};f["@id"]=o;for(var h=Object.keys(e).sort(),p=0;p<h.length;++p){var d=h[p];if("@id"!==d)if("@reverse"!==d)if("@graph"!==d)if("@type"!==d&&et(d)){if("@index"===d&&d in f&&(e[d]!==f[d]||e[d]["@id"]!==f[d]["@id"]))throw new I("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[d]=e[d]}else{var v=e[d];if(0===d.indexOf("_:")&&(d=i.getId(d)),0!==v.length)for(var y=0;y<v.length;++y){var g=v[y];if("@type"===d&&(g=0===g.indexOf("_:")?i.getId(g):g),ct(g)||lt(g)){var m=pt(g)?i.getId(g["@id"]):g["@id"];t.addValue(f,d,{"@id":m},{propertyIsArray:!0,allowDuplicate:!1}),z(g,n,r,i,m)}else if(ht(g)){var w=[];z(g["@list"],n,r,i,o,w),g={"@list":w},t.addValue(f,d,g,{propertyIsArray:!0,allowDuplicate:!1})}else z(g,n,r,i,o),t.addValue(f,d,g,{propertyIsArray:!0,allowDuplicate:!1})}else t.addValue(f,d,[],{propertyIsArray:!0})}else{o in n||(n[o]={});var b="@merged"===r?r:o;z(e[d],n,b,i)}else{var x={"@id":o},_=e["@reverse"];for(var S in _)for(var E=_[S],k=0;k<E.length;++k){var T=E[k],O=T["@id"];pt(T)&&(O=i.getId(O)),z(T,n,r,i,O),t.addValue(l[O],S,x,{propertyIsArray:!0,allowDuplicate:!1})}}}}else s&&s.push(e)}function H(t){for(var e=t["@default"],n=Object.keys(t).sort(),r=0;r<n.length;++r){var i=n[r];if("@default"!==i){var o=t[i],s=e[i];s?"@graph"in s||(s["@graph"]=[]):e[i]=s={"@id":i,"@graph":[]};for(var a=s["@graph"],u=Object.keys(o).sort(),c=0;c<u.length;++c){var l=o[u[c]];lt(l)||a.push(l)}}}return e}function V(t){var e={};for(var n in t)void 0!==t[n]&&(e["@"+n]=[t[n]]);return[e]}function J(t,e){for(var n=e.length-1;n>=0;--n)if(e[n]["@id"]===t["@id"])return!0;return!1}function K(t,e,n){var r="@"+n,i=r in t?t[r][0]:e[n];return"embed"===n&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function W(e,n,r){if("@type"in n&&(1!==n["@type"].length||!nt(n["@type"][0]))){for(var i=n["@type"],o=0;o<i.length;++o)if(t.hasValue(e,"@type",i[o]))return!0;return!1}var s=!0,a=!1;for(var u in n){if(et(u)){if("@id"!==u&&"@type"!==u)continue;if(s=!1,"@id"===u&&ot(n[u])){if(e[u]!==n[u])return!1;a=!0;continue}}if(s=!1,u in e){if(rt(n[u])&&0===n[u].length&&void 0!==e[u])return!1;a=!0}else{var c=rt(n[u])&&nt(n[u][0])&&"@default"in n[u][0];if(r.requireAll&&!c)return!1}}return s||a}function $(e,n){var r=e.uniqueEmbeds,i=r[n],o=i.parent,s=i.property,a={"@id":n};if(rt(o)){for(var u=0;u<o.length;++u)if(t.compareValues(o[u],a)){o[u]=a;break}}else{var c=rt(o[s]);t.removeValue(o,s,a,{propertyIsArray:c}),t.addValue(o,s,a,{propertyIsArray:c})}var l=function(t){for(var e=Object.keys(r),n=0;n<e.length;++n){var i=e[n];i in r&&nt(r[i].parent)&&r[i].parent["@id"]===t&&(delete r[i],l(i))}};l(n)}function Y(e,n,r){nt(e)?t.addValue(e,n,r,{propertyIsArray:!0}):e.push(r)}function X(t,e){return t.length<e.length?-1:e.length<t.length?1:t===e?0:t<e?-1:1}function G(e,n,r,i,o){if(null===n)return n;ut(r)&&(r=null),ut(o)&&(o=!1),i=i||{};var s=e.getInverse();if(et(n))return n in s?s[n]["@none"]["@type"]["@none"]:n;if(i.vocab&&n in s){var a=e["@language"]||"@none",u=[];nt(r)&&"@index"in r&&u.push("@index");var c="@language",l="@null";if(o)c="@type",l="@reverse",u.push("@set");else if(ht(r)){"@index"in r||u.push("@list");for(var f=r["@list"],h=0===f.length?a:null,p=null,d=0;d<f.length;++d){var v=f[d],y="@none",g="@none";if(ft(v)?"@language"in v?y=v["@language"]:"@type"in v?g=v["@type"]:y="@null":g="@id",null===h?h=y:y!==h&&ft(v)&&(h="@none"),null===p?p=g:g!==p&&(p="@none"),"@none"===h&&"@none"===p)break}h=h||"@none","@none"!==(p=p||"@none")?(c="@type",l=p):l=h}else ft(r)?"@language"in r&&!("@index"in r)?(u.push("@language"),l=r["@language"]):"@type"in r&&(c="@type",l=r["@type"]):(c="@type",l="@id"),u.push("@set");u.push("@none");var m=function(t,e,n,r,i,o){null===o&&(o="@null");var s=[];if("@id"!==o&&"@reverse"!==o||!lt(n))s.push(o);else{"@reverse"===o&&s.push("@reverse");var a=G(t,n["@id"],null,{vocab:!0});a in t.mappings&&t.mappings[a]&&t.mappings[a]["@id"]===n["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}s.push("@none");for(var u=t.inverse[e],c=0;c<r.length;++c){var l=r[c];if(l in u)for(var f=u[l][i],h=0;h<s.length;++h){var p=s[h];if(p in f)return f[p]}}return null}(e,n,r,u,c,l);if(null!==m)return m}if(i.vocab&&"@vocab"in e){var w=e["@vocab"];if(0===n.indexOf(w)&&n!==w){var b=n.substr(w.length);if(!(b in e.mappings))return b}}for(var x=null,_=0,S=[],E=e.fastCurieMap,k=n.length-1;_<k&&n[_]in E;++_)""in(E=E[n[_]])&&S.push(E[""][0]);for(d=S.length-1;d>=0;--d)for(var T=S[d],O=T.terms,A=0;A<O.length;++A){var R=O[A]+":"+n.substr(T.iri.length);(!(R in e.mappings)||null===r&&e.mappings[R]["@id"]===n)&&(null===x||X(R,x)<0)&&(x=R)}return null!==x?x:i.vocab?n:function(e,n){if(null===e)return n;ot(e)&&(e=t.url.parse(e||""));var r="";""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):n.indexOf("//")&&(r+="//");if(0!==n.indexOf(r))return n;var i=t.url.parse(n.substr(r.length)),o=e.normalizedPath.split("/"),s=i.normalizedPath.split("/"),a=i.fragment||i.query?0:1;for(;o.length>0&&s.length>a&&o[0]===s[0];)o.shift(),s.shift();var u="";if(o.length>0){o.pop();for(var c=0;c<o.length;++c)u+="../"}u+=s.join("/"),null!==i.query&&(u+="?"+i.query);null!==i.fragment&&(u+="#"+i.fragment);""===u&&(u="./");return u}(e["@base"],n)}function Q(t,e,n,r){if(n in r){if(r[n])return;throw new I("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:e,term:n})}if(r[n]=!1,et(n))throw new I("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:n});if(""===n)throw new I("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:e});t.mappings[n]&&delete t.mappings[n];var i=e[n];if(null===i||nt(i)&&null===i["@id"])return t.mappings[n]=null,void(r[n]=!0);if(ot(i)&&(i={"@id":i}),!nt(i))throw new I("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:e});var o=t.mappings[n]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new I("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});var s=i["@reverse"];if(!ot(s))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(!dt(a=Z(t,s,{vocab:!0,base:!1},e,r)))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});o["@id"]=a,o.reverse=!0}else if("@id"in i){if(!ot(a=i["@id"]))throw new I("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(a!==n){if(!dt(a=Z(t,a,{vocab:!0,base:!1},e,r))&&!et(a))throw new I("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});o["@id"]=a}}var a,u=n.indexOf(":");if(o._termHasColon=-1!==u,!("@id"in o))if(o._termHasColon){var c=n.substr(0,u);if(c in e&&Q(t,e,c,r),t.mappings[c]){var l=n.substr(u+1);o["@id"]=t.mappings[c]["@id"]+l}else o["@id"]=n}else{if(!("@vocab"in t))throw new I("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e,term:n});o["@id"]=t["@vocab"]+n}if(r[n]=!0,"@type"in i){var f=i["@type"];if(!ot(f))throw new I("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if("@id"!==f&&"@vocab"!==f){if(!dt(f=Z(t,f,{vocab:!0,base:!1},e,r)))throw new I("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(0===f.indexOf("_:"))throw new I("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}o["@type"]=f}if("@container"in i){var h=i["@container"];if("@list"!==h&&"@set"!==h&&"@index"!==h&&"@language"!==h)throw new I("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:e});if(o.reverse&&"@index"!==h&&"@set"!==h&&null!==h)throw new I("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});o["@container"]=h}if("@language"in i&&!("@type"in i)){var p=i["@language"];if(null!==p&&!ot(p))throw new I("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:e});null!==p&&(p=p.toLowerCase()),o["@language"]=p}if("@context"===(a=o["@id"])||"@preserve"===a)throw new I("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:e})}function Z(e,n,r,i,o){if(null===n||et(n))return n;if(n=String(n),i&&n in i&&!0!==o[n]&&Q(e,i,n,o),(r=r||{}).vocab){if(null===(a=e.mappings[n]))return null;if(a)return a["@id"]}var s=n.indexOf(":");if(-1!==s){var a,u=n.substr(0,s),c=n.substr(s+1);return"_"===u||0===c.indexOf("//")?n:(i&&u in i&&Q(e,i,u,o),(a=e.mappings[u])?a["@id"]+c:n)}if(r.vocab&&"@vocab"in e)return e["@vocab"]+n;var l=n;return r.base&&(l=t.prependBase(e["@base"],l)),l}function tt(e){return{"@base":t.url.parse(e.base||""),mappings:{},inverse:null,getInverse:function(){if(this.inverse)return this.inverse;for(var t=this.inverse={},e=this.fastCurieMap={},i={},o=this["@language"]||"@none",s=this.mappings,a=Object.keys(s).sort(X),u=0;u<a.length;++u){var c=a[u],l=s[c];if(null!==l){var f=l["@container"]||"@none",h=l["@id"];rt(h)||(h=[h]);for(var p=0;p<h.length;++p){var d=h[p],v=t[d],y=et(d);if(v)y||l._termHasColon||i[d].push(c);else if(t[d]=v={},!y&&!l._termHasColon){i[d]=[c];var g={iri:d,terms:i[d]};d[0]in e?e[d[0]].push(g):e[d[0]]=[g]}if(v[f]||(v[f]={"@language":{},"@type":{}}),v=v[f],l.reverse)r(l,c,v["@type"],"@reverse");else if("@type"in l)r(l,c,v["@type"],l["@type"]);else if("@language"in l){var m=l["@language"]||"@null";r(l,c,v["@language"],m)}else r(l,c,v["@language"],o),r(l,c,v["@type"],"@none"),r(l,c,v["@language"],"@none")}}}for(var w in e)n(e,w,1);return t},clone:function(){var t={};t["@base"]=this["@base"],t.mappings=vt(this.mappings),t.clone=this.clone,t.inverse=null,t.getInverse=this.getInverse,"@language"in this&&(t["@language"]=this["@language"]);"@vocab"in this&&(t["@vocab"]=this["@vocab"]);return t}};function n(t,e,r){for(var i,o,s=t[e],a=t[e]={},u=0;u<s.length;++u)(o=r>=(i=s[u].iri).length?"":i[r])in a?a[o].push(s[u]):a[o]=[s[u]];for(var e in a)""!==e&&n(a,e,r+1)}function r(t,e,n,r){r in n||(n[r]=e)}}function et(t){if(!ot(t))return!1;switch(t){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function nt(t){return"[object Object]"===Object.prototype.toString.call(t)}function rt(t){return Array.isArray(t)}function it(t){if(!ot(t)&&!function(t){return nt(t)&&0===Object.keys(t).length}(t)){var e=!1;if(rt(t)){e=!0;for(var n=0;n<t.length;++n)if(!ot(t[n])){e=!1;break}}if(!e)throw new I('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:t})}}function ot(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)}function st(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function at(t){return st(t)&&-1!==String(t).indexOf(".")}function ut(t){return void 0===t}function ct(t){var e=!1;nt(t)&&!("@value"in t||"@set"in t||"@list"in t)&&(e=Object.keys(t).length>1||!("@id"in t));return e}function lt(t){return nt(t)&&1===Object.keys(t).length&&"@id"in t}function ft(t){return nt(t)&&"@value"in t}function ht(t){return nt(t)&&"@list"in t}function pt(t){var e=!1;return nt(t)&&(e="@id"in t?0===t["@id"].indexOf("_:"):0===Object.keys(t).length||!("@value"in t||"@set"in t||"@list"in t)),e}function dt(t){return ot(t)&&-1!==t.indexOf(":")}function vt(t){if(t&&"object"==typeof t){var e;if(rt(t)){e=[];for(var n=0;n<t.length;++n)e[n]=vt(t[n])}else if(nt(t))for(var r in e={},t)e[r]=vt(t[r]);else e=t.toString();return e}return t}function yt(e,n,r,i){var o=Object.keys(n).length;if(rt(e)){for(var s=0;s<e.length;++s)yt(e[s],n,r,i);return o<Object.keys(n).length}if(nt(e)){for(var a in e)if("@context"===a){var u=e[a];if(rt(u)){var c=u.length;for(s=0;s<c;++s){var l=u[s];ot(l)&&(l=t.prependBase(i,l),r?rt(l=n[l])?(Array.prototype.splice.apply(u,[s,1].concat(l)),s+=l.length-1,c=u.length):u[s]=l:l in n||(n[l]=!1))}}else ot(u)&&(u=t.prependBase(i,u),r?e[a]=n[u]:u in n||(n[u]=!1))}else yt(e[a],n,r,i);return o<Object.keys(n).length}return!1}function gt(t,e,n){var r=null,i=e.documentLoader,o=function(t,e,n,i,s){if(Object.keys(e).length>R)return r=new I("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:R}),s(r);var a={},u=function(){yt(t,a,!0,i),s(null,t)};if(!yt(t,a,!1,i))return u();var c=[];for(var l in a)!1===a[l]&&c.push(l);for(var f=c.length,h=0;h<c.length;++h)!function(t){if(t in e)return r=new I("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:t}),s(r);var i=vt(e);i[t]=!0;var c=function(e,c){if(!r){var l=c?c.document:null;if(!e&&ot(l))try{l=JSON.parse(l)}catch(t){e=t}if(e?e=new I("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e}):nt(l)||(e=new I("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t,cause:e})),e)return s(r=e);l="@context"in l?{"@context":l["@context"]}:{"@context":{}},c.contextUrl&&(rt(l["@context"])||(l["@context"]=[l["@context"]]),l["@context"].push(c.contextUrl)),o(l,i,n,t,function(e,n){if(e)return s(e);a[t]=n["@context"],0===(f-=1)&&u()})}},l=n(t,c);l&&"then"in l&&l.then(c.bind(null,null),c)}(c[h])};o(t,{},i,e.base,n)}function mt(t){for(var e=new RegExp("^[ \\t]*(?:#.*)?$"),n=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]*\\.))[ \\t]*(?:#.*)?$'),r={},i=t.split(/(?:\r\n)|(?:\n)|(?:\r)/g),o=0,s=0;s<i.length;++s){var a=i[s];if(o++,!e.test(a)){var u=a.match(n);if(null===u)throw new I("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:o});var c={};if(ut(u[1])?c.subject={type:"blank node",value:u[2]}:c.subject={type:"IRI",value:u[1]},c.predicate={type:"IRI",value:u[3]},ut(u[4]))if(ut(u[5])){c.object={type:"literal"},ut(u[7])?ut(u[8])?c.object.datatype=m:(c.object.datatype=O,c.object.language=u[8]):c.object.datatype=u[7];var l=u[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");c.object.value=l}else c.object={type:"blank node",value:u[5]};else c.object={type:"IRI",value:u[4]};var f="@default";if(ut(u[9])?ut(u[10])||(f=u[10]):f=u[9],f in r){for(var h=!0,p=r[f],d=0;h&&d<p.length;++d)L(p[d],c)&&(h=!1);h&&p.push(c)}else r[f]=[c]}}return r}function wt(t,e){var n=t.subject,r=t.predicate,i=t.object,o=e||null;"name"in t&&t.name&&(o=t.name.value);var s="";if("IRI"===n.type?s+="<"+n.value+">":s+=n.value,s+=" ","IRI"===r.type?s+="<"+r.value+">":s+=r.value,s+=" ","IRI"===i.type)s+="<"+i.value+">";else if("blank node"===i.type)s+=i.value;else{s+='"'+i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"')+'"',i.datatype===O?i.language&&(s+="@"+i.language):i.datatype!==m&&(s+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(0!==o.indexOf("_:")?s+=" <"+o+">":s+=" "+o),s+=" .\n"}function bt(t){this.prefix=t,this.counter=0,this.existing={}}Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on non-object");var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),t.registerRDFParser("application/nquads",mt),t.registerRDFParser("rdfa-api",function(t){for(var e={"@default":[]},n=t.getSubjects(),r=0;r<n.length;++r){var i=n[r];if(null!==i){var o=t.getSubjectTriples(i);if(null!==o){var s=o.predicates;for(var a in s)for(var u=s[a].objects,c=0;c<u.length;++c){var l=u[c],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===a.indexOf("_:")?f.predicate={type:"blank node",value:a}:f.predicate={type:"IRI",value:a};var h=l.value;if(l.type===k){p||St();var v=new p;h="";for(var y=0;y<l.value.length;y++)l.value[y].nodeType===d.ELEMENT_NODE?h+=v.serializeToString(l.value[y]):l.value[y].nodeType===d.TEXT_NODE&&(h+=l.value[y].nodeValue)}f.object={},l.type===T?0===l.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",l.type===E?l.language?(f.object.datatype=O,f.object.language=l.language):f.object.datatype=m:f.object.datatype=l.type),f.object.value=h,e["@default"].push(f)}}}}return e}),t.IdentifierIssuer=bt,t.UniqueNamer=bt,bt.prototype.clone=function(){var t=new bt(this.prefix);return t.counter=this.counter,t.existing=vt(this.existing),t},bt.prototype.getId=function(t){if(t&&t in this.existing)return this.existing[t];var e=this.prefix+this.counter;return this.counter+=1,t&&(this.existing[t]=e),e},bt.prototype.getName=bt.prototype.getName,bt.prototype.hasId=function(t){return t in this.existing},bt.prototype.isNamed=bt.prototype.hasId;var xt=function(t){this.list=t.sort(),this.done=!1,this.left={};for(var e=0;e<t.length;++e)this.left[t[e]]=!0};xt.prototype.hasNext=function(){return!this.done},xt.prototype.next=function(){for(var t=this.list.slice(),e=null,n=0,r=this.list.length,i=0;i<r;++i){var o=this.list[i],s=this.left[o];(null===e||o>e)&&(s&&i>0&&o>this.list[i-1]||!s&&i<r-1&&o>this.list[i+1])&&(e=o,n=i)}if(null===e)this.done=!0;else{var a=this.left[e]?n-1:n+1;this.list[n]=this.list[a],this.list[a]=e;for(i=0;i<r;++i)this.list[i]>e&&(this.left[this.list[i]]=!this.left[this.list[i]])}return t};var _t=function(t){if(!(this instanceof _t))return new _t(t);if(-1===["URDNA2015","URGNA2012"].indexOf(t))throw new Error("Invalid RDF Dataset Normalization algorithm: "+t);_t._init.call(this,t)};if(_t.hashNQuads=function(t,e){for(var n=new _t(t),r=0;r<e.length;++r)n.update(e[r]);return n.digest()},function(t){if(t){var e=n(7);return _t._init=function(t){t="URDNA2015"===t?"sha256":"sha1",this.md=e.createHash(t)},_t.prototype.update=function(t){return this.md.update(t,"utf8")},void(_t.prototype.digest=function(){return this.md.digest("hex")})}_t._init=function(t){t="URDNA2015"===t?new o.Algorithm:new i.Algorithm,this.md=new r(t)},_t.prototype.update=function(t){return this.md.update(t)},_t.prototype.digest=function(){return this.md.digest().toHex()};var r=function(t){if(!(this instanceof r))return new r(t);if(this._algorithm=t,!r._padding||r._padding.length<this._algorithm.blockSize){r._padding=String.fromCharCode(128);for(var e=String.fromCharCode(0),n=64;n>0;)1&n&&(r._padding+=e),(n>>>=1)>0&&(e+=e)}this.start()};r.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var t=this._algorithm.messageLengthSize/4,e=0;e<t;++e)this.fullMessageLength.push(0);return this._input=new r.ByteBuffer,this.state=this._algorithm.start(),this},r.prototype.update=function(t){t=new r.ByteBuffer(unescape(encodeURIComponent(t))),this.messageLength+=t.length();var e=t.length();e=[e/4294967296>>>0,e>>>0];for(var n=this.fullMessageLength.length-1;n>=0;--n)this.fullMessageLength[n]+=e[1],e[1]=e[0]+(this.fullMessageLength[n]/4294967296>>>0),this.fullMessageLength[n]=this.fullMessageLength[n]>>>0,e[0]=e[1]/4294967296>>>0;for(this._input.putBytes(t.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},r.prototype.digest=function(){var t=new r.ByteBuffer;t.putBytes(this._input.bytes());var e=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize&this._algorithm.blockSize-1;t.putBytes(r._padding.substr(0,this._algorithm.blockSize-e));for(var n=new r.ByteBuffer,i=0;i<this.fullMessageLength.length;++i)n.putInt32(this.fullMessageLength[i]<<3|this.fullMessageLength[i+1]>>>28);this._algorithm.writeMessageLength(t,n);var o=this._algorithm.digest(this.state.copy(),t),s=new r.ByteBuffer;return o.write(s),s},r.ByteBuffer=function(t){this.data="string"==typeof t?t:"",this.read=0},r.ByteBuffer.prototype.putInt32=function(t){this.data+=String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)},r.ByteBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},r.ByteBuffer.prototype.putBytes=function(t){this.data+=t},r.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},r.ByteBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},r.ByteBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};var i={_w:null,Algorithm:function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8}};i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(t,e){t.putBytes(e.bytes())},i.Algorithm.prototype.digest=function(t,e){for(var n,r,o,s,a,u,c,l=e.length(),f=i._w;l>=64;){for(r=t.h0,o=t.h1,s=t.h2,a=t.h3,u=t.h4,c=0;c<16;++c)n=e.getInt32(),f[c]=n,n=(r<<5|r>>>27)+(a^o&(s^a))+u+1518500249+n,u=a,a=s,s=o<<30|o>>>2,o=r,r=n;for(;c<20;++c)n=(n=f[c-3]^f[c-8]^f[c-14]^f[c-16])<<1|n>>>31,f[c]=n,n=(r<<5|r>>>27)+(a^o&(s^a))+u+1518500249+n,u=a,a=s,s=o<<30|o>>>2,o=r,r=n;for(;c<32;++c)n=(n=f[c-3]^f[c-8]^f[c-14]^f[c-16])<<1|n>>>31,f[c]=n,n=(r<<5|r>>>27)+(o^s^a)+u+1859775393+n,u=a,a=s,s=o<<30|o>>>2,o=r,r=n;for(;c<40;++c)n=(n=f[c-6]^f[c-16]^f[c-28]^f[c-32])<<2|n>>>30,f[c]=n,n=(r<<5|r>>>27)+(o^s^a)+u+1859775393+n,u=a,a=s,s=o<<30|o>>>2,o=r,r=n;for(;c<60;++c)n=(n=f[c-6]^f[c-16]^f[c-28]^f[c-32])<<2|n>>>30,f[c]=n,n=(r<<5|r>>>27)+(o&s|a&(o^s))+u+2400959708+n,u=a,a=s,s=o<<30|o>>>2,o=r,r=n;for(;c<80;++c)n=(n=f[c-6]^f[c-16]^f[c-28]^f[c-32])<<2|n>>>30,f[c]=n,n=(r<<5|r>>>27)+(o^s^a)+u+3395469782+n,u=a,a=s,s=o<<30|o>>>2,o=r,r=n;t.h0=t.h0+r|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,l-=64}return t},i._createState=function(){var t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520,copy:function(){var e=i._createState();return e.h0=t.h0,e.h1=t.h1,e.h2=t.h2,e.h3=t.h3,e.h4=t.h4,e},write:function(e){e.putInt32(t.h0),e.putInt32(t.h1),e.putInt32(t.h2),e.putInt32(t.h3),e.putInt32(t.h4)}};return t};var o={_k:null,_w:null,Algorithm:function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8}};o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(t,e){t.putBytes(e.bytes())},o.Algorithm.prototype.digest=function(t,e){for(var n,r,i,s,a,u,c,l,f,h,p,d,v,y=e.length(),g=o._k,m=o._w;y>=64;){for(a=0;a<16;++a)m[a]=e.getInt32();for(;a<64;++a)n=((n=m[a-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,r=((r=m[a-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,m[a]=n+m[a-7]+r+m[a-16]|0;for(u=t.h0,c=t.h1,l=t.h2,f=t.h3,h=t.h4,p=t.h5,d=t.h6,v=t.h7,a=0;a<64;++a)i=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),s=u&c|l&(u^c),n=v+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(d^h&(p^d))+g[a]+m[a],v=d,d=p,p=h,h=f+n|0,f=l,l=c,c=u,u=n+(r=i+s)|0;t.h0=t.h0+u|0,t.h1=t.h1+c|0,t.h2=t.h2+l|0,t.h3=t.h3+f|0,t.h4=t.h4+h|0,t.h5=t.h5+p|0,t.h6=t.h6+d|0,t.h7=t.h7+v|0,y-=64}return t},o._createState=function(){var t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225,copy:function(){var e=o._createState();return e.h0=t.h0,e.h1=t.h1,e.h2=t.h2,e.h3=t.h3,e.h4=t.h4,e.h5=t.h5,e.h6=t.h6,e.h7=t.h7,e},write:function(e){e.putInt32(t.h0),e.putInt32(t.h1),e.putInt32(t.h2),e.putInt32(t.h3),e.putInt32(t.h4),e.putInt32(t.h5),e.putInt32(t.h6),e.putInt32(t.h7)}};return t},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(u),!p)var St=function(){p=n(7).XMLSerializer};function Et(t,e){var n="";0===t.indexOf("/")&&(n="/");for(var r=t.split("/"),i=[];r.length>0;)"."===r[0]||""===r[0]&&r.length>1?r.shift():".."!==r[0]?i.push(r.shift()):(r.shift(),e||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return n+i.join("/")}if(t.url={},t.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.url.parse=function(e,n){for(var r={},i=t.url.parsers[n||"full"],o=i.regex.exec(e),s=i.keys.length;s--;)r[i.keys[s]]=void 0===o[s]?null:o[s];return r.normalizedPath=Et(r.path,!!r.authority),r},u?t.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&t.useDocumentLoader("xhr"),u){t.use=function(e){switch(e){case"request":t.request=n(7);break;default:throw new I("Unknown extension.","jsonld.UnknownExtension",{extension:e})}};var kt={exports:{},filename:s};n(7)(kt,"version"),t.version=kt.exports.version}return t},f=function(){return l(function(){return f()})};!u&&n(66)?void 0===(a=function(){return l(f),f}.apply(e,[]))||(t.exports=a):(l(f),t.exports&&(t.exports=f),c&&("undefined"==typeof jsonld?jsonld=jsonldjs=f:jsonldjs=f))}()}).call(this,n(5),n(3),n(13).setImmediate,"/")},function(t,e,n){(function(r,i,o){var s;(function(){"use strict";function a(t){return"function"==typeof t}var u,c,l=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},f=0,h=function(t,e){T[f]=t,T[f+1]=e,2===(f+=2)&&(c?c(O):w())};var p="undefined"!=typeof window?window:void 0,d=p||{},v=d.MutationObserver||d.WebKitMutationObserver,y=void 0!==r&&"[object process]"==={}.toString.call(r),g="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){setTimeout(O,1)}}var w,b,x,_,S,E,k,T=new Array(1e3);function O(){for(var t=0;t<f;t+=2){(0,T[t])(T[t+1]),T[t]=void 0,T[t+1]=void 0}f=0}function A(){}y?(E=r.nextTick,k=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(k)&&"0"===k[1]&&"10"===k[2]&&(E=i),w=function(){E(O)}):v?(x=0,_=new v(O),S=document.createTextNode(""),_.observe(S,{characterData:!0}),w=function(){S.data=x=++x%2}):g?((b=new MessageChannel).port1.onmessage=O,w=function(){b.port2.postMessage(0)}):w=void 0===p?function(){try{var t=n(65);return u=t.runOnLoop||t.runOnContext,function(){u(O)}}catch(t){return m()}}():m();var R=void 0,I=1,j=2,N=new F;function P(t,e){if(e.constructor===t.constructor)!function(t,e){e._state===I?U(t,e._result):e._state===j?L(t,e._result):M(e,void 0,function(e){C(t,e)},function(e){L(t,e)})}(t,e);else{var n=function(t){try{return t.then}catch(t){return N.error=t,N}}(e);n===N?L(t,N.error):void 0===n?U(t,e):a(n)?function(t,e,n){h(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?C(t,n):U(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(t,e,n):U(t,e)}}function C(t,e){var n;t===e?L(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?P(t,e):U(t,e)}function D(t){t._onerror&&t._onerror(t._result),B(t)}function U(t,e){t._state===R&&(t._result=e,t._state=I,0!==t._subscribers.length&&h(B,t))}function L(t,e){t._state===R&&(t._state=j,t._result=e,h(D,t))}function M(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+I]=n,i[o+j]=r,0===o&&t._state&&h(B,t)}function B(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?z(n,r,i,o):i(o);t._subscribers.length=0}}function F(){this.error=null}var q=new F;function z(t,e,n,r){var i,o,s,u,c=a(n);if(c){if((i=function(t,e){try{return t(e)}catch(t){return q.error=t,q}}(n,r))===q?(u=!0,o=i.error,i=null):s=!0,e===i)return void L(e,new TypeError("A promises callback cannot return that same promise."))}else i=r,s=!0;e._state!==R||(c&&s?C(e,i):u?L(e,o):t===I?U(e,i):t===j&&L(e,i))}function H(t,e){this._instanceConstructor=t,this.promise=new t(A),this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?U(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&U(this.promise,this._result))):L(this.promise,this._validationError())}H.prototype._validateInput=function(t){return l(t)},H.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},H.prototype._init=function(){this._result=new Array(this.length)};var V=H;H.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,r=0;e._state===R&&r<t;r++)this._eachEntry(n[r],r)},H.prototype._eachEntry=function(t,e){var n,r=this._instanceConstructor;"object"==typeof(n=t)&&null!==n?t.constructor===r&&t._state!==R?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(r.resolve(t),e):(this._remaining--,this._result[e]=t)},H.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===R&&(this._remaining--,t===j?L(r,n):this._result[e]=n),0===this._remaining&&U(r,this._result)},H.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,function(t){n._settledAt(I,e,t)},function(t){n._settledAt(j,e,t)})};var J=function(t){return new V(this,t).promise};var K=function(t){var e=new this(A);if(!l(t))return L(e,new TypeError("You must pass an array to race.")),e;var n=t.length;function r(t){C(e,t)}function i(t){L(e,t)}for(var o=0;e._state===R&&o<n;o++)M(this.resolve(t[o]),void 0,r,i);return e};var W=function(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return C(e,t),e};var $=function(t){var e=new this(A);return L(e,t),e},Y=0;var X=G;function G(t){this._id=Y++,this._state=void 0,this._result=void 0,this._subscribers=[],A!==t&&(a(t)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof G||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e(function(e){C(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t))}G.all=J,G.race=K,G.resolve=W,G.reject=$,G._setScheduler=function(t){c=t},G._setAsap=function(t){h=t},G._asap=h,G.prototype={constructor:G,then:function(t,e){var n=this._state;if(n===I&&!t||n===j&&!e)return this;var r=new this.constructor(A),i=this._result;if(n){var o=arguments[n-1];h(function(){z(n,r,o,i)})}else M(this,r,t,e);return r},catch:function(t){return this.then(null,t)}};var Q=function(){var t;if(void 0!==o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=X)},Z={Promise:X,polyfill:Q};void 0===(s=function(){return Z}.call(e,n,e,t))||(t.exports=s),Q()}).call(this)}).call(this,n(5),n(13).setImmediate,n(3))},function(t,e,n){var r;r=function(){};e=t.exports={Lexer:r("./lib/N3Lexer"),Parser:r("./lib/N3Parser"),Writer:r("./lib/N3Writer"),Store:r("./lib/N3Store"),StreamParser:r("./lib/N3StreamParser"),StreamWriter:r("./lib/N3StreamWriter"),Util:r("./lib/N3Util")};Object.keys(e).forEach(function(t){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return delete e[t],e[t]=n(67)("./N3"+t)}})})},function(t,e,n){var r=n(27).expandPrefixedName;function i(t,e){if(!(this instanceof i))return new i(t,e);this._size=0,this._graphs=Object.create(null),this._entities=Object.create(null),this._entities["><"]=0,this._entityCount=0,this._blankNodeIndex=0,e||!t||t[0]||(e=t,t=null),this._prefixes=Object.create(null),e&&e.prefixes&&this.addPrefixes(e.prefixes),t&&this.addTriples(t)}i.prototype={get size(){var t=this._size;if(null!==t)return t;var e,n,r=this._graphs;for(var i in r)for(var o in e=r[i].subjects)for(var s in n=e[o])t+=Object.keys(n[s]).length;return this._size=t},_addToIndex:function(t,e,n,r){var i=t[e]||(t[e]={});(i[n]||(i[n]={}))[r]=null},_removeFromIndex:function(t,e,n,r){var i,o=t[e],s=o[n];for(i in delete s[r],s)return;for(i in delete o[n],o)return;delete t[e]},_findInIndex:function(t,e,n,r,i,o,s,a){var u,c,l,f=[],h=Object.keys(this._entities);for(var p in e&&((u=t,t={})[e]=u[e]),t){var d=h[p];if(c=t[p])for(var v in n&&((u=c,c={})[n]=u[n]),c){var y=h[v];if(l=c[v])for(var g=(r?r in l?[r]:[]:Object.keys(l)),m=g.length-1;m>=0;m--){var w={subject:"",predicate:"",object:"",graph:a};w[i]=d,w[o]=y,w[s]=h[g[m]],f.push(w)}}}return f},_countInIndex:function(t,e,n,r){var i,o,s,a=0;for(var u in e&&((i=t,t={})[e]=i[e]),t)if(o=t[u])for(var c in n&&((i=o,o={})[n]=i[n]),o)(s=o[c])&&(r?r in s&&a++:a+=Object.keys(s).length);return a},addTriple:function(t,e,n,r){e||(r=t.graph,n=t.object,e=t.predicate,t=t.subject),r=r||"";var i=this._graphs[r];i||(i=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._entities;t=o[t]||(o[t]=++this._entityCount),e=o[e]||(o[e]=++this._entityCount),n=o[n]||(o[n]=++this._entityCount),this._addToIndex(i.subjects,t,e,n),this._addToIndex(i.predicates,e,n,t),this._addToIndex(i.objects,n,t,e),this._size=null},addTriples:function(t){for(var e=t.length-1;e>=0;e--)this.addTriple(t[e])},addPrefix:function(t,e){this._prefixes[t]=e},addPrefixes:function(t){for(var e in t)this.addPrefix(e,t[e])},removeTriple:function(t,e,n,r){e||(r=t.graph,n=t.object,e=t.predicate,t=t.subject),r=r||"";var i,o,s,a=this._entities,u=this._graphs;if((t=a[t])&&((e=a[e])&&(n=a[n])&&(i=u[r])&&(o=i.subjects[t])&&(s=o[e])&&n in s)){for(t in this._removeFromIndex(i.subjects,t,e,n),this._removeFromIndex(i.predicates,e,n,t),this._removeFromIndex(i.objects,n,t,e),null!==this._size&&this._size--,i.subjects)return;delete u[r]}},removeTriples:function(t){for(var e=t.length-1;e>=0;e--)this.removeTriple(t[e])},find:function(t,e,n,i){var o=this._prefixes;return this.findByIRI(r(t,o),r(e,o),r(n,o),r(i,o))},findByIRI:function(t,e,n,r){r=r||"";var i=this._graphs[r],o=this._entities;return i?t&&!(t=o[t])?[]:e&&!(e=o[e])?[]:n&&!(n=o[n])?[]:t?n?this._findInIndex(i.objects,n,t,e,"object","subject","predicate",r):this._findInIndex(i.subjects,t,e,null,"subject","predicate","object",r):e?this._findInIndex(i.predicates,e,n,null,"predicate","object","subject",r):n?this._findInIndex(i.objects,n,null,null,"object","subject","predicate",r):this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",r):[]},count:function(t,e,n,i){var o=this._prefixes;return this.countByIRI(r(t,o),r(e,o),r(n,o),r(i,o))},countByIRI:function(t,e,n,r){r=r||"";var i=this._graphs[r],o=this._entities;return i?t&&!(t=o[t])?0:e&&!(e=o[e])?0:n&&!(n=o[n])?0:t?n?this._countInIndex(i.objects,n,t,e):this._countInIndex(i.subjects,t,e,n):e?this._countInIndex(i.predicates,e,n,t):this._countInIndex(i.objects,n,t,e):0},createBlankNode:function(t){var e,n;if(t)for(e=t="_:"+t,n=1;this._entities[e];)e=t+n++;else do{e="_:b"+this._blankNodeIndex++}while(this._entities[e]);return this._entities[e]=++this._entityCount,e}},t.exports=i},function(t,e,n){var r=n(46).Transform,i=n(54),o=n(26);function s(t){if(!(this instanceof s))return new s(t);r.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var e=this,n=new o(t);n.parse(function(t,n){n&&e.push(n)||t&&e.emit("error",t)},this.emit.bind(this,"prefix")),this._transform=function(t,e,r){n.addChunk(t),r()},this._flush=function(t){n.end(),t()}}i.inherits(s,r),t.exports=s},function(t,e,n){t.exports=i;var r=n(28).EventEmitter;function i(){r.call(this)}n(8)(i,r),i.Readable=n(29),i.Writable=n(75),i.Duplex=n(76),i.Transform=n(77),i.PassThrough=n(78),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e,n){"use strict";(function(e,r){var i=n(18);t.exports=w;var o,s=n(48);w.ReadableState=m;n(28).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=n(49),c=n(19).Buffer,l=e.Uint8Array||function(){};var f=n(14);f.inherits=n(8);var h=n(70),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var d,v=n(71),y=n(51);f.inherits(w,u);var g=["error","close","destroy","pause","resume"];function m(t,e){o=o||n(9),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(52).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function w(t){if(o=o||n(9),!(this instanceof w))return new w(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,E(t)}(t,s)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?x(t,s,e,!1):T(t,s)):x(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function x(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&E(t)),T(t,e)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=y.destroy,w.prototype._undestroy=y.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},w.prototype.unshift=function(t){return b(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return d||(d=n(52).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var _=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=_?t=_:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function E(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(k,t):k(t))}function k(t){p("emit readable"),t.emit("readable"),I(t)}function T(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function A(t){p("readable nexttick read 0"),t.read(0)}function R(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function j(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function N(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function C(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}w.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):E(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&N(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(n,e))),null===(r=t>0?j(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&N(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:w;function c(e,r){p("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",g),t.removeListener("finish",m),t.removeListener("drain",f),t.removeListener("error",y),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",w),n.removeListener("data",v),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function l(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var f=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,I(t))}}(n);t.on("drain",f);var h=!1;var d=!1;function v(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==C(o.pipes,t))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function y(e){p("onerror",e),w(),t.removeListener("error",y),0===a(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",m),w()}function m(){p("onfinish"),t.removeListener("close",g),w()}function w(){p("unpipe"),n.unpipe(t)}return n.on("data",v),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",g),t.once("finish",m),t.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=C(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},w.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(A,this))}return n},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(R,t,e))}(this,t)),this},w.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause())))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=j}).call(this,n(3),n(5))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(28).EventEmitter},function(t,e,n){"use strict";(function(t){var r=n(68),i=n(69),o=n(48);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return z(F(e,t.length-n),t,n,r)}function b(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return b(t,e,n,r)}function _(t,e,n,r){return z(q(e),t,n,r)}function S(t,e,n,r){return z(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function C(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(3))},function(t,e,n){"use strict";var r=n(18);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(19).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var r=n(9),i=n(14);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(this,null,null)}function a(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(8),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])v(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,i){if(m(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation,o=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=l(t,i,r)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var c,b="",E=!1,T=["{","}"];(p(n)&&(E=!0,T=["[","]"]),S(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),_(n)&&(b=" "+f(n)),0!==s.length||E&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=E?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)k(e,String(s))?o.push(h(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}(t,n,r,a,s):s.map(function(e){return h(t,n,r,a,e,E)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,T)):T[0]+b+T[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function w(t){return b(t)&&"[object RegExp]"===E(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===E(t)}function _(t){return b(t)&&("[object Error]"===E(t)||t instanceof Error)}function S(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}e.debuglog=function(t){if(m(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){r.pid;s[t]=function(){e.format.apply(e,arguments)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=w,e.isObject=b,e.isDate=x,e.isError=_,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(79);function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){},e.inherits=n(8),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(3),n(5))},function(t,e,n){var r=n(46).Transform,i=n(54),o=n(31);function s(t){if(!(this instanceof s))return new s(t);r.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var e=this,n=new o({write:function(t,n,r){e.push(t),r&&r()},end:function(t){e.push(null),t&&t()}},t);this._transform=function(t,e,r){n.addTriple(t,r)},this._flush=function(t){n.end(t)}}i.inherits(s,r),t.exports=s},function(t,e){function n(t,e){for(var n in t)e[n]=t[n]}function r(t,e){var r=t.prototype;if(Object.create){var i=Object.create(e.prototype);r.__proto__=i}if(!(r instanceof e)){function o(){}o.prototype=e.prototype,n(r,o=new o),t.prototype=r=o}r.constructor!=t&&(r.constructor=t)}var i="http://www.w3.org/1999/xhtml",o={},s=o.ELEMENT_NODE=1,a=o.ATTRIBUTE_NODE=2,u=o.TEXT_NODE=3,c=o.CDATA_SECTION_NODE=4,l=o.ENTITY_REFERENCE_NODE=5,f=o.ENTITY_NODE=6,h=o.PROCESSING_INSTRUCTION_NODE=7,p=o.COMMENT_NODE=8,d=o.DOCUMENT_NODE=9,v=o.DOCUMENT_TYPE_NODE=10,y=o.DOCUMENT_FRAGMENT_NODE=11,g=o.NOTATION_NODE=12,m={},w={},b=(m.INDEX_SIZE_ERR=(w[1]="Index size error",1),m.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),m.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),x=(m.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),m.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),m.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),m.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),m.NOT_FOUND_ERR=(w[8]="Not found",8)),_=(m.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),m.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));m.INVALID_STATE_ERR=(w[11]="Invalid state",11),m.SYNTAX_ERR=(w[12]="Syntax error",12),m.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),m.NAMESPACE_ERR=(w[14]="Invalid namespace",14),m.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function S(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,w[t]),this.message=w[t],Error.captureStackTrace&&Error.captureStackTrace(this,S);return n.code=t,e&&(this.message=this.message+": "+e),n}function E(){}function k(t,e){this._node=t,this._refresh=e,T(this)}function T(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);nt(t,"length",r.length),n(r,t),t._inc=e}}function O(){}function A(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function R(t,e,n,r){if(r?e[A(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&U(i,t,r),function(t,e,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(i,t,n))}}function I(t,e,n){var r=A(e,n);if(!(r>=0))throw S(x,new Error(t.tagName+"@"+n));for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var o=t.ownerDocument;o&&(U(o,t,n),n.ownerElement=null)}}function j(t){if(this._features={},t)for(var e in t)this._features=t[e]}function N(){}function P(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function C(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(C(t,e))return!0}while(t=t.nextSibling)}function D(){}function U(t,e,n,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete e._nsMap[n.prefix?n.localName:""]}function L(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function M(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,L(t.ownerDocument,t),e}function B(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===y){var i=e.firstChild;if(null==i)return e;var o=e.lastChild}else i=o=e;var s=n?n.previousSibling:t.lastChild;i.previousSibling=s,o.nextSibling=n,s?s.nextSibling=i:t.firstChild=i,null==n?t.lastChild=o:n.previousSibling=o;do{i.parentNode=t}while(i!==o&&(i=i.nextSibling));return L(t.ownerDocument||t,t),e.nodeType==y&&(e.firstChild=e.lastChild=null),e}function F(){this._nsMap={}}function q(){}function z(){}function H(){}function V(){}function J(){}function K(){}function W(){}function $(){}function Y(){}function X(){}function G(){}function Q(){}function Z(t,e){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var s=[{namespace:o,prefix:null}];return et(this,n,t,e,s),n.join("")}function tt(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var s=n[o];if(s.prefix==r)return s.namespace!=i}return!0}function et(t,e,n,r,o){if(r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case s:o||(o=[]);o.length;var f=t.attributes,g=f.length,m=t.firstChild,w=t.tagName;n=i===t.namespaceURI||n,e.push("<",w);for(var b=0;b<g;b++){"xmlns"==(x=f.item(b)).prefix?o.push({prefix:x.localName,namespace:x.value}):"xmlns"==x.nodeName&&o.push({prefix:"",namespace:x.value})}for(b=0;b<g;b++){var x;if(tt(x=f.item(b),0,o)){var _=x.prefix||"",S=x.namespaceURI,E=_?" xmlns:"+_:" xmlns";e.push(E,'="',S,'"'),o.push({prefix:_,namespace:S})}et(x,e,n,r,o)}if(tt(t,0,o)){_=t.prefix||"",S=t.namespaceURI,E=_?" xmlns:"+_:" xmlns";e.push(E,'="',S,'"'),o.push({prefix:_,namespace:S})}if(m||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(w)){if(e.push(">"),n&&/^script$/i.test(w))for(;m;)m.data?e.push(m.data):et(m,e,n,r,o),m=m.nextSibling;else for(;m;)et(m,e,n,r,o),m=m.nextSibling;e.push("</",w,">")}else e.push("/>");return;case d:case y:for(m=t.firstChild;m;)et(m,e,n,r,o),m=m.nextSibling;return;case a:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,P),'"');case u:return e.push(t.data.replace(/[<&]/g,P));case c:return e.push("<![CDATA[",t.data,"]]>");case p:return e.push("\x3c!--",t.data,"--\x3e");case v:var k=t.publicId,T=t.systemId;if(e.push("<!DOCTYPE ",t.name),k)e.push(' PUBLIC "',k),T&&"."!=T&&e.push('" "',T),e.push('">');else if(T&&"."!=T)e.push(' SYSTEM "',T,'">');else{var O=t.internalSubset;O&&e.push(" [",O,"]"),e.push(">")}return;case h:return e.push("<?",t.target," ",t.data,"?>");case l:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function nt(t,e,n){t[e]=n}S.prototype=Error.prototype,n(m,S),E.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)et(this[r],n,t,e);return n.join("")}},k.prototype.item=function(t){return T(this),this[t]},r(k,E),O.prototype={length:0,item:E.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new S(_);var n=this.getNamedItem(t.nodeName);return R(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new S(_);return e=this.getNamedItemNS(t.namespaceURI,t.localName),R(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return I(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return I(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}},j.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!(!n||e&&!(e in n))},createDocument:function(t,e,n){var r=new D;if(r.implementation=this,r.childNodes=new E,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new K;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}},N.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return B(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return M(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,n,r){var i=new n.constructor;for(var o in n){var u=n[o];"object"!=typeof u&&u!=i[o]&&(i[o]=u)}n.childNodes&&(i.childNodes=new E);i.ownerDocument=e;switch(i.nodeType){case s:var c=n.attributes,l=i.attributes=new O,f=c.length;l._ownerElement=i;for(var h=0;h<f;h++)i.setAttributeNode(t(e,c.item(h),!0));break;case a:r=!0}if(r)for(var p=n.firstChild;p;)i.appendChild(t(e,p,r)),p=p.nextSibling;return i}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==u&&t.nodeType==u?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var r in n)if(n[r]==t)return r;e=e.nodeType==a?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==a?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},n(o,N),n(o,N.prototype),D.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==y){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return null==this.documentElement&&t.nodeType==s&&(this.documentElement=t),B(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),M(this,t)},importNode:function(t,e){return function t(e,n,r){var i;switch(n.nodeType){case s:(i=n.cloneNode(!1)).ownerDocument=e;case y:break;case a:r=!0}i||(i=n.cloneNode(!1));i.ownerDocument=e;i.parentNode=null;if(r)for(var o=n.firstChild;o;)i.appendChild(t(e,o,r)),o=o.nextSibling;return i}(this,t,e)},getElementById:function(t){var e=null;return C(this.documentElement,function(n){if(n.nodeType==s&&n.getAttribute("id")==t)return e=n,!0}),e},createElement:function(t){var e=new F;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new E,(e.attributes=new O)._ownerElement=e,e},createDocumentFragment:function(){var t=new X;return t.ownerDocument=this,t.childNodes=new E,t},createTextNode:function(t){var e=new H;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new V;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new J;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new G;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new q;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Y;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new F,r=e.split(":"),i=n.attributes=new O;return n.childNodes=new E,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new q,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},r(D,N),F.prototype={nodeType:s,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===y?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,L(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new k(this,function(e){var n=[];return C(e,function(r){r===e||r.nodeType!=s||"*"!==t&&r.tagName!=t||n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new k(this,function(n){var r=[];return C(n,function(i){i===n||i.nodeType!==s||"*"!==t&&i.namespaceURI!==t||"*"!==e&&i.localName!=e||r.push(i)}),r})}},D.prototype.getElementsByTagName=F.prototype.getElementsByTagName,D.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,r(F,N),q.prototype.nodeType=a,r(q,N),z.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(w[b])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},r(z,N),H.prototype={nodeName:"#text",nodeType:u,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(H,z),V.prototype={nodeName:"#comment",nodeType:p},r(V,z),J.prototype={nodeName:"#cdata-section",nodeType:c},r(J,z),K.prototype.nodeType=v,r(K,N),W.prototype.nodeType=g,r(W,N),$.prototype.nodeType=f,r($,N),Y.prototype.nodeType=l,r(Y,N),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=y,r(X,N),G.prototype.nodeType=h,r(G,N),Q.prototype.serializeToString=function(t,e,n){return Z.call(t,e,n)},N.prototype.toString=Z;try{if(Object.defineProperty){Object.defineProperty(k.prototype,"length",{get:function(){return T(this),this.$$length}}),Object.defineProperty(N.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case s:case y:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case s:case y:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),nt=function(t,e,n){t["$$"+e]=n}}}catch(t){}e.DOMImplementation=j,e.XMLSerializer=Q},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(6),c=n(11),l=n(17),f=n(12),h=n(10),p=n(0),d=n(1),v=n(33),y=n(21),g=n(22),m=function(t){function e(t,n,r,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=o(this,s(e).call(this))).termType=e.termType,a.statements=t||[],a.constraints=n||[],a.initBindings=r||[],a.optional=i||[],a}var n,r,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,d),n=e,(r=[{key:"add",value:function(t,e,n,r){return this.statements.push(new y(t,e,n,r))}},{key:"addStatement",value:function(t){return this.statements.push(t)}},{key:"bnode",value:function(t){return new u(t)}},{key:"addAll",value:function(t){var e=this;t.forEach(function(t){e.add(t.subject,t.predicate,t.object,t.graph)})}},{key:"any",value:function(t,e,n,r){var i=this.anyStatementMatching(t,e,n,r);if(null!=i)return null==t?i.subject:null==e?i.predicate:null==n?i.object:void 0}},{key:"anyValue",value:function(t,e,n,r){var i=this.any(t,e,n,r);return i?i.value:void 0}},{key:"anyStatementMatching",value:function(t,e,n,r){var i=this.statementsMatching(t,e,n,r,!0);if(i&&0!==i.length)return i[0]}},{key:"statementsMatching",value:function(t,e,n,r,i){return this.statements.filter(function(i){return(!t||t.sameTerm(i.subject))&&(!e||e.sameTerm(i.predicate))&&(!n||t.sameTerm(i.object))&&(!r||r.sameTerm(i.subject))})}},{key:"bottomTypeURIs",value:function(t){var e,n,r,i,o,s,a;for(i in e=[],t)if(t.hasOwnProperty(i)){for(a=t[i],n=!0,r=0,o=(s=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.sym(i))).length;r<o;r++)if(s[r].uri in t){n=!1;break}n&&(e[i]=a)}return e}},{key:"collection",value:function(){return new l}},{key:"each",value:function(t,e,n,r){var i,o,s,a,u,c,l,f,h,p=[],d=this.statementsMatching(t,e,n,r,!1);if(null==t)for(o=0,c=d.length;o<c;o++)i=d[o],p.push(i.subject);else if(null==e)for(s=0,l=d.length;s<l;s++)i=d[s],p.push(i.predicate);else if(null==n)for(a=0,f=d.length;a<f;a++)i=d[a],p.push(i.object);else if(null==r)for(u=0,h=d.length;u<h;u++)i=d[u],p.push(i.why);return p}},{key:"equals",value:function(t){return!!t&&this.hashString()===t.hashString()}},{key:"findMembersNT",value:function(t){var e,n,r,i,o,s,a,u,c,l,f,h,p,d,v,y,g,m,w,b,x;for(b in(m={})[t.toNT()]=!0,c={},h=this.transitiveClosure(m,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0))if(h.hasOwnProperty(b)){for(e=0,r=(p=this.statementsMatching(void 0,this.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(b))).length;e<r;e++)c[(w=p[e]).subject.toNT()]=w;for(n=0,i=(d=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(b))).length;n<i;n++)for(l=d[n],u=0,o=(v=this.statementsMatching(void 0,l)).length;u<o;u++)c[(w=v[u]).subject.toNT()]=w;for(f=0,s=(y=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(b))).length;f<s;f++)for(l=y[f],x=0,a=(g=this.statementsMatching(void 0,l)).length;x<a;x++)c[(w=g[x]).object.toNT()]=w}return c}},{key:"findMemberURIs",value:function(t){return this.NTtoURI(this.findMembersNT(t))}},{key:"findSubClassesNT",value:function(t){var e={};return e[t.toNT()]=!0,this.transitiveClosure(e,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(t){var e={};return e[t.toNT()]=!0,this.transitiveClosure(e,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(t){var e,n,r,i,o,s,a,u,c,l,f,h,p,d,v;for(c="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",v=[],e=0,r=(l=this.statementsMatching(t,void 0,void 0)).length;e<r;e++)if((d=l[e]).predicate.uri===c)v[d.object.toNT()]=d;else for(n=0,i=(f=this.each(d.predicate,this.sym("http://www.w3.org/2000/01/rdf-schema#domain"))).length;n<i;n++)v[f[n].toNT()]=d;for(a=0,o=(h=this.statementsMatching(void 0,void 0,t)).length;a<o;a++)for(d=h[a],u=0,s=(p=this.each(d.predicate,this.sym("http://www.w3.org/2000/01/rdf-schema#range"))).length;u<s;u++)v[p[u].toNT()]=d;return this.transitiveClosure(v,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(t){return this.NTtoURI(this.findTypesNT(t))}},{key:"connectedStatements",value:function(t,e,n){n=n||[];for(var r=[t],i=[],o=[],s=[],a=this,u=function(t){var u=function(t){"BlankNode"!==t.termType||i[t.value]||(i[t.value]=!0,r.push(t))},c=a.statementsMatching(null,null,t,e).concat(a.statementsMatching(t,null,null,e));(c=c.filter(function(t){if(n[t.predicate.uri])return!1;var e=t.toNT();return!o[e]&&(o[e]=!0,!0)})).forEach(function(t,e){u(t.subject),u(t.object)}),s=s.concat(c)};r.length;)u(r.shift());return s}},{key:"formula",value:function(){return new e}},{key:"fromNT",value:function(t){var e,n,r;switch(t[0]){case"<":return this.sym(t.slice(1,-1));case'"':if(r=void 0,e=void 0,(n=t.lastIndexOf('"'))<t.length-1)if("@"===t[n+1])r=t.slice(n+2);else{if("^^"!==t.slice(n+1,n+3))throw new Error("Can't convert string from NT: "+t);e=this.fromNT(t.slice(n+3))}return t=(t=(t=(t=t.slice(1,n)).replace(/\\"/g,'"')).replace(/\\n/g,"\n")).replace(/\\\\/g,"\\"),this.literal(t,r,e);case"_":return new u(t.slice(2));case"?":return new g(t.slice(1))}throw new Error("Can't convert from NT: "+t)}},{key:"holds",value:function(t,e,n,r){var i;if(1===arguments.length){if(!t)return!0;if(t instanceof Array){for(i=0;i<t.length;i++)if(!this.holds(t[i]))return!1;return!0}if(t instanceof y)return this.holds(t.subject,t.predicate,t.object,t.why);if(t.statements)return this.holds(t.statements)}return null!=this.anyStatementMatching(t,e,n,r)}},{key:"holdsStatement",value:function(t){return this.holds(t.subject,t.predicate,t.object,t.why)}},{key:"list",value:function(t){var e=new l;return t.forEach(function(t){e.append(t)}),e}},{key:"literal",value:function(t,e,n){return new f(""+t,e,n)}},{key:"NTtoURI",value:function(t){var e,n,r={};for(e in t)t.hasOwnProperty(e)&&(n=t[e],"<"===e[0]&&(r[e.slice(1,-1)]=n));return r}},{key:"serialize",value:function(t,e,n){var r,i,o;switch((o=v(this)).suggestNamespaces(this.namespaces),o.setBase(t),i=n?this.statementsMatching(void 0,void 0,void 0,n):this.statements,null!=e?e:"text/n3"){case"application/rdf+xml":r=o.statementsToXML(i);break;case"text/n3":case"text/turtle":r=o.statementsToN3(i);break;default:throw new Error("serialize: Content-type "+e+" not supported.")}return r}},{key:"substitute",value:function(t){var n=this.statements.map(function(e){return e.substitute(t)}),r=new e;return r.add(n),r}},{key:"sym",value:function(t,e){if(e)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return new p(t)}},{key:"the",value:function(t,e,n,r){var i=this.any(t,e,n,r);return null==i&&h.error("No value found for the() {"+t+" "+e+" "+n+"}."),i}},{key:"transitiveClosure",value:function(t,e,n){var r,i,o,s,a,u={};Object.assign(u,t);for(var c={};;){if(null==(a=function(){for(var t in u)if(u.hasOwnProperty(t))return t}()))return c;for(r=0,i=(s=n?this.each(void 0,e,this.fromNT(a)):this.each(this.fromNT(a),e)).length;r<i;r++)(o=s[r].toNT())in c||o in u||(u[o]=u[a]);c[a]=u[a],delete u[a]}}},{key:"topTypeURIs",value:function(t){var e,n,r,i,o,s,a;for(n in s=[],t)if(t.hasOwnProperty(n)){for(a=t[n],i=0,e=0,r=(o=this.each(this.sym(n),this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"))).length;e<r;e++)if("http://www.w3.org/2000/01/rdf-schema#Resource"!==o[e].uri){i++;break}i||(s[n]=a)}return s["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete s["http://www.w3.org/2000/01/rdf-schema#Resource"],s["http://www.w3.org/2002/07/owl#Thing"]&&delete s["http://www.w3.org/2002/07/owl#Thing"],s}},{key:"toString",value:function(){return"{"+this.statements.join("\n")+"}"}},{key:"whether",value:function(t,e,n,r){return this.statementsMatching(t,e,n,r,!1).length}}])&&i(n.prototype,r),c&&i(n,c),e}();m.termType="Graph",m.prototype.classOrder=c.Graph,m.prototype.isVar=0,m.prototype.ns=n(16),m.prototype.variable=function(t){return new g(t)},t.exports=m},function(t,e,n){"use strict";t.exports=function t(e,n,p,d,v){d=d||"text/turtle";d=d.split(";")[0];try{if("text/n3"===d||"text/turtle"===d){var y=a(n,n,p,p,null,null,"",null);y.loadBuf(e),x()}else if("application/rdf+xml"===d){var g=new l(n);g.parse(h.parseXML(e),p,n.sym(p)),x()}else if("application/xhtml+xml"===d)c(h.parseXML(e,{contentType:"application/xhtml+xml"}),n,p),x();else if("text/html"===d)c(h.parseXML(e,{contentType:"text/html"}),n,p),x();else if("application/sparql-update"===d)f(e,n,p),x();else{if("application/ld+json"!==d&&"application/nquads"!==d&&"application/n-quads"!==d)throw new Error("Don't know how to parse "+d+" yet");var m=s.Parser(),w=[];if("application/ld+json"===d){var b;try{b=JSON.parse(e)}catch(t){return v(t,null)}i.toRDF(b,{format:"application/nquads",base:p},_)}else _(null,e)}}catch(t){!function(t){if("application/ld+json"!==d||"application/nquads"!==d||"application/n-quads"!==d){if(!v)throw new Error("Error trying to parse <"+p+"> as "+d+":\n"+t+":\n"+t.stack);v(t,n)}}(t)}t.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function x(){v&&v(null,n)}function _(t,e){t&&v(t,n);try{m.parse(e,S)}catch(t){v(t,n)}}function S(t,e,r){if(t&&v(t,n),e)w.push(e);else{for(var i=0;i<w.length;i++)E(n,w[i]);v(null,n)}}function E(t,e){var n=k(e.subject),r=k(e.predicate),i=k(e.object),o=null;e.graph&&(o=k(e.graph)),t.add(n,r,i,o)}function k(t){var e;if(s.Util.isLiteral(t)){e=s.Util.getLiteralValue(t);var n=s.Util.getLiteralLanguage(t),i=new u(s.Util.getLiteralType(t));return new o(e,n,i)}return s.Util.isIRI(t)?new u(t):s.Util.isBlank(t)?(e=t.substring(2,t.length),new r(e)):null}};var r=n(6),i=n(41),o=n(12),s=n(43),a=n(24),u=n(0),c=n(35).parseRDFaDOM,l=n(36),f=n(59),h=n(4)},function(t,e,n){"use strict";t.exports=function(t,e,n){var o,s,a,u=["INSERT","DELETE","WHERE"],c=i("http://www.w3.org/ns/pim/patch#"),l=r(e,e,n,n,null,null,"",null),f={},h=function(t,e,n,r,i){return"Line "+(e+1)+" of <"+t+">: Bad syntax:\n   "+i+'\n   at: "'+n.slice(r,r+30)+'"'};o=0;var p=e.sym(n+"#query");f.query=p;for(;;){if((s=l.skipSpace(t,o))<0)return f;if(";"===t[s]){if((o=l.skipSpace(t,s+1))<0)return f;s=o}var d=!1;for(a=0;a<u.length;a++){var v=u[a];if(t.slice(s,s+v.length)===v){if((o=l.skipSpace(t,s+v.length))<0)throw h(l._thisDoc,l.lines,t,s+v.length,"found EOF, needed {...} after "+v);if(("INSERT"===v||"DELETE"===v)&&"DATA"===t.slice(o,o+4)){if((s=l.skipSpace(t,o+4))<0)throw h(l._thisDoc,l.lines,t,o+4,"needed {...} after INSERT DATA "+v);o=s}var y=[];if((s=l.node(t,o,y))<0)throw h(l._thisDoc,l.lines,t,o,"bad syntax or EOF in {...} after "+v);f[v.toLowerCase()]=y[0],e.add(p,c(v.toLowerCase()),y[0]),d=!0,o=s}}if(!d&&"@prefix"===t.slice(s,s+7)){if((o=l.directive(t,s))<0)throw h(l._thisDoc,l.lines,t,o,"bad syntax or EOF after @prefix ");o=l.checkDot(t,o),d=!0}if(!d)throw h(l._thisDoc,l.lines,t,s,"Unknown syntax at start of statememt: '"+t.slice(s).slice(0,20)+"'")}};var r=n(24),i=n(16)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=n(20).namedNode,a=function(){function t(e,n){r(this,t),this.parent=e,this.via=n,this.connected=!1,this.pending={},this.subscribed={},this.socket={};try{this.socket=new WebSocket(n),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError}catch(t){this.onError(t)}}return o(t,[{key:"_decode",value:function(t){var e,n,r,i,o,s,a;for(n in i={},o=function(){var n,r,i,o;for(o=[],n=0,r=(i=t.split("&")).length;n<r;n++)e=i[n],o.push(e.split("="));return o}())e=o[n],r=(s=[decodeURIComponent(e[0]),decodeURIComponent(e[1])])[0],a=s[1],null==i[r]&&(i[r]=[]),i[r].push(a);return i}},{key:"_send",value:function(t,e,n){var r,i;return i=[t,e,n].join(" "),"function"==typeof(r=this.socket).send?r.send(i):void 0}},{key:"_subscribe",value:function(t){return this._send("sub",t,""),this.subscribed[t]=!0,this.subscribed[t]}},{key:"onClose",value:function(t){var e;for(e in this.connected=!1,this.subscribed)this.pending[e]=!0;return this.subscribed={},this.subscribed}},{key:"onError",value:function(t){throw new Error("onError"+t)}},{key:"onMessage",value:function(t){var e,n;return"ping"===(n=t.data.split(" "))[0]?"function"==typeof(e=this.socket).send?e.send("pong "+n.slice(1).join(" ")):void 0:"pub"===n[0]?this.parent.onUpdate(n[1],this._decode(n[2])):void 0}},{key:"onOpen",value:function(t){var e,n;for(n in this.connected=!0,e=[],this.pending)delete this.pending[n],e.push(this._subscribe(n));return e}},{key:"subscribe",value:function(t){return this.connected?this._subscribe(t):(this.pending[t]=!0,this.pending[t])}}]),t}(),u=function(){function t(e){r(this,t),this.fetcher=e,this.graph={},this.via={},this.fetcher.addCallback("headers",this.onHeaders)}return o(t,[{key:"onHeaders",value:function(t){var e,n,r;return null==t.headers||("undefined"==typeof WebSocket||null===WebSocket||(e=t.headers.etag,r=t.headers["updates-via"],n=t.uri,e&&r&&(this.graph[n]={etag:e,via:r},this.register(r,n)),!0))}},{key:"onUpdate",value:function(t,e){return this.fetcher.refresh(s(t))}},{key:"register",value:function(t,e){return null==this.via[t]&&(this.via[t]=new a(this,t)),this.via[t].subscribe(e)}}]),t}();t.exports.UpdatesSocket=a,t.exports.UpdatesVia=u},function(t,e,n){t.exports=n(62)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=u(n(38)),o=u(n(89)),s=u(n(90)),a=u(n(37));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var s=e[i](o),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){r("next",t)},function(t){r("throw",t)});t(a)}("next")})}}var l=function(t){this.$rdf=i.default,this.options=t,this.solidAuthing=null,this.options.clientId&&this.options.secret?this.solidAuthing=new o.default({clientId:t.clientId,secret:t.secret}):this.initInstance(),this.fileClient=new s.default,this.IPFSFolderName="ipfs",this.IPFSHashFolderName="hash",this.IPFSTopFolder=""+this.options.url+this.IPFSFolderName+"/",this.IPFSHashFolder=""+this.IPFSTopFolder+this.IPFSHashFolderName+"/"};l.prototype={initInstance:function(){var t=this;return c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.solidAuthing){e.next=6;break}return e.next=3,t.solidAuthing.getAuthingInsatance();case 3:t.solidAuth=e.sent,e.next=7;break;case 6:t.solidAuth=a.default;case 7:case"end":return e.stop()}},e,t)}))()},checkIPFSFolderExists:function(t){var e=this;return c(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.fileClient.readFolder(t);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},n,e)}))()},createIPFSFolder:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkIPFSFolderExists(t.IPFSTopFolder);case 2:return n=e.sent,e.next=5,t.checkIPFSFolderExists(t.IPFSHashFolder);case 5:if(r=e.sent,!n||!r){e.next=8;break}return e.abrupt("return",!0);case 8:if(n){e.next=22;break}return e.next=11,t.fileClient.createFolder(t.IPFSTopFolder);case 11:if(e.sent){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,t.fileClient.createFolder(t.IPFSHashFolder);case 18:return i=e.sent,e.abrupt("return",i);case 20:e.next=30;break;case 22:if(!r){e.next=26;break}return e.abrupt("return",!0);case 26:return e.next=28,t.fileClient.createFolder(t.IPFSHashFolder);case 28:return o=e.sent,e.abrupt("return",o);case 30:case"end":return e.stop()}},e,t)}))()},storeHash:function(t){var e=this;return c(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.hash){n.next=2;break}throw" hash ";case 2:if(e.options.url){n.next=4;break}throw" url";case 4:return n.next=6,e.solidAuth.login();case 6:return n.next=8,e.checkIPFSFolderExists();case 8:if(r=n.sent,i=null,!r){n.next=16;break}return n.next=13,e.fileClient.createFile(""+e.IPFSHashFolder+t.hash+".txt","text/plain",t.hash);case 13:i=n.sent,n.next=26;break;case 16:return n.next=18,e.createIPFSFolder();case 18:if(!n.sent){n.next=25;break}return n.next=22,e.fileClient.createFile(""+e.IPFSHashFolder+t.hash+".txt","text/plain",t.hash);case 22:i=n.sent,n.next=26;break;case 25:return n.abrupt("return",!1);case 26:return n.abrupt("return",i);case 27:case"end":return n.stop()}},n,e)}))()}},"object"===("undefined"==typeof window?"undefined":r(window))&&(window.SolidIPFS=l),e.default=l},function(t,e,n){(function(n,r){var i;!function(){var o,s,a={};function u(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(o,arguments)}}null!=(o=this)&&(s=o.async),a.noConflict=function(){return o.async=s,a};var c=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===c.call(t)},f=function(t,e){for(var n=0;n<t.length;n+=1)e(t[n],n,t)},h=function(t,e){if(t.map)return t.map(e);var n=[];return f(t,function(t,r,i){n.push(e(t,r,i))}),n},p=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};void 0!==n&&n.nextTick?(a.nextTick=n.nextTick,a.setImmediate=void 0!==r?function(t){r(t)}:a.nextTick):"function"==typeof r?(a.nextTick=function(t){r(t)},a.setImmediate=a.nextTick):(a.nextTick=function(t){setTimeout(t,0)},a.setImmediate=a.nextTick),a.each=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0;function i(e){e?(n(e),n=function(){}):(r+=1)>=t.length&&n()}f(t,function(t){e(t,u(i))})},a.forEach=a.each,a.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1)>=t.length?n():i()})};i()},a.forEachSeries=a.eachSeries,a.eachLimit=function(t,e,n,r){d(e).apply(null,[t,n,r])},a.forEachLimit=a.eachLimit;var d=function(t){return function(e,n,r){if(r=r||function(){},!e.length||t<=0)return r();var i=0,o=0,s=0;!function a(){if(i>=e.length)return r();for(;s<t&&o<e.length;)s+=1,n(e[(o+=1)-1],function(t){t?(r(t),r=function(){}):(s-=1,(i+=1)>=e.length?r():a())})}()}},v=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a.each].concat(e))}},y=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a.eachSeries].concat(e))}},g=function(t,e,n,r){if(e=h(e,function(t,e){return{index:e,value:t}}),r){var i=[];t(e,function(t,e){n(t.value,function(n,r){i[t.index]=r,e(n)})},function(t){r(t,i)})}else t(e,function(t,e){n(t.value,function(t){e(t)})})};a.map=v(g),a.mapSeries=y(g),a.mapLimit=function(t,e,n,r){return m(e)(t,n,r)};var m=function(t){return function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[d(t)].concat(n))}}(t,g)};a.reduce=function(t,e,n,r){a.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(t,e,n,r){var i=h(t,function(t){return t}).reverse();a.reduce(i,e,n,r)},a.foldr=a.reduceRight;var w=function(t,e,n,r){var i=[];t(e=h(e,function(t,e){return{index:e,value:t}}),function(t,e){n(t.value,function(n){n&&i.push(t),e()})},function(t){r(h(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};a.filter=v(w),a.filterSeries=y(w),a.select=a.filter,a.selectSeries=a.filterSeries;var b=function(t,e,n,r){var i=[];t(e=h(e,function(t,e){return{index:e,value:t}}),function(t,e){n(t.value,function(n){n||i.push(t),e()})},function(t){r(h(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};a.reject=v(b),a.rejectSeries=y(b);var x=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(t){r()})};a.detect=v(x),a.detectSeries=y(x),a.some=function(t,e,n){a.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(t){n(!1)})},a.any=a.some,a.every=function(t,e,n){a.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(t){n(!0)})},a.all=a.every,a.sortBy=function(t,e,n){a.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,h(e.sort(function(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}),function(t){return t.value}))})},a.auto=function(t,e){e=e||function(){};var n=p(t),r=n.length;if(!r)return e();var i={},o=[],s=function(t){o.unshift(t)},u=function(){r--,f(o.slice(0),function(t){t()})};s(function(){if(!r){var t=e;e=function(){},t(null,i)}}),f(n,function(n){var r=l(t[n])?t[n]:[t[n]],c=function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),t){var o={};f(p(i),function(t){o[t]=i[t]}),o[n]=r,e(t,o),e=function(){}}else i[n]=r,a.setImmediate(u)},h=r.slice(0,Math.abs(r.length-1))||[],d=function(){return e=function(t,e){return t&&i.hasOwnProperty(e)},r=!0,((t=h).reduce?t.reduce(e,r):(f(t,function(t,n,i){r=e(r,t,n,i)}),r))&&!i.hasOwnProperty(n);var t,e,r};if(d())r[r.length-1](c,i);else{var v=function(){d()&&(!function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)}(v),r[r.length-1](c,i))};s(v)}})},a.retry=function(t,e,n){var r=[];"function"==typeof t&&(n=e,e=t,t=5),t=parseInt(t,10)||5;var i=function(i,o){for(var s=function(t,e){return function(n){t(function(t,r){n(!t||e,{err:t,result:r})},o)}};t;)r.push(s(e,!(t-=1)));a.series(r,function(t,e){e=e[e.length-1],(i||n)(e.err,e.result)})};return n?i():i},a.waterfall=function(t,e){if(e=e||function(){},!l(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();o?i.push(r(o)):i.push(e),a.setImmediate(function(){t.apply(null,i)})}}};r(a.iterator(t))()};var _=function(t,e,n){if(n=n||function(){},l(e))t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(p(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(t){n(t,r)})}};a.parallel=function(t,e){_({map:a.map,each:a.each},t,e)},a.parallelLimit=function(t,e,n){_({map:m(e),each:d(e)},t,n)},a.series=function(t,e){if(e=e||function(){},l(t))a.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};a.eachSeries(p(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(t){e(t,n)})}},a.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},a.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var S=function(t,e,n,r){var i=[];t(e,function(t,e){n(t,function(t,n){i=i.concat(n||[]),e(t)})},function(t){r(t,i)})};a.concat=v(S),a.concatSeries=y(S),a.whilst=function(t,e,n){t()?e(function(r){if(r)return n(r);a.whilst(t,e,n)}):n()},a.doWhilst=function(t,e,n){t(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?a.doWhilst(t,e,n):n()})},a.until=function(t,e,n){t()?n():e(function(r){if(r)return n(r);a.until(t,e,n)})},a.doUntil=function(t,e,n){t(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?n():a.doUntil(t,e,n)})},a.queue=function(t,e){function n(t,e,n,r){if(t.started||(t.started=!0),l(e)||(e=[e]),0==e.length)return a.setImmediate(function(){t.drain&&t.drain()});f(e,function(e){var i={data:e,callback:"function"==typeof r?r:null};n?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}void 0===e&&(e=1);var r=0,i={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){n(i,t,!1,e)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(t,e){n(i,t,!0,e)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var e=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var n=u(function(){r-=1,e.callback&&e.callback.apply(e,arguments),i.drain&&i.tasks.length+r===0&&i.drain(),i.process()});t(e.data,n)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return i.tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)a.setImmediate(i.process)}}};return i},a.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}var r=a.queue(t,e);return r.push=function(t,e,i){!function(t,e,r,i){if(t.started||(t.started=!0),l(e)||(e=[e]),0==e.length)return a.setImmediate(function(){t.drain&&t.drain()});f(e,function(e){var o={data:e,priority:r,callback:"function"==typeof i?i:null};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,o,n)+1,0,o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}(r,t,e,i)},delete r.unshift,r},a.cargo=function(t,e){var n=!1,r=[],i={tasks:r,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,n){l(t)||(t=[t]),f(t,function(t){r.push({data:t,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&r.length===e&&i.saturated()}),a.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s="number"==typeof e?r.splice(0,e):r.splice(0,r.length),a=h(s,function(t){return t.data});i.empty&&i.empty(),n=!0,t(a,function(){n=!1;var t=arguments;f(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return r.length},running:function(){return n}};return i};var E=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error:console[t]&&f(n,function(t){}))}]))}};a.log=E("log"),a.dir=E("dir"),a.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in n?a.nextTick(function(){o.apply(null,n[s])}):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([function(){n[s]=arguments;var t=r[s];delete r[s];for(var e=0,i=t.length;e<i;e++)t[e].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=t,i},a.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},a.times=function(t,e,n){for(var r=[],i=0;i<t;i++)r.push(i);return a.map(r,e,n)},a.timesSeries=function(t,e,n){for(var r=[],i=0;i<t;i++)r.push(i);return a.mapSeries(r,e,n)},a.seq=function(){var t=arguments;return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();a.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){r.apply(e,[t].concat(n))})}},a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))};var k=function(t,e){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return t(e,function(t,e){t.apply(n,r.concat([e]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};a.applyEach=v(k),a.applyEachSeries=y(k),a.forever=function(t,e){!function n(r){if(r){if(e)return e(r);throw r}t(n)}()},t.exports?t.exports=a:void 0===(i=function(){return a}.apply(e,[]))||(t.exports=i)}()}).call(this,n(5),n(13).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},h.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(5))},function(t,e){},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){var r={"./N3Lexer":25,"./N3Lexer.js":25,"./N3Parser":26,"./N3Parser.js":26,"./N3Store":44,"./N3Store.js":44,"./N3StreamParser":45,"./N3StreamParser.js":45,"./N3StreamWriter":55,"./N3StreamWriter.js":55,"./N3Util":27,"./N3Util.js":27,"./N3Writer":31,"./N3Writer.js":31};function i(t){var e=o(t);return n(e)}function o(t){var e=r[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=67},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,l=s>0?r-4:r,f=0;f<l;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){},function(t,e,n){"use strict";var r=n(19).Buffer,i=n(72);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation"),r=!0}return t.apply(this,arguments)}}}).call(this,n(3))},function(t,e,n){"use strict";t.exports=o;var r=n(53),i=n(14);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(8),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(30)},function(t,e,n){t.exports=n(9)},function(t,e,n){t.exports=n(29).Transform},function(t,e,n){t.exports=n(29).PassThrough},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(1),c=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).termType="DefaultGraph",t.value="",t}var n,r,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,u),n=e,(r=[{key:"toCanonical",value:function(){return this.value}}])&&i(n.prototype,r),c&&i(n,c),e}();t.exports=c},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){function r(t){this.options=t||{locator:{}}}function i(){this.cdata=!1}function o(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function s(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function a(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function u(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}r.prototype.parseFromString=function(t,e){var n=this.options,r=new c,o=n.domBuilder||new i,a=n.errorHandler,u=n.locator,l=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&o.setDocumentLocator(u),r.errorHandler=function(t,e,n){if(!t){if(e instanceof i)return e;t=e}var r={},o=t instanceof Function;function a(e){var i=t[e];!i&&o&&(i=2==t.length?function(n){t(e,n)}:t),r[e]=i&&function(t){i("[xmldom "+e+"]\t"+t+s(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),r}(a,o,u),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(f.nbsp="",f.copy="",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,l,f):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,s=i.createElementNS(t,n||e),a=r.length;u(this,s),this.currentElement=s,this.locator&&o(this.locator,s);for(var c=0;c<a;c++){t=r.getURI(c);var l=r.getValue(c),f=(n=r.getQName(c),i.createAttributeNS(t,n));this.locator&&o(r.getLocator(c),f),f.value=f.nodeValue=l,s.setAttributeNode(f)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&o(this.locator,n),u(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=a.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=a.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&o(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&o(this.locator,i),u(this,i)}},warning:function(t){},error:function(t){},fatalError:function(t){throw t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){i.prototype[t]=function(){return null}});var c=n(83).XMLReader,l=e.DOMImplementation=n(56).DOMImplementation;e.XMLSerializer=n(56).XMLSerializer,e.DOMParser=r},function(t,e){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),o=0,s=1,a=2,u=3,c=4,l=5,f=6,h=7;function p(){}function d(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function v(t,e,n,r,i,p){for(var d,v=++e,y=o;;){var g=t.charAt(v);switch(g){case"=":if(y===s)d=t.slice(e,v),y=u;else{if(y!==a)throw new Error("attribute equal must after attrName");y=u}break;case"'":case'"':if(y===u||y===s){if(y===s&&(p.warning('attribute value must after "="'),d=t.slice(e,v)),e=v+1,!((v=t.indexOf(g,e))>0))throw new Error("attribute value no end '"+g+"' match");m=t.slice(e,v).replace(/&#?\w+;/g,i),n.add(d,m,e-1),y=l}else{if(y!=c)throw new Error('attribute value must after "="');m=t.slice(e,v).replace(/&#?\w+;/g,i),n.add(d,m,e),p.warning('attribute "'+d+'" missed start quot('+g+")!!"),e=v+1,y=l}break;case"/":switch(y){case o:n.setTagName(t.slice(e,v));case l:case f:case h:y=h,n.closed=!0;case c:case s:case a:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return p.error("unexpected end of input"),y==o&&n.setTagName(t.slice(e,v)),v;case">":switch(y){case o:n.setTagName(t.slice(e,v));case l:case f:case h:break;case c:case s:"/"===(m=t.slice(e,v)).slice(-1)&&(n.closed=!0,m=m.slice(0,-1));case a:y===a&&(m=d),y==c?(p.warning('attribute "'+m+'" missed quot(")!!'),n.add(d,m.replace(/&#?\w+;/g,i),e)):("http://www.w3.org/1999/xhtml"===r[""]&&m.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+m+'" missed value!! "'+m+'" instead!!'),n.add(m,m,e));break;case u:throw new Error("attribute value missed!!")}return v;case"":g=" ";default:if(g<=" ")switch(y){case o:n.setTagName(t.slice(e,v)),y=f;break;case s:d=t.slice(e,v),y=a;break;case c:var m=t.slice(e,v).replace(/&#?\w+;/g,i);p.warning('attribute "'+m+'" missed quot(")!!'),n.add(d,m,e);case l:y=f}else switch(y){case a:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&d.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),n.add(d,d,e),e=v,y=s;break;case l:p.warning('attribute space is required"'+d+'"!!');case f:y=s,e=v;break;case u:y=c,e=v;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function y(t,e,n){for(var r=t.tagName,i=null,o=t.length;o--;){var s=t[o],a=s.qName,u=s.value;if((h=a.indexOf(":"))>0)var c=s.prefix=a.slice(0,h),l=a.slice(h+1),f="xmlns"===c&&l;else l=a,c=null,f="xmlns"===a&&"";s.localName=l,!1!==f&&(null==i&&(i={},w(n,n={})),n[f]=i[f]=u,s.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(f,u))}for(o=t.length;o--;){(c=(s=t[o]).prefix)&&("xml"===c&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(s.uri=n[c||""]))}var h;(h=r.indexOf(":"))>0?(c=t.prefix=r.slice(0,h),l=t.localName=r.slice(h+1)):(c=null,l=t.localName=r);var p=t.uri=n[c||""];if(e.startElement(p,l,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=i,!0;if(e.endElement(p,l,r),i)for(c in i)e.endPrefixMapping(c)}function g(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=t.indexOf("</"+n+">",e),s=t.substring(e+1,o);if(/[&<]/.test(s))return/^script$/i.test(n)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,r),i.characters(s,0,s.length),o)}return e+1}function m(t,e,n,r){var i=r[n];return null==i&&((i=t.lastIndexOf("</"+n+">"))<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function w(t,e){for(var n in t)e[n]=t[n]}function b(t,e,n,r){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(i=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,i-e-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var i=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,i-e-9),n.endCDATA(),i+3}var o=function(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=e,i.exec(t);for(;n=i.exec(t);)if(r.push(n),n[1])return r}(t,e),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var a=o[1][0],u=s>3&&/^public$/i.test(o[2][0])&&o[3][0],c=s>4&&o[4][0],l=o[s-1];return n.startDTD(a,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function x(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function _(t){}function S(t,e){return t.__proto__=e,t}p.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),w(e,e={}),function(t,e,n,r,i){function o(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(i.error("entity not found:"+t),t)}function s(e){if(e>w){var n=t.substring(w,e).replace(/&#?\w+;/g,o);f&&a(w),r.characters(n,0,e-w),w=e}}function a(e,n){for(;e>=c&&(n=l.exec(t));)u=n.index,c=u+n[0].length,f.lineNumber++;f.columnNumber=e-u+1}var u=0,c=0,l=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,h=[{currentNSMap:e}],p={},w=0;for(;;){try{var S=t.indexOf("<",w);if(S<0){if(!t.substr(w).match(/^\s*$/)){var E=r.doc,k=E.createTextNode(t.substr(w));E.appendChild(k),r.currentElement=k}return}switch(S>w&&s(S),t.charAt(S+1)){case"/":var T=t.indexOf(">",S+3),O=t.substring(S+2,T),A=h.pop();T<0?(O=t.substring(S+2).replace(/[\s<].*/,""),i.error("end tag name: "+O+" is not complete:"+A.tagName),T=S+1+O.length):O.match(/\s</)&&(O=O.replace(/[\s<].*/,""),i.error("end tag name: "+O+" maybe not complete"),T=S+1+O.length);var R=A.localNSMap,I=A.tagName==O,j=I||A.tagName&&A.tagName.toLowerCase()==O.toLowerCase();if(j){if(r.endElement(A.uri,A.localName,O),R)for(var N in R)r.endPrefixMapping(N);I||i.fatalError("end tag name: "+O+" is not match the current start tagName:"+A.tagName)}else h.push(A);T++;break;case"?":f&&a(S),T=x(t,S,r);break;case"!":f&&a(S),T=b(t,S,r,i);break;default:f&&a(S);var P=new _,C=h[h.length-1].currentNSMap,T=v(t,S,P,C,o,i),D=P.length;if(!P.closed&&m(t,T,P.tagName,p)&&(P.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),f&&D){for(var U=d(f,{}),L=0;L<D;L++){var M=P[L];a(M.offset),M.locator=d(f,{})}r.locator=U,y(P,r,C)&&h.push(P),r.locator=f}else y(P,r,C)&&h.push(P);"http://www.w3.org/1999/xhtml"!==P.uri||P.closed?T++:T=g(t,T,P.tagName,o,r)}}catch(t){i.error("element parse error: "+t),T=-1}T>w?w=T:s(Math.max(S,w)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},_.prototype={setTagName:function(t){if(!i.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,n){if(!i.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},S({},S.prototype)instanceof S||(S=function(t,e){function n(){}for(e in n.prototype=e,n=new n,t)n[e]=t[e];return n}),e.XMLReader=p},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(1),c=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).termType=e.termType,t}var n,r,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,u),n=e,(r=[{key:"toString",value:function(){return"()"}}])&&i(n.prototype,r),c&&i(n,c),e}();c.termType="empty",t.exports=c},function(t,e,n){"use strict";var r={parseJSON:function(t,e,n){var r,i,o,s={},a=n.sym(e);for(var u in t){0===u.indexOf("_:")?s[u]?r=s[u]:(r=n.bnode(u),s[u]=r):r=n.sym(u);var c=t[u];for(var l in c){var f=c[l];for(var h in i=n.sym(l),f){var p=f[h];if("uri"===p.type)o=n.sym(p.value),n.add(r,i,o,a);else if("BlankNode"===p.type)s[p.value]?o=s[p.value]:(o=n.bnode(p.value),s[p.value]=o),n.add(r,i,o,a);else{if("Literal"!==p.type)throw new Error("error: unexpected termtype: "+h.type);o=p.datatype?n.literal(p.value,void 0,n.sym(p.datatype)):p.lang?n.literal(p.value,p.lang):n.literal(p.value),n.add(r,i,o,a)}}}}}};t.exports=r},function(t,e,n){"use strict";var r=n(10);t.exports=function(t){var e=0;function n(t){var e="",n=t.statements;for(var i in n)r.debug("Found statement: "+n),e+=s()+n[i]+"\n";return e}function i(t){var e="";for(var n in t.constraints){var r=t.constraints[n];e+=s()+"FILTER ( "+r.describe(n)+" ) \n"}return e}function o(t){var o=s()+"WHERE \n{ \n";return e++,o+=n(t),o+=i(t),o+=function t(o){for(var a="",u=0;u<o.optional.length;u++)r.debug("Found optional query"),a+=s()+"OPTIONAL { \n",e++,a+=n(o.optional[u]),a+=i(o.optional[u]),a+=t(o.optional[u]),e--,a+=s()+"}\n";return a}(t),e--,o+="}"}function s(){for(var t="",n=0;n<e;n++)t+="    ";return t}return function(t){return function(t){for(var e=s()+"SELECT ",n=0;n<t.vars.length;n++)e+=t.vars[n]+" ";return e+="\n"}(t)+o(t.pat)}(t)}},function(t,e,n){"use strict";var r=n(10),i=n(23).Query;t.exports=function(t,e,n){var o=[];function s(t){if(o[t])return o[t];var e=n.variable(t);return o[t]=e,e}function a(t){return"string"==typeof t&&t.match(/^[\?\$]/)}function u(t){return"string"==typeof t&&t.match(/^<[^>]*>$/)}function c(t){return"string"==typeof t&&(t.match(/^_:/)||t.match(/^$/))}function l(t){return"string"==typeof t&&t.match(/^:|^[^_][^:]*:/)}function f(t){return t.split(":")[0]}function h(t){return t.split(":")[1]}function p(t){return u(t)?t.slice(1,t.length-1):t}function d(t){t=t.replace(/\(/g," ( ").replace(/\)/g," ) ").replace(/</g," <").replace(/>/g,"> ").replace(/{/g," { ").replace(/}/g," } ").replace(/[\t\n\r]/g," ").replace(/; /g," ; ").replace(/\. /g," . ").replace(/, /g," , "),r.info("New str into spaceDelimit: \n"+t);var e,n=[],i=t.split(" ");for(var o in i)"string"==typeof(e=i[o])&&e.match(/[^ \n\t]/)&&(n=n.concat(i[o]));return n}function v(t,e){for(var n=0;n<e.length;n++)if("string"==typeof e[n]&&e[n].toLowerCase()===t.toLowerCase())return n;return null}function y(t,e){for(var n=[],r=0;r<e.length;r++)"string"==typeof e[r]&&e[r].toLowerCase()===t.toLowerCase()&&n.push(r);return n}function g(t,e,n){r.info("Looking for a close bracket of type "+n+" in "+t);for(var i=0,o=0;o<t.length;o++)if(t[o]===e&&i++,t[o]===n&&i--,i<0)return o;return r.error("Statement had no close parenthesis in SPARQL query"),0}function m(t){return this.describe=function(e){return e+" = "+t.toNT()},this.test=function(e){return t.sameTerm(e)},this}function w(t,e){3!==t.length||"Variable"!==t[0].termType||"NamedNode"!==t[2].termType&&"Literal"!==t[2].termType?6===t.length&&"string"==typeof t[0]&&"regexp"===t[0].toLowerCase()&&"("===t[1]&&")"===t[5]&&","===t[3]&&"Variable"===t[4].termType&&"Literal"===t[2].termType&&(r.debug("Constraint added: "+t),e.constraints[t[4]]=new function(t){this.describe=function(e){return"REGEXP( '"+t+"' , "+e+" )"},this.test=function(e){var n=new RegExp(t);return!!e.value&&n.test(e.value)}}(t[2].value)):"="===t[1]?(r.debug("Constraint added: "+t),e.constraints[t[0]]=new m(t[2])):">"===t[1]?(r.debug("Constraint added: "+t),e.constraints[t[0]]=new m(t[2])):"<"===t[1]?(r.debug("Constraint added: "+t),e.constraints[t[0]]=new m(t[2])):r.warn("I don't know how to handle the constraint: "+t)}function b(t,e){r.debug("Optional query: "+t+" not yet implemented.");var i=n.formula();x(t,i),e.optional.push(i)}function x(t,e){var i,o,d=function(t){for(var e,i=[],o=0;o<t.length;o++)"string"==typeof t[o]?(t[o]="string"==typeof(e=t[o])?e.replace(/^&lt;/,"<").replace(/&gt;$/,">"):e,a(t[o])?i[o]=s(t[o].slice(1)):c(t[o])?(r.info(t[o]+" was identified as a bnode."),i[o]=n.bnode()):u(t[o])?(r.info(t[o]+" was identified as a symbol."),i[o]=n.sym(p(t[o]))):l(t[o])?(r.info(t[o]+" was identified as a prefixed symbol"),E[f(t[o])]?i[o]=n.sym(t[o]=E[f(t[o])]+h(t[o])):(r.error("SPARQL error: "+t[o]+" with prefix "+f(t[o])+" does not have a correct prefix entry."),i[o]=t[o])):i[o]=t[o]):i[o]=t[o];return i}(t);for(r.debug("WHERE: "+d);v("OPTIONAL",d);)o=v("OPTIONAL",d),r.debug("OPT: "+o+" "+d[o]+" in "+d),"{"!==d[o+1]&&r.warn("Bad optional opening bracket in word "+o),-1===(i=g(d.slice(o+2),"{","}"))?r.error("No matching bracket in word "+o):(b(d.slice(o+2,o+2+i),e),o=v("OPTIONAL",d),i=g(d.slice(o+2),"{","}"),d.splice(o,i+3));for(r.debug("WHERE after optionals: "+d);v("FILTER",d);){var m=v("FILTER",d);"("!==d[m+1]&&r.warn("Bad filter opening bracket in word "+m),-1===(i=g(d.slice(m+2),"(",")"))?r.error("No matching bracket in word "+m):(w(d.slice(m+2,m+2+i),e),m=v("FILTER",d),i=g(d.slice(m+2),"(",")"),d.splice(m,i+3))}r.debug("WHERE after filters and optionals: "+d),function(t,e){var n=new Array(1);n[0]=-1;for(var i=n.concat(y(".",t)),o=[],s=0;s<i.length-1;s++)o[s]=t.slice(i[s]+1,i[s+1]);for(s in o){r.info("s+p+o "+s+" = "+o[s]);var a=o[s][0];o[s].splice(0,1);var u=n.concat(y(";",o[s]));u.push(o[s].length);for(var c=[],l=0;l<u.length-1;l++)c[l]=o[s].slice(u[l]+1,u[l+1]);for(s in c){r.info("p+o "+s+" = "+o[s]);var f=c[s][0];c[s].splice(0,1);var h=n.concat(y(",",c[s]));h.push(c[s].length);var p=[];for(l=0;l<h.length-1;l++)p[l]=c[s].slice(h[l]+1,h[l+1]);for(s in p){var d=p[s][0];r.info("Subj="+a+" Pred="+f+" Obj="+d),e.add(a,f,d)}}}}(d,e)}r.info("SPARQL input: \n"+t);var _=new i,S=function(t){var e=function t(e){var i=-1===e.indexOf("'")?null:e.indexOf("'"),o=-1===e.indexOf('"')?null:e.indexOf('"');if(!i&&!o){var s=new Array(1);return s[0]=e,s}var a,u,c=new Array(2);if(!i||o&&o<i)a='"',u=o;else{if(o&&!(i&&i<o))return r.error("SQARQL QUERY OOPS!"),c;a="'",u=i}c[0]=e.slice(0,u);var l,f=e.slice(u+1).indexOf(a);return-1===f?(r.error("SPARQL parsing error: no matching parentheses in literal "+e),e):(e.slice(f+u+2).match(/^\^\^/)?(l=e.slice(f+u+2).indexOf(" "),c[1]=n.literal(e.slice(u+1,u+1+f),"",n.sym(p(e.slice(u+4+f,u+2+f+l)))),c=c.concat(t(e.slice(f+u+3+l)))):e.slice(f+u+2).match(/^@/)?(l=e.slice(f+u+2).indexOf(" "),c[1]=n.literal(e.slice(u+1,u+1+f),e.slice(u+3+f,u+2+f+l),null),c=c.concat(t(e.slice(f+u+2+l)))):(c[1]=n.literal(e.slice(u+1,u+1+f),"",null),r.info("Literal found: "+c[1]),c=c.concat(t(e.slice(f+u+2)))),c)}(t),i=[];for(var o in e)i="string"==typeof e[o]?i.concat(d(e[o])):i.concat(e[o]);return i=function(t){for(var e=t,n=0;n<e.length;n++)if("a"===e[n]&&(e[n]="<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"),"is"===e[n]&&"of"===e[n+2]){e.splice(n,1),e.splice(n+1,1);var r=e[n-1];e[n-1]=e[n+1],e[n+1]=r}return e}(i),r.info("SPARQL Tokens: "+i),i}(t),E=function(t){var e,n=y("PREFIX",t),i=[];for(var o in n){var s=t[n[o]+1],a=t[n[o]+2];if("string"==typeof(e=s)&&e.match(/:$/))if(u(a)){r.info("Prefix found: "+s+" -> "+a);var c=f(s),l=p(a);i[c]=l}else r.error("Invalid SPARQL symbol: "+a);else r.error("Invalid SPARQL prefix: "+s)}return i}(S);E.rdf||(E.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"),E.rdfs||(E.rdfs="http://www.w3.org/2000/01/rdf-schema#");var k=v("SELECT",S),T=v("WHERE",S);if(k<0||T<0||k>T)return r.error("Invalid or nonexistent SELECT and WHERE tags in SPARQL query"),!1;if(function(t,e){for(var n in r.info("SPARQL vars: "+t),t)if(a(t[n])){r.info("Added "+t[n]+" to query variables from SPARQL");var i=s(t[n].slice(1));e.vars.push(i),i.label=t[n].slice(1)}else r.warn("Incorrect SPARQL variable in SELECT: "+t[n])}(S.slice(k+1,T),_),x(S.slice(T+2,S.length-1),_.pat),e)return _;for(var O in _.pat.statements){var A=_.pat.statements[O];"NamedNode"===A.subject.termType&&n.fetcher&&n.fetcher.lookUpThing(A.subject,"sparql:"+A.subject),"NamedNode"===A.object.termType&&n.fetcher&&n.fetcher.lookUpThing(A.object,"sparql:"+A.object)}return _}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(15),s=n(2).docpart,a=n(32),u=n(20).namedNode,c=n(16),l=n(34),f=n(2).join,h=n(4),p=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||new o,this.store=e,e.updater)throw new Error("You can't have two UpdateManagers for the same store");e.fetcher||(e.fetcher=new a(e)),e.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=c("http://www.w3.org/2007/ont/link#"),this.ns.http=c("http://www.w3.org/2007/ont/http#"),this.ns.httph=c("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=c("http://www.w3.org/ns/ldp#"),this.ns.rdf=c("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=c("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=c("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=c("http://www.w3.org/2002/07/owl#"),this.patchControl=[]}var e,n,p;return e=t,(n=[{key:"patchControlFor",value:function(t){return this.patchControl[t.uri]||(this.patchControl[t.uri]=[]),this.patchControl[t.uri]}},{key:"editable",value:function(t,e){if(!t)return!1;if(e||(e=this.store),"file:///"===t.slice(0,8)){if(e.holds(e.sym(t),u("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),u("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE";e.statementsMatching(e.sym(t));return!1}var n,r,i=!1,o=e.each(void 0,this.ns.link("requestedURI"),s(t));if(e.holds(u(t),this.ns.rdf("type"),this.ns.ldp("Resource")))return"SPARQL";for(var a=0;a<o.length;a++)if(void 0!==(n=o[a])){var c=e.any(n,this.ns.link("response"));if(void 0!==n){var l=e.each(c,this.ns.httph("accept-patch"));if(l.length)for(var f=0;f<l.length;f++)if((r=l[f].value.trim()).indexOf("application/sparql-update")>=0)return"SPARQL";var h=e.each(c,this.ns.httph("ms-author-via"));if(h.length)for(var p=0;p<h.length;p++){if((r=h[p].value.trim()).indexOf("SPARQL")>=0)return"SPARQL";if(r.indexOf("DAV")>=0)return"DAV"}var d=e.each(c,this.ns.http("status"));if(d.length)for(var v=0;v<d.length;v++)200!==d[v]&&404!==d[v]||(i=!0)}}if(0===o.length);else if(i)return!1}},{key:"anonymize",value:function(t){return"_:"===t.toNT().substr(0,2)&&this.mentioned(t)?"?"+t.toNT().substr(2):t.toNT()}},{key:"anonymizeNT",value:function(t){return this.anonymize(t.subject)+" "+this.anonymize(t.predicate)+" "+this.anonymize(t.object)+" ."}},{key:"statementBnodes",value:function(t){return[t.subject,t.predicate,t.object].filter(function(t){return t.isBlank})}},{key:"statementArrayBnodes",value:function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(this.statementBnodes(t[n]));e.sort();for(var r=[],i=0;i<e.length;i++)0!==i&&e[i].sameTerm(e[i-1])||r.push(e[i]);return r}},{key:"cacheIfps",value:function(){this.ifps={};for(var t=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty")),e=0;e<t.length;e++)this.ifps[t[e].uri]=!0;this.fps={},t=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty"));for(var n=0;n<t.length;n++)this.fps[t[n].uri]=!0}},{key:"bnodeContext2",value:function(t,e,n){for(var r,i,o=this.store.statementsMatching(void 0,void 0,t,e),s=0;s<o.length;s++)if(this.fps[o[s].predicate.uri]){if(!(r=o[s].subject).isBlank)return[o[s]];if(n&&(i=this.bnodeContext2(r,e,n-1)))return i.concat([o[s]])}o=this.store.statementsMatching(t,void 0,void 0,e);for(var a=0;a<o.length;a++)if(this.ifps[o[a].predicate.uri]){if(!(r=o[a].object).isBlank)return[o[a]];if(n&&(i=this.bnodeContext2(r,e,n-1)))return i.concat([o[a]])}return null}},{key:"bnodeContext1",value:function(t,e){for(var n=0;n<3;n++){var r=this.bnodeContext2(t,e,n);if(null!==r)return r}return this.store.connectedStatements(t,e)}},{key:"mentioned",value:function(t){return 0!==this.store.statementsMatching(t).length||0!==this.store.statementsMatching(void 0,t).length||0!==this.store.statementsMatching(void 0,void 0,t).length}},{key:"bnodeContext",value:function(t,e){var n=[];if(t.length){this.cacheIfps();for(var r=0;r<t.length;r++){var i=t[r];this.mentioned(i)&&(n=n.concat(this.bnodeContext1(i,e)))}}return n}},{key:"statementContext",value:function(t){var e=this.statementBnodes(t);return this.bnodeContext(e,t.why)}},{key:"contextWhere",value:function(t){var e=this;return t&&0!==t.length?"WHERE { "+t.map(function(t){return e.anonymizeNT(t)}).join("\n")+" }\n":""}},{key:"fire",value:function(t,e,n){var r=this;return Promise.resolve().then(function(){if(!t)throw new Error("No URI given for remote editing operation: "+e);var n={noMeta:!0,contentType:"application/sparql-update",body:e};return r.store.fetcher.webOperation("PATCH",t,n)}).then(function(r){if(!r.ok){var i="UpdateManager: update failed for <"+t+"> status="+r.status+", "+r.statusText+"\n   for query: "+e;throw new Error(i)}n(t,r.ok,r.responseText,r)}).catch(function(e){n(t,!1,e.message,e)})}},{key:"update_statement",value:function(t){if(!t||t.why){var e=this,n=this.statementContext(t);return{statement:t?[t.subject,t.predicate,t.object,t.why]:void 0,statementNT:t?this.anonymizeNT(t):void 0,where:e.contextWhere(n),set_object:function(t,n){var r=this.where;r+="DELETE DATA { "+this.statementNT+" } ;\n",r+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(t)+"  . }\n",e.fire(this.statement[3].uri,r,n)}}}}},{key:"insert_statement",value:function(t,e){var n=t instanceof Array?t[0]:t,r=this.contextWhere(this.statementContext(n));if(t instanceof Array){for(var i="",o=0;o<t.length;o++)i+=t[o]+"\n";r+="INSERT DATA { "+i+" }\n"}else r+="INSERT DATA { "+this.anonymize(t.subject)+" "+this.anonymize(t.predicate)+" "+this.anonymize(t.object)+"  . }\n";this.fire(n.why.uri,r,e)}},{key:"delete_statement",value:function(t,e){var n=t instanceof Array?t[0]:t,r=this.contextWhere(this.statementContext(n));if(t instanceof Array){for(var i="",o=0;o<t.length;o++)i+=t[o]+"\n";r+="DELETE DATA { "+i+" }\n"}else r+="DELETE DATA { "+this.anonymize(t.subject)+" "+this.anonymize(t.predicate)+" "+this.anonymize(t.object)+"  . }\n";this.fire(n.why.uri,r,e)}},{key:"requestDownstreamAction",value:function(t,e){var n=this.patchControlFor(t);if(n.pendingUpstream)if(n.downstreamAction){if(""+n.downstreamAction!=""+e)throw new Error("Can't wait for > 1 different downstream actions")}else n.downstreamAction=e;else e(t)}},{key:"clearUpstreamCount",value:function(t){this.patchControlFor(t).upstreamCount=0}},{key:"getUpdatesVia",value:function(t){var e=this.store.fetcher.getHeader(t,"updates-via");return e&&e.length?e[0].trim():null}},{key:"addDownstreamChangeListener",value:function(t,e){var n=this,r=this.patchControlFor(t);r.downstreamChangeListeners||(r.downstreamChangeListeners=[]),r.downstreamChangeListeners.push(e),this.setRefreshHandler(t,function(t){n.reloadAndSync(t)})}},{key:"reloadAndSync",value:function(t){var e=this.patchControlFor(t),n=this;if(!e.reloading){e.reloading=!0;var r=1e3;!function i(){n.reload(n.store,t,function(t,n,o){if(e.reloading=!1,t){if(e.downstreamChangeListeners)for(var s=0;s<e.downstreamChangeListeners.length;s++)e.downstreamChangeListeners[s]()}else 0===o.status&&(e.reloading=!0,r*=2,setTimeout(i,r))})}()}}},{key:"setRefreshHandler",value:function(t,e){var n=this.getUpdatesVia(t),r=e,i=this,o=this,s=1500,a=0;if(!n)return!1;n=(n=f(n,t.uri)).replace(/^http:/,"ws:").replace(/^https:/,"wss:");return function e(){var u;if("undefined"!=typeof WebSocket)u=new WebSocket(n);else if("undefined"!=typeof Services)u=Services.wm.getMostRecentWindow("navigator:browser").WebSocket(n);else{if("undefined"==typeof window||!window.WebSocket)return;u=window.WebSocket(n)}u.onopen=function(){s=1500,this.send("sub "+t.uri),a&&o.requestDownstreamAction(t,r)};var c=i.patchControlFor(t);c.upstreamCount=0,u.onerror=function(t){},u.onclose=function(t){s*=2,a+=1,setTimeout(function(){e()},s)},u.onmessage=function(e){if(e.data&&"pub"===e.data.slice(0,3)){if("upstreamCount"in c&&(c.upstreamCount-=1,c.upstreamCount>=0))return;c.upstreamCount=0,i.requestDownstreamAction(t,r)}}}(),!0}},{key:"update",value:function(t,e,n,i){var s=this;try{var a=this.store,u=t?t instanceof o?t.statements:t instanceof Array?t:[t]:[],c=e?e instanceof o?e.statements:e instanceof Array?e:[e]:[];if(!(u instanceof Array))throw new Error("Type Error "+r(u)+": "+u);if(!(c instanceof Array))throw new Error("Type Error "+r(c)+": "+c);if(0===u.length&&0===c.length)return n(null,!0);var l=u.length?u[0].why:c[0].why;if(!l){var f="Error patching: statement does not specify which document to patch:"+u[0]+", "+c[0];throw new Error(f)}var p=this.patchControlFor(l),d=Date.now(),v=["subject","predicate","object","why"],y={delete:u,insert:c};["insert","delete"].map(function(t){y[t].map(function(t){if(!l.sameTerm(t.why))throw new Error("update: destination "+l+" inconsistent with delete quad "+t.why);v.map(function(e){if(void 0===t[e])throw new Error("update: undefined "+e+" of statement.")})})});var g=this.editable(l.uri,a);if(!1===g)throw new Error("Update: Can't make changes in uneditable "+l);if(void 0===g){if(i)throw new Error("Update: Loaded "+l+"but stil can't figure out what editing protcol it supports.");return void this.store.fetcher.load(l).then(function(r){s.update(t,e,n,!0)},function(t){throw new Error("Update: Can't read ".concat(l," before patching: ").concat(t))})}if(g.indexOf("SPARQL")>=0){var m=[];u.length&&(m=this.statementArrayBnodes(u)),c.length&&(m=m.concat(this.statementArrayBnodes(c)));var w=this.bnodeContext(m,l),b=this.contextWhere(w),x="";if(b.length){if(u.length){x+="DELETE { ";for(var _=0;_<u.length;_++)x+=this.anonymizeNT(u[_])+"\n";x+=" }\n"}if(c.length){x+="INSERT { ";for(var S=0;S<c.length;S++)x+=this.anonymizeNT(c[S])+"\n";x+=" }\n"}x+=b}else{if(u.length){x+="DELETE DATA { ";for(var E=0;E<u.length;E++)x+=this.anonymizeNT(u[E])+"\n";x+=" } \n"}if(c.length){u.length&&(x+=" ; "),x+="INSERT DATA { ";for(var k=0;k<c.length;k++)x+=this.anonymizeNT(c[k])+"\n";x+=" }\n"}}p.pendingUpstream=p.pendingUpstream?p.pendingUpstream+1:1,"upstreamCount"in p&&(p.upstreamCount+=1),this.fire(l.uri,x,function(t,e,r,i){if(i.elapsedTimeMs=Date.now()-d,e){try{a.remove(u)}catch(t){e=!1,r="Remote Ok BUT error deleting "+u.length+" from store!!! "+t}for(var o=0;o<c.length;o++)a.add(c[o].subject,c[o].predicate,c[o].object,l)}if(n(t,e,r,i),p.pendingUpstream-=1,0===p.pendingUpstream&&p.downstreamAction){var s=p.downstreamAction;delete p.downstreamAction,s(l)}})}else if(g.indexOf("DAV")>=0)this.updateDav(l,u,c,n);else{if(!(g.indexOf("LOCALFILE")>=0))throw new Error("Unhandled edit method: '"+g+"' for "+l);try{this.updateLocalFile(l,u,c,n)}catch(t){n(l.uri,!1,"Exception trying to write back file <"+l.uri+">\n")}}}catch(t){n(void 0,!1,"Exception in update: "+t+"\n"+h.stackString(t))}}},{key:"updateDav",value:function(t,e,n,r){var i=this.store,o=i.any(t,this.ns.link("request"));if(!o)throw new Error("No record of our HTTP GET request for document: "+t);var s=i.any(o,this.ns.link("response"));if(!s)return null;for(var a=i.the(s,this.ns.httph("content-type")).value,u=i.statementsMatching(void 0,void 0,void 0,t).slice(),c=0;c<e.length;c++)h.RDFArrayRemove(u,e[c]);for(var l=0;l<n.length;l++)u.push(n[l]);var p,d=this.serialize(t.uri,u,a),v=i.the(s,this.ns.httph("content-location"));v&&(p=f(v.value,p));var y={contentType:a,noMeta:!0,body:d};return i.fetcher.webOperation("PUT",p,y).then(function(o){if(!o.ok)throw new Error(o.error);for(var s=0;s<e.length;s++)i.remove(e[s]);for(var a=0;a<n.length;a++)i.add(n[a].subject,n[a].predicate,n[a].object,t);r(t.uri,o.ok,o.responseText,o)}).catch(function(e){r(t.uri,!1,e.message,e)})}},{key:"updateLocalFile",value:function(t,e,n,r){for(var i=this.store,o=i.statementsMatching(void 0,void 0,void 0,t).slice(),s=0;s<e.length;s++)h.RDFArrayRemove(o,e[s]);for(var u=0;u<n.length;u++)o.push(n[u]);var c=t.uri.lastIndexOf(".");if(c<1)throw new Error("Rewriting file: No filename extension: "+t.uri);var l=t.uri.slice(c+1),f=a.CONTENT_TYPE_BY_EXT[l];if(!f)throw new Error("File extension ."+l+" not supported for data write");var p=this.serialize(t.uri,o,f),d=t.uri.slice(7),v=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);if(v.initWithPath(d),!v.exists())throw new Error("Rewriting file <"+t.uri+"> but it does not exist!");var y=Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);y.init(v,42,parseInt("0666",8),0),y.write(p,p.length),y.close();for(var g=0;g<e.length;g++)i.remove(e[g]);for(var m=0;m<n.length;m++)i.add(n[m].subject,n[m].predicate,n[m].object,t);r(t.uri,!0,"")}},{key:"serialize",value:function(t,e,n){var r,i=this.store;if("string"==typeof e)return e;var o=l(i);switch(o.suggestNamespaces(i.namespaces),o.setBase(t),n){case"text/xml":case"application/rdf+xml":r=o.statementsToXML(e);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":r=o.statementsToN3(e);break;default:throw new Error("Content-type "+n+" not supported for data serialization")}return r}},{key:"put",value:function(t,e,n,r){var i,o=this,s=this.store;return Promise.resolve().then(function(){return i=o.serialize(t.uri,e,n),s.fetcher.webOperation("PUT",t.uri,{contentType:n,body:i})}).then(function(n){if(!n.ok)return r(t.uri,n.ok,n.error,n);delete s.fetcher.nonexistent[t.uri],delete s.fetcher.requested[t.uri],"string"!=typeof e&&e.map(function(t){s.addStatement(t)}),r(t.uri,n.ok,"",n)}).catch(function(e){r(t.uri,!1,e.message)})}},{key:"reload",value:function(t,e,n){var r=Date.now();t.fetcher.nowOrWhenFetched(e.uri,{force:!0,noMeta:!0,clearPreviousData:!0},function(t,i,o){if(t)if(o.onErrorWasCalled||200!==o.status)n(!1,"Non-HTTP error reloading data: "+i,o);else{var s=Date.now()-r;e.reloadTimeTotal||(e.reloadTimeTotal=0),e.reloadTimeCount||(e.reloadTimeCount=0),e.reloadTimeTotal+=s,e.reloadTimeCount+=1,n(!0)}else n(!1,"Error reloading data: "+i,o)})}}])&&i(e.prototype,n),p&&i(e,p),t}();t.exports=p},function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=125)}([function(t,e,n){var r=n(2),i=n(18),o=n(11),s=n(12),a=n(19),u=function(t,e,n){var c,l,f,h,p=t&u.F,d=t&u.G,v=t&u.S,y=t&u.P,g=t&u.B,m=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,w=d?i:i[e]||(i[e]={}),b=w.prototype||(w.prototype={});for(c in d&&(n=e),n)f=((l=!p&&m&&void 0!==m[c])?m:n)[c],h=g&&l?a(f,r):y&&"function"==typeof f?a(Function.call,f):f,m&&s(m,c,f,t&u.U),w[c]!=f&&o(w,c,h),y&&b[c]!=f&&(b[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(49)("wks"),i=n(33),o=n(2).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e,n){t.exports=!n(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(1),i=n(91),o=n(22),s=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(24),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(23);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(7),i=n(32);t.exports=n(6)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2),i=n(11),o=n(14),s=n(33)("src"),a=Function.toString,u=(""+a).split("toString");n(18).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,s)||i(n,s,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,n){var r=n(0),i=n(3),o=n(23),s=/"/g,a=function(t,e,n,r){var i=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),a+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(46),i=n(23);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(47),i=n(32),o=n(15),s=n(22),a=n(14),u=n(91),c=Object.getOwnPropertyDescriptor;e.f=n(6)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(14),i=n(9),o=n(66)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(10);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(0),i=n(18),o=n(3);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){var r=n(19),i=n(46),o=n(9),s=n(8),a=n(83);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f,p=e||a;return function(e,a,d){for(var v,y,g=o(e),m=i(g),w=r(a,d,3),b=s(m.length),x=0,_=n?p(e,b):u?p(e,0):void 0;b>x;x++)if((h||x in m)&&(y=w(v=m[x],x,g),t))if(n)_[x]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:_.push(v)}else if(l)return!1;return f?-1:c||l?l:_}}},function(t,e,n){"use strict";if(n(6)){var r=n(30),i=n(2),o=n(3),s=n(0),a=n(60),u=n(89),c=n(19),l=n(39),f=n(32),h=n(11),p=n(41),d=n(24),v=n(8),y=n(117),g=n(35),m=n(22),w=n(14),b=n(48),x=n(4),_=n(9),S=n(80),E=n(36),k=n(17),T=n(37).f,O=n(82),A=n(33),R=n(5),I=n(26),j=n(50),N=n(57),P=n(85),C=n(44),D=n(54),U=n(38),L=n(84),M=n(107),B=n(7),F=n(16),q=B.f,z=F.f,H=i.RangeError,V=i.TypeError,J=i.Uint8Array,K=Array.prototype,W=u.ArrayBuffer,$=u.DataView,Y=I(0),X=I(2),G=I(3),Q=I(4),Z=I(5),tt=I(6),et=j(!0),nt=j(!1),rt=P.values,it=P.keys,ot=P.entries,st=K.lastIndexOf,at=K.reduce,ut=K.reduceRight,ct=K.join,lt=K.sort,ft=K.slice,ht=K.toString,pt=K.toLocaleString,dt=R("iterator"),vt=R("toStringTag"),yt=A("typed_constructor"),gt=A("def_constructor"),mt=a.CONSTR,wt=a.TYPED,bt=a.VIEW,xt=I(1,function(t,e){return Tt(N(t,t[gt]),e)}),_t=o(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),St=!!J&&!!J.prototype.set&&o(function(){new J(1).set({})}),Et=function(t,e){var n=d(t);if(n<0||n%e)throw H("Wrong offset!");return n},kt=function(t){if(x(t)&&wt in t)return t;throw V(t+" is not a typed array!")},Tt=function(t,e){if(!(x(t)&&yt in t))throw V("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return At(N(t,t[gt]),e)},At=function(t,e){for(var n=0,r=e.length,i=Tt(t,r);r>n;)i[n]=e[n++];return i},Rt=function(t,e,n){q(t,e,{get:function(){return this._d[n]}})},It=function(t){var e,n,r,i,o,s,a=_(t),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=O(a);if(void 0!=h&&!S(h)){for(s=h.call(a),r=[],e=0;!(o=s.next()).done;e++)r.push(o.value);a=r}for(f&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(a.length),i=Tt(this,n);n>e;e++)i[e]=f?l(a[e],e):a[e];return i},jt=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},Nt=!!J&&o(function(){pt.call(new J(1))}),Pt=function(){return pt.apply(Nt?ft.call(kt(this)):kt(this),arguments)},Ct={copyWithin:function(t,e){return M.call(kt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(kt(this),arguments)},filter:function(t){return Ot(this,X(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Z(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Y(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(kt(this),arguments)},lastIndexOf:function(t){return st.apply(kt(this),arguments)},map:function(t){return xt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(kt(this),arguments)},reduceRight:function(t){return ut.apply(kt(this),arguments)},reverse:function(){for(var t,e=kt(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return G(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(kt(this),t)},subarray:function(t,e){var n=kt(this),r=n.length,i=g(t,r);return new(N(n,n[gt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-i))}},Dt=function(t,e){return Ot(this,ft.call(kt(this),t,e))},Ut=function(t){kt(this);var e=Et(arguments[1],1),n=this.length,r=_(t),i=v(r.length),o=0;if(i+e>n)throw H("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Lt={entries:function(){return ot.call(kt(this))},keys:function(){return it.call(kt(this))},values:function(){return rt.call(kt(this))}},Mt=function(t,e){return x(t)&&t[wt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Bt=function(t,e){return Mt(t,e=m(e,!0))?f(2,t[e]):z(t,e)},Ft=function(t,e,n){return!(Mt(t,e=m(e,!0))&&x(n)&&w(n,"value"))||w(n,"get")||w(n,"set")||n.configurable||w(n,"writable")&&!n.writable||w(n,"enumerable")&&!n.enumerable?q(t,e,n):(t[e]=n.value,t)};mt||(F.f=Bt,B.f=Ft),s(s.S+s.F*!mt,"Object",{getOwnPropertyDescriptor:Bt,defineProperty:Ft}),o(function(){ht.call({})})&&(ht=pt=function(){return ct.call(this)});var qt=p({},Ct);p(qt,Lt),h(qt,dt,Lt.values),p(qt,{slice:Dt,set:Ut,constructor:function(){},toString:ht,toLocaleString:Pt}),Rt(qt,"buffer","b"),Rt(qt,"byteOffset","o"),Rt(qt,"byteLength","l"),Rt(qt,"length","e"),q(qt,vt,{get:function(){return this[wt]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",f="get"+t,p="set"+t,d=i[c],g=d||{},m=d&&k(d),w=!d||!a.ABV,_={},S=d&&d.prototype,O=function(t,n){q(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[f](n*e+r.o,_t)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*e+i.o,r,_t)}(this,n,t)},enumerable:!0})};w?(d=n(function(t,n,r,i){l(t,d,c,"_d");var o,s,a,u,f=0,p=0;if(x(n)){if(!(n instanceof W||"ArrayBuffer"==(u=b(n))||"SharedArrayBuffer"==u))return wt in n?At(d,n):It.call(d,n);o=n,p=Et(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw H("Wrong length!");if((s=g-p)<0)throw H("Wrong length!")}else if((s=v(i)*e)+p>g)throw H("Wrong length!");a=s/e}else a=y(n),o=new W(s=a*e);for(h(t,"_d",{b:o,o:p,l:s,e:a,v:new $(o)});f<a;)O(t,f++)}),S=d.prototype=E(qt),h(S,"constructor",d)):o(function(){d(1)})&&o(function(){new d(-1)})&&D(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,r,i){var o;return l(t,d,c),x(n)?n instanceof W||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,Et(r,e),i):void 0!==r?new g(n,Et(r,e)):new g(n):wt in n?At(d,n):It.call(d,n):new g(y(n))}),Y(m!==Function.prototype?T(g).concat(T(m)):T(g),function(t){t in d||h(d,t,g[t])}),d.prototype=S,r||(S.constructor=d));var A=S[dt],R=!!A&&("values"==A.name||void 0==A.name),I=Lt.values;h(d,yt,!0),h(S,wt,c),h(S,bt,!0),h(S,gt,d),(u?new d(1)[vt]==c:vt in S)||q(S,vt,{get:function(){return c}}),_[c]=d,s(s.G+s.W+s.F*(d!=g),_),s(s.S,c,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o(function(){g.of.call(d,1)}),c,{from:It,of:jt}),"BYTES_PER_ELEMENT"in S||h(S,"BYTES_PER_ELEMENT",e),s(s.P,c,Ct),U(c),s(s.P+s.F*St,c,{set:Ut}),s(s.P+s.F*!R,c,Lt),r||S.toString==ht||(S.toString=ht),s(s.P+s.F*o(function(){new d(1).slice()}),c,{slice:Dt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),c,{toLocaleString:Pt}),C[c]=R?A:I,r||R||h(S,dt,I)}}else t.exports=function(){}},function(t,e,n){var r=n(112),i=n(0),o=n(49)("metadata"),s=o.store||(o.store=new(n(115))),a=function(t,e,n){var i=s.get(t);if(!i){if(!n)return;s.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o};t.exports={store:s,map:a,has:function(t,e,n){var r=a(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=a(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){a(n,r,!0).set(t,e)},keys:function(t,e){var n=a(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},function(t,e,n){var r=n(33)("meta"),i=n(4),o=n(14),s=n(7).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(3)(function(){return u(Object.preventExtensions({}))}),l=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e){t.exports=!1},function(t,e,n){var r=n(5)("unscopables"),i=Array.prototype;void 0==i[r]&&n(11)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(93),i=n(67);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(24),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(1),i=n(94),o=n(67),s=n(66)("IE_PROTO"),a=function(){},u=function(){var t,e=n(64)("iframe"),r=o.length;for(e.style.display="none",n(68).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(93),i=n(67).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(2),i=n(7),o=n(6),s=n(5)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(19),i=n(105),o=n(80),s=n(1),a=n(8),u=n(82),c={},l={};(e=t.exports=function(t,e,n,f,h){var p,d,v,y,g=h?function(){return t}:u(t),m=r(n,f,e?2:1),w=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=a(t.length);p>w;w++)if((y=e?m(s(d=t[w])[0],d[1]):m(t[w]))===c||y===l)return y}else for(v=g.call(t);!(d=v.next()).done;)if((y=i(v,m,d.value,e))===c||y===l)return y}).BREAK=c,e.RETURN=l},function(t,e,n){var r=n(12);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(7).f,i=n(14),o=n(5)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(0),i=n(23),o=n(3),s=n(70),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),l=function(t,e,n){var i={},a=o(function(){return!!s[t]()||""!=""[t]()}),u=i[t]=a?e(f):s[t];n&&(i[n]=u),r(r.P+r.F*a,"String",i)},f=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=n(20);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(20),i=n(5)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(18),i=n(2),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(30)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(15),i=n(8),o=n(35);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(20);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(4),i=n(20),o=n(5)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(1);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(11),i=n(12),o=n(3),s=n(23),a=n(5);t.exports=function(t,e,n){var u=a(t),c=n(s,u,""[t]),l=c[0],f=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),r(RegExp.prototype,u,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},function(t,e,n){var r=n(1),i=n(10),o=n(5)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||void 0==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r=n(2).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(12),s=n(41),a=n(29),u=n(40),c=n(39),l=n(4),f=n(3),h=n(54),p=n(42),d=n(71);t.exports=function(t,e,n,v,y,g){var m=r[t],w=m,b=y?"set":"add",x=w&&w.prototype,_={},S=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof w&&(g||x.forEach&&!f(function(){(new w).entries().next()}))){var E=new w,k=E[b](g?{}:-0,1)!=E,T=f(function(){E.has(1)}),O=h(function(t){new w(t)}),A=!g&&f(function(){for(var t=new w,e=5;e--;)t[b](e,e);return!t.has(-0)});O||((w=e(function(e,n){c(e,w,t);var r=d(new m,e,w);return void 0!=n&&u(n,y,r[b],r),r})).prototype=x,x.constructor=w),(T||A)&&(S("delete"),S("has"),y&&S("get")),(A||k)&&S(b),g&&x.clear&&delete x.clear}else w=v.getConstructor(e,t,y,b),s(w.prototype,n),a.NEED=!0;return p(w,t),_[t]=w,i(i.G+i.W+i.F*(w!=m),_),g||v.setStrong(w,t,y),w}},function(t,e,n){for(var r,i=n(2),o=n(11),s=n(33),a=s("typed_array"),u=s("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,a,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:a,VIEW:u}},function(t,e,n){"use strict";t.exports=n(30)||!n(3)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(2)[t]})},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(19),s=n(40);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,a,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),void 0==t?new this:(n=[],e?(r=0,a=o(u,arguments[2],2),s(t,!1,function(t){n.push(a(t,r++))})):s(t,!1,n.push,n),new this(n))}})}},function(t,e,n){var r=n(4),i=n(2).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(2),i=n(18),o=n(30),s=n(92),a=n(7).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var r=n(49)("keys"),i=n(33);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(2).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(4),i=n(1),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(19)(Function.call,n(16).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){var r=n(4),i=n(69).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(24),i=n(23);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(24),i=n(23);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(30),i=n(0),o=n(12),s=n(11),a=n(44),u=n(77),c=n(42),l=n(17),f=n(5)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,y,g){u(n,e,d);var m,w,b,x=function(t){if(!h&&t in k)return k[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",S="values"==v,E=!1,k=t.prototype,T=k[f]||k["@@iterator"]||v&&k[v],O=T||x(v),A=v?S?x("entries"):O:void 0,R="Array"==e&&k.entries||T;if(R&&(b=l(R.call(new t)))!==Object.prototype&&b.next&&(c(b,_,!0),r||"function"==typeof b[f]||s(b,f,p)),S&&T&&"values"!==T.name&&(E=!0,O=function(){return T.call(this)}),r&&!g||!h&&!E&&k[f]||s(k,f,O),a[e]=O,a[_]=p,v)if(m={values:S?O:x("values"),keys:y?O:x("keys"),entries:A},g)for(w in m)w in k||o(k,w,m[w]);else i(i.P+i.F*(h||E),e,m);return m}},function(t,e,n){"use strict";var r=n(36),i=n(32),o=n(42),s={};n(11)(s,n(5)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(53),i=n(23);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(44),i=n(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(7),i=n(32);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(48),i=n(5)("iterator"),o=n(44);t.exports=n(18).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(218);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var r=n(9),i=n(35),o=n(8);t.exports=function(t){for(var e=r(this),n=o(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>a;)e[a++]=t;return e}},function(t,e,n){"use strict";var r=n(31),i=n(108),o=n(44),s=n(15);t.exports=n(76)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r,i,o,s=n(19),a=n(98),u=n(68),c=n(64),l=n(2),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},w=function(t){m.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete g[t]},"process"==n(20)(f)?r=function(t){f.nextTick(s(m,t,1))}:v&&v.now?r=function(t){v.now(s(m,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=w,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",w,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,n){var r=n(2),i=n(86).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(20)(s);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(10);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){"use strict";var r=n(2),i=n(6),o=n(30),s=n(60),a=n(11),u=n(41),c=n(3),l=n(39),f=n(24),h=n(8),p=n(117),d=n(37).f,v=n(7).f,y=n(84),g=n(42),m="prototype",w="Wrong index!",b=r.ArrayBuffer,x=r.DataView,_=r.Math,S=r.RangeError,E=r.Infinity,k=b,T=_.abs,O=_.pow,A=_.floor,R=_.log,I=_.LN2,j=i?"_b":"buffer",N=i?"_l":"byteLength",P=i?"_o":"byteOffset";function C(t,e,n){var r,i,o,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,c=u>>1,l=23===e?O(2,-24)-O(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===E?(i=t!=t?1:0,r=u):(r=A(R(t)/I),t*(o=O(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*O(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*O(2,e),r+=c):(i=t*O(2,c-1)*O(2,e),r=0));e>=8;s[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,a+=e;a>0;s[f++]=255&r,r/=256,a-=8);return s[--f]|=128*h,s}function D(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;a>0;l=256*l+t[u],u--,a-=8);for(r=l&(1<<-a)-1,l>>=-a,a+=e;a>0;r=256*r+t[u],u--,a-=8);if(0===l)l=1-s;else{if(l===o)return r?NaN:c?-E:E;r+=O(2,e),l-=s}return(c?-1:1)*r*O(2,l-e)}function U(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function L(t){return[255&t]}function M(t){return[255&t,t>>8&255]}function B(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function F(t){return C(t,52,8)}function q(t){return C(t,23,4)}function z(t,e,n){v(t[m],e,{get:function(){return this[n]}})}function H(t,e,n,r){var i=p(+n);if(i+e>t[N])throw S(w);var o=t[j]._b,s=i+t[P],a=o.slice(s,s+e);return r?a:a.reverse()}function V(t,e,n,r,i,o){var s=p(+n);if(s+e>t[N])throw S(w);for(var a=t[j]._b,u=s+t[P],c=r(+i),l=0;l<e;l++)a[u+l]=c[o?l:e-l-1]}if(s.ABV){if(!c(function(){b(1)})||!c(function(){new b(-1)})||c(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var J,K=(b=function(t){return l(this,b),new k(p(t))})[m]=k[m],W=d(k),$=0;W.length>$;)(J=W[$++])in b||a(b,J,k[J]);o||(K.constructor=b)}var Y=new x(new b(2)),X=x[m].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||u(x[m],{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else b=function(t){l(this,b,"ArrayBuffer");var e=p(t);this._b=y.call(new Array(e),0),this[N]=e},x=function(t,e,n){l(this,x,"DataView"),l(t,b,"DataView");var r=t[N],i=f(e);if(i<0||i>r)throw S("Wrong offset!");if(i+(n=void 0===n?r-i:h(n))>r)throw S("Wrong length!");this[j]=t,this[P]=i,this[N]=n},i&&(z(b,"byteLength","_l"),z(x,"buffer","_b"),z(x,"byteLength","_l"),z(x,"byteOffset","_o")),u(x[m],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return U(H(this,4,t,arguments[1]))},getUint32:function(t){return U(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){V(this,1,t,L,e)},setUint8:function(t,e){V(this,1,t,L,e)},setInt16:function(t,e){V(this,2,t,M,e,arguments[2])},setUint16:function(t,e){V(this,2,t,M,e,arguments[2])},setInt32:function(t,e){V(this,4,t,B,e,arguments[2])},setUint32:function(t,e){V(this,4,t,B,e,arguments[2])},setFloat32:function(t,e){V(this,4,t,q,e,arguments[2])},setFloat64:function(t,e){V(this,8,t,F,e,arguments[2])}});g(b,"ArrayBuffer"),g(x,"DataView"),a(x[m],s.VIEW,!0),e.ArrayBuffer=b,e.DataView=x},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=!n(6)&&!n(3)(function(){return 7!=Object.defineProperty(n(64)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(5)},function(t,e,n){var r=n(14),i=n(15),o=n(50)(!1),s=n(66)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(7),i=n(1),o=n(34);t.exports=n(6)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var r=n(15),i=n(37).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(34),i=n(51),o=n(47),s=n(9),a=n(46),u=Object.assign;t.exports=!u||n(3)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=s(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,p=a(arguments[c++]),d=l?r(p).concat(l(p)):r(p),v=d.length,y=0;v>y;)f.call(p,h=d[y++])&&(n[h]=p[h]);return n}:u},function(t,e,n){"use strict";var r=n(10),i=n(4),o=n(98),s=[].slice,a={};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),u=function(){var r=n.concat(s.call(arguments));return this instanceof u?function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)}(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(2).parseInt,i=n(43).trim,o=n(70),s=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},function(t,e,n){var r=n(2).parseFloat,i=n(43).trim;t.exports=1/r(n(70)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(20);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(4),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(73),i=Math.pow,o=i(2,-52),s=i(2,-23),a=i(2,127)*(2-s),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/s+1/o-1/o)*u*s:(n=(e=(1+s/o)*i)-(e-i))>a||n!=n?c*(1/0):c*n}},function(t,e,n){var r=n(1);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(10),i=n(9),o=n(46),s=n(8);t.exports=function(t,e,n,a,u){r(e);var c=i(t),l=o(c),f=s(c.length),h=u?f-1:0,p=u?-1:1;if(n<2)for(;;){if(h in l){a=l[h],h+=p;break}if(h+=p,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=p)h in l&&(a=e(a,l[h],h,c));return a}},function(t,e,n){"use strict";var r=n(9),i=n(35),o=n(8);t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),a=i(t,s),u=i(e,s),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?s:i(c,s))-u,s-a),f=1;for(u<a&&a<u+l&&(f=-1,u+=l-1,a+=l-1);l-- >0;)u in n?n[a]=n[u]:delete n[a],a+=f,u+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(6)&&"g"!=/./g.flags&&n(7).f(RegExp.prototype,"flags",{configurable:!0,get:n(55)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(1),i=n(4),o=n(88);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(113),i=n(45);t.exports=n(59)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(7).f,i=n(36),o=n(41),s=n(19),a=n(39),u=n(40),c=n(76),l=n(108),f=n(38),h=n(6),p=n(29).fastKey,d=n(45),v=h?"_s":"size",y=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){a(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),h&&r(l.prototype,"size",{get:function(){return d(this,e)[v]}}),l},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(113),i=n(45);t.exports=n(59)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(26)(0),o=n(12),s=n(29),a=n(96),u=n(116),c=n(4),l=n(3),f=n(45),h=s.getWeak,p=Object.isExtensible,d=u.ufstore,v={},y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(c(t)){var e=h(t);return!0===e?d(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},m=t.exports=n(59)("WeakMap",y,g,u,!0,!0);l(function(){return 7!=(new m).set((Object.freeze||Object)(v),7).get(v)})&&(a((r=u.getConstructor(y,"WeakMap")).prototype,g),s.NEED=!0,i(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];o(e,t,function(e,i){if(c(e)&&!p(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(41),i=n(29).getWeak,o=n(1),s=n(4),a=n(39),u=n(40),c=n(26),l=n(14),f=n(45),h=c(5),p=c(6),d=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){a(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,void 0!=r&&u(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!s(t))return!1;var n=i(t);return!0===n?v(f(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=i(t);return!0===n?v(f(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){var r=n(24),i=n(8);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(37),i=n(51),o=n(1),s=n(2).Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var r=n(52),i=n(4),o=n(8),s=n(19),a=n(5)("isConcatSpreadable");t.exports=function t(e,n,u,c,l,f,h,p){for(var d,v,y=l,g=0,m=!!h&&s(h,p,3);g<c;){if(g in u){if(d=m?m(u[g],g,n):u[g],v=!1,i(d)&&(v=void 0!==(v=d[a])?!!v:r(d)),v&&f>0)y=t(e,n,d,o(d.length),y,f-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=d}y++}g++}return y}},function(t,e,n){var r=n(8),i=n(72),o=n(23);t.exports=function(t,e,n,s){var a=String(o(t)),u=a.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return a;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),s?h+a:a+h}},function(t,e,n){var r=n(34),i=n(15),o=n(47).f;t.exports=function(t){return function(e){for(var n,s=i(e),a=r(s),u=a.length,c=0,l=[];u>c;)o.call(s,n=a[c++])&&l.push(t?[n,s[n]]:s[n]);return l}}},function(t,e,n){var r=n(48),i=n(123);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(40);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){n(126),t.exports=n(328)},function(t,e,n){"use strict";(function(t){if(n(127),n(324),n(325),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function r(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&r(Array,t,Function.call.bind([][t]))})}).call(this,n(90))},function(t,e,n){n(128),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(208),n(209),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(85),n(232),n(233),n(109),n(234),n(235),n(236),n(237),n(238),n(112),n(114),n(115),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),t.exports=n(18)},function(t,e,n){"use strict";var r=n(2),i=n(14),o=n(6),s=n(0),a=n(12),u=n(29).KEY,c=n(3),l=n(49),f=n(42),h=n(33),p=n(5),d=n(92),v=n(65),y=n(129),g=n(52),m=n(1),w=n(4),b=n(15),x=n(22),_=n(32),S=n(36),E=n(95),k=n(16),T=n(7),O=n(34),A=k.f,R=T.f,I=E.f,j=r.Symbol,N=r.JSON,P=N&&N.stringify,C=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,L=l("symbol-registry"),M=l("symbols"),B=l("op-symbols"),F=Object.prototype,q="function"==typeof j,z=r.QObject,H=!z||!z.prototype||!z.prototype.findChild,V=o&&c(function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(F,e);r&&delete F[e],R(t,e,n),r&&t!==F&&R(F,e,r)}:R,J=function(t){var e=M[t]=S(j.prototype);return e._k=t,e},K=q&&"symbol"==typeof j.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof j},W=function(t,e,n){return t===F&&W(B,e,n),m(t),e=x(e,!0),m(n),i(M,e)?(n.enumerable?(i(t,C)&&t[C][e]&&(t[C][e]=!1),n=S(n,{enumerable:_(0,!1)})):(i(t,C)||R(t,C,_(1,{})),t[C][e]=!0),V(t,e,n)):R(t,e,n)},$=function(t,e){m(t);for(var n,r=y(e=b(e)),i=0,o=r.length;o>i;)W(t,n=r[i++],e[n]);return t},Y=function(t){var e=U.call(this,t=x(t,!0));return!(this===F&&i(M,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(M,t)||i(this,C)&&this[C][t])||e)},X=function(t,e){if(t=b(t),e=x(e,!0),t!==F||!i(M,e)||i(B,e)){var n=A(t,e);return!n||!i(M,e)||i(t,C)&&t[C][e]||(n.enumerable=!0),n}},G=function(t){for(var e,n=I(b(t)),r=[],o=0;n.length>o;)i(M,e=n[o++])||e==C||e==u||r.push(e);return r},Q=function(t){for(var e,n=t===F,r=I(n?B:b(t)),o=[],s=0;r.length>s;)!i(M,e=r[s++])||n&&!i(F,e)||o.push(M[e]);return o};q||(a((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(B,n),i(this,C)&&i(this[C],t)&&(this[C][t]=!1),V(this,t,_(1,n))};return o&&H&&V(F,t,{configurable:!0,set:e}),J(t)}).prototype,"toString",function(){return this._k}),k.f=X,T.f=W,n(37).f=E.f=G,n(47).f=Y,n(51).f=Q,o&&!n(30)&&a(F,"propertyIsEnumerable",Y,!0),d.f=function(t){return J(p(t))}),s(s.G+s.W+s.F*!q,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)p(Z[tt++]);for(var et=O(p.store),nt=0;et.length>nt;)v(et[nt++]);s(s.S+s.F*!q,"Symbol",{for:function(t){return i(L,t+="")?L[t]:L[t]=j(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!q,"Object",{create:function(t,e){return void 0===e?S(t):$(S(t),e)},defineProperty:W,defineProperties:$,getOwnPropertyDescriptor:X,getOwnPropertyNames:G,getOwnPropertySymbols:Q}),N&&s(s.S+s.F*(!q||c(function(){var t=j();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!K(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,P.apply(N,r)}}),j.prototype[D]||n(11)(j.prototype,D,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(34),i=n(51),o=n(47);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},function(t,e,n){var r=n(0);r(r.S,"Object",{create:n(36)})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(6),"Object",{defineProperty:n(7).f})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(6),"Object",{defineProperties:n(94)})},function(t,e,n){var r=n(15),i=n(16).f;n(25)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(9),i=n(17);n(25)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(9),i=n(34);n(25)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(25)("getOwnPropertyNames",function(){return n(95).f})},function(t,e,n){var r=n(4),i=n(29).onFreeze;n(25)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(4),i=n(29).onFreeze;n(25)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(4),i=n(29).onFreeze;n(25)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(4);n(25)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(4);n(25)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(4);n(25)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(96)})},function(t,e,n){var r=n(0);r(r.S,"Object",{is:n(145)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(69).set})},function(t,e,n){"use strict";var r=n(48),i={};i[n(5)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(97)})},function(t,e,n){var r=n(7).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(6)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(4),i=n(17),o=n(5)("hasInstance"),s=Function.prototype;o in s||n(7).f(s,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(0),i=n(99);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(0),i=n(100);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(2),i=n(14),o=n(20),s=n(71),a=n(22),u=n(3),c=n(37).f,l=n(16).f,f=n(7).f,h=n(43).trim,p=r.Number,d=p,v=p.prototype,y="Number"==o(n(36)(v)),g="trim"in String.prototype,m=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=g?e.trim():h(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var s,u=e.slice(2),c=0,l=u.length;c<l;c++)if((s=u.charCodeAt(c))<48||s>i)return NaN;return parseInt(u,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(y?u(function(){v.valueOf.call(n)}):"Number"!=o(n))?s(new d(m(e)),n,p):m(e)};for(var w,b=n(6)?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)i(d,w=b[x])&&!i(p,w)&&f(p,w,l(d,w));p.prototype=v,v.constructor=p,n(12)(r,"Number",p)}},function(t,e,n){"use strict";var r=n(0),i=n(24),o=n(101),s=n(72),a=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+s.call("0",7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2==1?d(t,e-1,n*t):d(t*t,e/2,n)};r(r.P+r.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)(function(){a.call({})})),"Number",{toFixed:function(t){var e,n,r,a,u=o(this,l),c=i(t),v="",y="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*d(2,69,1))-69)<0?u*d(2,-e,1):u/d(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(d(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),y=p()}else f(0,n),f(1<<-e,0),y=p()+s.call("0",c);return y=c>0?v+((a=y.length)<=c?"0."+s.call("0",c-a)+y:y.slice(0,a-c)+"."+y.slice(a-c)):v+y}})},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(101),s=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==s.call(1,void 0)})||!i(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(0),i=n(2).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isInteger:n(102)})},function(t,e,n){var r=n(0);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),i=n(102),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),i=n(100);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(0),i=n(99);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(0),i=n(103),o=Math.sqrt,s=Math.acosh;r(r.S+r.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(0),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),i=n(73);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(0),i=n(74);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(0);r(r.S,"Math",{fround:n(104)})},function(t,e,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,s=0,a=arguments.length,u=0;s<a;)u<(n=i(arguments[s++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(3)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log1p:n(103)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{sign:n(73)})},function(t,e,n){var r=n(0),i=n(74),o=Math.exp;r(r.S+r.F*n(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(0),i=n(74),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(0),i=n(35),o=String.fromCharCode,s=String.fromCodePoint;r(r.S+r.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,s=0;r>s;){if(e=+arguments[s++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(0),i=n(15),o=n(8);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<r&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){"use strict";n(43)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(75)(!0);n(76)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(0),i=n(75)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(78),s="".endsWith;r(r.P+r.F*n(79)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),a=void 0===n?r:Math.min(i(n),r),u=String(t);return s?s.call(e,u,a):e.slice(a-u.length,a)===u}})},function(t,e,n){"use strict";var r=n(0),i=n(78);r(r.P+r.F*n(79)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(72)})},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(78),s="".startsWith;r(r.P+r.F*n(79)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(13)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(13)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(13)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(13)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(13)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(13)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(13)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(13)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(13)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(13)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(13)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(13)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(13)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(22);r(r.P+r.F*n(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(0),i=n(207);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(r,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,e,n){var r=n(5)("toPrimitive"),i=Date.prototype;r in i||n(11)(i,r,n(210))},function(t,e,n){"use strict";var r=n(1),i=n(22);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(0);r(r.S,"Array",{isArray:n(52)})},function(t,e,n){"use strict";var r=n(19),i=n(0),o=n(9),s=n(105),a=n(80),u=n(8),c=n(81),l=n(82);i(i.S+i.F*!n(54)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=l(h);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==m||p==Array&&a(m))for(n=new p(e=u(h.length));e>g;g++)c(n,g,y?v(h[g],g):h[g]);else for(f=m.call(h),n=new p;!(i=f.next()).done;g++)c(n,g,y?s(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){"use strict";var r=n(0),i=n(81);r(r.S+r.F*n(3)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),i=n(15),o=[].join;r(r.P+r.F*(n(46)!=Object||!n(21)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(0),i=n(68),o=n(20),s=n(35),a=n(8),u=[].slice;r(r.P+r.F*n(3)(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=a(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=s(t,n),c=s(e,n),l=a(c-i),f=new Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(9),s=n(3),a=[].sort,u=[1,2,3];r(r.P+r.F*(s(function(){u.sort(void 0)})||!s(function(){u.sort(null)})||!n(21)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(0),i=n(26)(0),o=n(21)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(4),i=n(52),o=n(5)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(0),i=n(26)(1);r(r.P+r.F*!n(21)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(26)(2);r(r.P+r.F*!n(21)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(26)(3);r(r.P+r.F*!n(21)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(26)(4);r(r.P+r.F*!n(21)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(106);r(r.P+r.F*!n(21)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(0),i=n(106);r(r.P+r.F*!n(21)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(50)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!n(21)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(15),o=n(24),s=n(8),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(21)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=i(this),n=s(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(0);r(r.P,"Array",{copyWithin:n(107)}),n(31)("copyWithin")},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(84)}),n(31)("fill")},function(t,e,n){"use strict";var r=n(0),i=n(26)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(31)("find")},function(t,e,n){"use strict";var r=n(0),i=n(26)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(31)(o)},function(t,e,n){n(38)("Array")},function(t,e,n){var r=n(2),i=n(71),o=n(7).f,s=n(37).f,a=n(53),u=n(55),c=r.RegExp,l=c,f=c.prototype,h=/a/g,p=/a/g,d=new c(h)!==h;if(n(6)&&(!d||n(3)(function(){return p[n(5)("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")}))){c=function(t,e){var n=this instanceof c,r=a(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(d?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:f,c)};for(var v=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},y=s(l),g=0;y.length>g;)v(y[g++]);f.constructor=c,c.prototype=f,n(12)(r,"RegExp",c)}n(38)("RegExp")},function(t,e,n){"use strict";n(109);var r=n(1),i=n(55),o=n(6),s=/./.toString,a=function(t){n(12)(RegExp.prototype,"toString",t,!0)};n(3)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},function(t,e,n){n(56)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(56)("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,n){n(56)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(56)("split",2,function(t,e,r){"use strict";var i=n(53),o=r,s=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,u,c,l,f,h=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,p+"g");for(a||(r=new RegExp("^"+y.source+"$(?!\\s)",p));(u=y.exec(n))&&!((c=u.index+u[0].length)>d&&(h.push(n.slice(d,u.index)),!a&&u.length>1&&u[0].replace(r,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(u[f]=void 0)}),u.length>1&&u.index<n.length&&s.apply(h,u.slice(1)),l=u[0].length,d=c,h.length>=v));)y.lastIndex===u.index&&y.lastIndex++;return d===n.length?!l&&y.test("")||h.push(""):h.push(n.slice(d)),h.length>v?h.slice(0,v):h}}else"0".split(void 0,0).length&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,i){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,n){"use strict";var r,i,o,s,a=n(30),u=n(2),c=n(19),l=n(48),f=n(0),h=n(4),p=n(10),d=n(39),v=n(40),y=n(57),g=n(86).set,m=n(87)(),w=n(88),b=n(110),x=n(58),_=n(111),S=u.TypeError,E=u.process,k=E&&E.versions,T=k&&k.v8||"",O=u.Promise,A="process"==l(E),R=function(){},I=i=w.f,j=!!function(){try{var t=O.resolve(1),e=(t.constructor={})[n(5)("species")]=function(t){t(R,R)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==T.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{a?(i||(2==t._h&&U(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===e.promise?c(S("Promise-chain cycle")):(o=N(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!s&&l.exit(),c(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&C(t)})}},C=function(t){g.call(u,function(){var e,n,r,i=t._v,o=D(t);if(o&&(e=b(function(){A?E.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=A||D(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},U=function(t){g.call(u,function(){var e;A?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},L=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},M=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=N(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,c(M,r,1),c(L,r,1))}catch(t){L.call(r,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){L.call({_w:n,_d:!1},t)}}};j||(O=function(t){d(this,O,"Promise","_h"),p(t),r.call(this);try{t(c(M,this,1),c(L,this,1))}catch(t){L.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(41)(O.prototype,{then:function(t,e){var n=I(y(this,O));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(M,t,1),this.reject=c(L,t,1)},w.f=I=function(t){return t===O||t===s?new o(t):i(t)}),f(f.G+f.W+f.F*!j,{Promise:O}),n(42)(O,"Promise"),n(38)("Promise"),s=n(18).Promise,f(f.S+f.F*!j,"Promise",{reject:function(t){var e=I(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(a||!j),"Promise",{resolve:function(t){return _(a&&this===s?O:this,t)}}),f(f.S+f.F*!(j&&n(54)(function(t){O.all(t).catch(R)})),"Promise",{all:function(t){var e=this,n=I(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,s=1;v(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=I(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(116),i=n(45);n(59)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(0),i=n(60),o=n(89),s=n(1),a=n(35),u=n(8),c=n(4),l=n(2).ArrayBuffer,f=n(57),h=o.ArrayBuffer,p=o.DataView,d=i.ABV&&l.isView,v=h.prototype.slice,y=i.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||c(t)&&y in t}}),r(r.P+r.U+r.F*n(3)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(s(this),t);for(var n=s(this).byteLength,r=a(t,n),i=a(void 0===e?n:e,n),o=new(f(this,h))(u(i-r)),c=new p(this),l=new p(o),d=0;r<i;)l.setUint8(d++,c.getUint8(r++));return o}}),n(38)("ArrayBuffer")},function(t,e,n){var r=n(0);r(r.G+r.W+r.F*!n(60).ABV,{DataView:n(89).DataView})},function(t,e,n){n(27)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(27)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(27)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(0),i=n(10),o=n(1),s=(n(2).Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!n(3)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return s?s(r,e,u):a.call(r,e,u)}})},function(t,e,n){var r=n(0),i=n(36),o=n(10),s=n(1),a=n(4),u=n(3),c=n(97),l=(n(2).Reflect||{}).construct,f=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),h=!u(function(){l(function(){})});r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,p=i(a(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return a(d)?d:p}})},function(t,e,n){var r=n(7),i=n(0),o=n(1),s=n(22);i(i.S+i.F*n(3)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(16).f,o=n(1);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(77)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var r=n(16),i=n(17),o=n(14),s=n(0),a=n(4),u=n(1);s(s.S,"Reflect",{get:function t(e,n){var s,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(s=r.f(e,n))?o(s,"value")?s.value:void 0!==s.get?s.get.call(l):void 0:a(c=i(e))?t(c,n,l):void 0}})},function(t,e,n){var r=n(16),i=n(0),o=n(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(0),i=n(17),o=n(1);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),i=n(1),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(118)})},function(t,e,n){var r=n(0),i=n(1),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(7),i=n(16),o=n(17),s=n(14),a=n(0),u=n(32),c=n(1),l=n(4);a(a.S,"Reflect",{set:function t(e,n,a){var f,h,p=arguments.length<4?e:arguments[3],d=i.f(c(e),n);if(!d){if(l(h=o(e)))return t(h,n,a,p);d=u(0)}if(s(d,"value")){if(!1===d.writable||!l(p))return!1;if(f=i.f(p,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=a,r.f(p,n,f)}else r.f(p,n,u(0,a));return!0}return void 0!==d.set&&(d.set.call(p,a),!0)}})},function(t,e,n){var r=n(0),i=n(69);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(0),i=n(50)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(31)("includes")},function(t,e,n){"use strict";var r=n(0),i=n(119),o=n(9),s=n(8),a=n(10),u=n(83);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return a(t),e=s(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(31)("flatMap")},function(t,e,n){"use strict";var r=n(0),i=n(119),o=n(9),s=n(8),a=n(24),u=n(83);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=s(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:a(t)),r}}),n(31)("flatten")},function(t,e,n){"use strict";var r=n(0),i=n(75)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(120),o=n(58);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(120),o=n(58);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(43)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(43)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(0),i=n(23),o=n(8),s=n(53),a=n(55),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(77)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):a.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},function(t,e,n){n(65)("asyncIterator")},function(t,e,n){n(65)("observable")},function(t,e,n){var r=n(0),i=n(118),o=n(15),s=n(16),a=n(81);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=s.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=u(r,e=c[f++]))&&a(l,e,n);return l}})},function(t,e,n){var r=n(0),i=n(121)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(121)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(10),s=n(7);n(6)&&r(r.P+n(61),"Object",{__defineGetter__:function(t,e){s.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(10),s=n(7);n(6)&&r(r.P+n(61),"Object",{__defineSetter__:function(t,e){s.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(22),s=n(17),a=n(16).f;n(6)&&r(r.P+n(61),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=a(n,r))return e.get}while(n=s(n))}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(22),s=n(17),a=n(16).f;n(6)&&r(r.P+n(61),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=a(n,r))return e.set}while(n=s(n))}})},function(t,e,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(122)("Map")})},function(t,e,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(122)("Set")})},function(t,e,n){n(62)("Map")},function(t,e,n){n(62)("Set")},function(t,e,n){n(62)("WeakMap")},function(t,e,n){n(62)("WeakSet")},function(t,e,n){n(63)("Map")},function(t,e,n){n(63)("Set")},function(t,e,n){n(63)("WeakMap")},function(t,e,n){n(63)("WeakSet")},function(t,e,n){var r=n(0);r(r.G,{global:n(2)})},function(t,e,n){var r=n(0);r(r.S,"System",{global:n(2)})},function(t,e,n){var r=n(0),i=n(20);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(0),i=n(124),o=n(104);r(r.S,"Math",{fscale:function(t,e,n,r,s){return o(i(t,e,n,r,s))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,s=n>>16,a=r>>16,u=(s*o>>>0)+(i*o>>>16);return s*a+(u>>16)+((i*a>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(0);r(r.S,"Math",{scale:n(124)})},function(t,e,n){var r=n(0);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,s=n>>>16,a=r>>>16,u=(s*o>>>0)+(i*o>>>16);return s*a+(u>>>16)+((i*a>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(0),i=n(18),o=n(2),s=n(57),a=n(111);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(0),i=n(88),o=n(110);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(28),i=n(1),o=r.key,s=r.set;r.exp({defineMetadata:function(t,e,n,r){s(t,e,i(n),o(r))}})},function(t,e,n){var r=n(28),i=n(1),o=r.key,s=r.map,a=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=s(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=a.get(e);return u.delete(n),!!u.size||a.delete(e)}})},function(t,e,n){var r=n(28),i=n(1),o=n(17),s=r.has,a=r.get,u=r.key,c=function(t,e,n){if(s(t,e,n))return a(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(114),i=n(123),o=n(28),s=n(1),a=n(17),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=a(t);if(null===o)return n;var s=l(o,e);return s.length?n.length?i(new r(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return l(s(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(28),i=n(1),o=r.get,s=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(28),i=n(1),o=r.keys,s=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,n){var r=n(28),i=n(1),o=n(17),s=r.has,a=r.key,u=function(t,e,n){if(s(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(28),i=n(1),o=r.has,s=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(28),i=n(1),o=n(10),s=r.key,a=r.set;r.exp({metadata:function(t,e){return function(n,r){a(t,e,(void 0!==r?i:o)(n),s(r))}}})},function(t,e,n){var r=n(0),i=n(87)(),o=n(2).process,s="process"==n(20)(o);r(r.G,{asap:function(t){var e=s&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(18),s=n(87)(),a=n(5)("observable"),u=n(10),c=n(1),l=n(39),f=n(41),h=n(11),p=n(40),d=p.RETURN,v=function(t){return null==t?void 0:u(t)},y=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},w=function(t,e){c(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}g(this)&&y(this)};w.prototype=f({},{unsubscribe:function(){m(this)}});var b=function(t){this._s=t};b.prototype=f({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{m(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{y(e)}finally{throw t}}return y(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{y(e)}finally{throw t}}return y(e),t}}});var x=function(t){l(this,x,"Observable","_f")._f=u(t)};f(x.prototype,{subscribe:function(t){return new w(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})})}}),f(x,{from:function(t){var e="function"==typeof this?this:x,n=v(c(t)[a]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return s(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return s(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),h(x.prototype,a,function(){return this}),r(r.G,{Observable:x}),n(38)("Observable")},function(t,e,n){var r=n(2),i=n(0),o=n(58),s=[].slice,a=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&s.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*a,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(0),i=n(86);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(85),i=n(34),o=n(12),s=n(2),a=n(11),u=n(44),c=n(5),l=c("iterator"),f=c("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],w=s[g],b=w&&w.prototype;if(b&&(b[l]||a(b,l,h),b[f]||a(b,f,g),u[g]=h,m))for(y in r)b[y]||o(b,y,r[y],!0)}},function(t,e,n){(function(e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",v={},y={};y[s]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(j([])));m&&m!==r&&i.call(m,s)&&(y=m);var w=E.prototype=_.prototype=Object.create(y);S.prototype=w.constructor=E,E.constructor=S,E[u]=S.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},l.awrap=function(t){return{__await:t}},k(T.prototype),T.prototype[a]=function(){return this},l.AsyncIterator=T,l.async=function(t,e,n,r){var i=new T(b(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(w),w[u]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=j,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function b(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new I(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return N()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=x(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function _(){}function S(){}function E(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(t){function n(e,r,o,s){var a=x(t[e],t,r);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},s)}s(a.arg)}var r;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function i(){return new Promise(function(r,i){n(t,e,r,i)})}return r=r?r.then(i,i):i()}}function O(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,O(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:n,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(90))},function(t,e,n){n(326),t.exports=n(18).RegExp.escape},function(t,e,n){var r=n(0),i=n(327)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var s=e[i](o),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){r("next",t)},function(t){r("throw",t)});t(a)}("next")})}}var o=n(329),s=n(330),a=n(331),u=function(t){this.opts=t,this.solid=s,this.authing=null,this.solid.trackSession(function(t){})};u.prototype={getAuthingInsatance:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new o({clientId:t.opts.clientId,secret:t.opts.secret});case 2:return n=e.sent,t.authing=n,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,t)}))()},check:function(){return this.authing},compileStr:function(t){for(var e=String.fromCharCode(t.charCodeAt(0)+t.length),n=1;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)+t.charCodeAt(n-1));return a(escape(e))},registerInSolid:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},loginInSolid:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=t||"https://solid.authing.cn",n.next=3,e.solid.currentSession();case 3:if(r=n.sent){n.next=9;break}return n.next=7,e.solid.login(t);case 7:n.next=10;break;case 9:return n.abrupt("return",r);case 10:case"end":return n.stop()}},n,e)}))()},logoutFromSolid:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.solid.logout());case 1:case"end":return e.stop()}},e,t)}))()},getSolidCurrentSession:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.solid.currentSession();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,t)}))()},trackSolidSession:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.solid.trackSession();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,t)}))()},getSolidUsername:function(t){var e=t;return 1!==e.split(".").length&&(e=t.split(".")[0].split("://")[1]),e},login:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r,i,o,s,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.check()){e.next=2;break}throw"Please use getAuthingInsatance first";case 2:return e.next=4,t.loginInSolid();case 4:return n=e.sent,r=t.getSolidUsername(n.webId),i=t.compileStr(r),o={unionid:i},e.prev=8,e.next=11,t.authing.login(o);case 11:return s=e.sent,localStorage.setItem("_authing_userId",s._id),e.abrupt("return",s);case 16:if(e.prev=16,e.t0=e.catch(8),2004!==e.t0.message.code){e.next=24;break}return a={client_id:n.authorization.client_id,idp:n.idp,webId:n.webId},u={unionid:i,username:r,oauth:JSON.stringify(a),nickname:r,registerMethod:"oauth:solid"},e.next=23,t.authing.register(u);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}},e,t,[[8,16]])}))()},register:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.check()){e.next=2;break}throw"Please use getAuthingInsatance first";case 2:return e.next=4,t.loginInSolid();case 4:return n=e.sent,r={client_id:n.authorization.client_id,idp:n.idp,webId:n.webId},i=t.getSolidUsername(n.webId),o=t.compileStr(i),s={unionid:o,username:i,oauth:JSON.stringify(r),nickname:i,registerMethod:"oauth:solid"},e.next=11,t.authing.register(s);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,t)}))()},logout:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.check()){e.next=2;break}throw"Please use getAuthingInsatance first";case 2:return e.prev=2,e.next=5,t.logoutFromSolid();case 5:if(!localStorage.getItem("_authing_token")){e.next=13;break}return e.next=8,t.authing.logout(localStorage.getItem("_authing_userId"));case 8:return n=e.sent,localStorage.removeItem("_authing_userId"),e.abrupt("return",n);case 13:return e.abrupt("return",null);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0;case 20:case"end":return e.stop()}},e,t,[[2,16]])}))()}},"object"===("undefined"==typeof window?"undefined":r(window))&&(window.SolidAuthing=u),t.exports=u},function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";var r=n(2),i=n(15),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";(function(e){var r=n(0),i=n(18),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=n(3):void 0!==e&&(a=n(3)),a),transformRequest:[function(t,e){return i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){u.headers[t]={}}),r.forEach(["post","put","patch"],function(t){u.headers[t]=r.merge(o)}),t.exports=u}).call(this,n(17))},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(0),i=n(19),o=n(21),s=n(22),a=n(23),u=n(4),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(24);t.exports=function(t){return new Promise(function(e,l){var f=t.data,h=t.headers;r.isFormData(f)&&delete h["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(t.url)||(p=new window.XDomainRequest,d="onload",v=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var y=t.auth.username||"",g=t.auth.password||"";h.Authorization="Basic "+c(y+":"+g)}if(p.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[d]=function(){if(p&&(4===p.readyState||v)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:t,request:p};i(e,l,r),p=null}},p.onerror=function(){l(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var m=n(25),w=(t.withCredentials||a(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;w&&(h[t.xsrfHeaderName]=w)}if("setRequestHeader"in p&&r.forEach(h,function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete h[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),l(t),p=null)}),void 0===f&&(f=null),p.send(f)})}},function(t,e,n){"use strict";var r=n(20);t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";(function(e){var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=2e4,u=n(13),c=n(33),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n={timeout:a,method:"POST"};this.options=o({},n,e)}return s(t,[{key:"request",value:function(t){return this.options.data=t,u(this.options).then(function(t){var e=t.data;if(e.errors)throw e.errors[0];return e.data})}}]),t}(),f=n(34);r=c.inBrowser?function(t){var e=new f.JSEncrypt;return e.setPublicKey(c.openSSLSecret),e.encrypt(t)}:function(t){var n,r=c.openSSLSecret;return n=new e(t),f.publicEncrypt({key:new e(r),padding:f.constants.RSA_PKCS1_PADDING},n).toString("base64")};var h=function(t){var e=this;if(!t.clientId)throw"clientId is not provided";if(!t.secret)throw"app secret is not provided";return t.host&&(c.services.user.host=t.host.user||c.services.user.host,c.services.oauth.host=t.host.oauth||c.services.oauth.host),this.opts=t,this.ownerAuth={authed:!1,authSuccess:!1,token:null},this.userAuth={authed:!1,authSuccess:!1,token:null},this.initUserClient(),this.initOwnerClient(),this.initOAuthClient(),this._auth().then(function(t){if(!t)throw e.ownerAuth.authed=!0,e.ownerAuth.authSuccess=!1,"auth failed, please check your secret and client ID.";return e.initOwnerClient(t),e._loginFromLocalStorage(),e}).catch(function(t){throw e.ownerAuth.authed=!0,e.ownerAuth.authSuccess=!1,"auth failed: "+t.message.message})};h.prototype={constructor:h,_initClient:function(t){var e={baseURL:c.services.user.host};return t&&(e.headers={Authorization:"Bearer "+t}),new l(e)},oAuthClientByUserToken:function(){this.haveLogined();var t=this.userAuth.token;return this._oAuthClientByUserToken||(this._oAuthClientByUserToken=new l({baseURL:c.services.oauth.host,headers:{Authorization:"Bearer "+t}})),this._oAuthClientByUserToken},initUserClient:function(t){t&&(this.userAuth={authed:!0,authSuccess:!0,token:t},c.inBrowser&&localStorage.setItem("_authing_token",t)),this.UserClient=this._initClient(t)},initOwnerClient:function(t){t&&(this.ownerAuth={authed:!0,authSuccess:!0,token:t}),this.ownerClient=this._initClient(t)},initOAuthClient:function(){this.OAuthClient=new l({baseURL:c.services.oauth.host})},_auth:function(){this._AuthService||(this._AuthService=new l({baseURL:c.services.user.host}));var t=this.opts.secret,e=this.opts.clientId,n=this;return this._AuthService.request({query:'query {\n\t\t\t\t\tgetAccessTokenByAppSecret(secret: "'+t+'", clientId: "'+e+'")\n\t\t\t\t}'}).then(function(t){return n._AuthService=new l({baseURL:c.services.user.host,headers:{Authorization:"Bearer "+t.getAccessTokenByAppSecret}}),t.getAccessTokenByAppSecret})},_loginFromLocalStorage:function(){if(c.inBrowser){var t=localStorage.getItem("_authing_token");t&&this.initUserClient(t)}},checkLoginStatus:function(t){return this.UserClient.request({operationName:"checkLoginStatus",query:"query checkLoginStatus($token: String) {\n\t\t\t\t\tcheckLoginStatus(token: $token) {\n\t\t\t\t\t\tstatus\n\t\t\t\t\t\tcode\n\t\t\t\t\t\tmessage\n\t\t\t\t\t}\n\t\t\t\t}",variables:{token:t}}).then(function(t){return t.checkLoginStatus})},_readOAuthList:function(){return this.haveAccess(),this._OAuthService||(this._OAuthService=new l({baseURL:c.services.oauth.host,headers:{Authorization:"Bearer "+this.ownerAuth.token}})),this._OAuthService.request({operationName:"getOAuthList",query:"query getOAuthList($clientId: String!) {\n\t\t\t\t\tReadOauthList(clientId: $clientId) {\n\t\t\t\t\t    _id\n\t\t\t\t\t    name\n\t\t\t\t\t    image\n\t\t\t\t\t    description\n\t\t\t\t\t    enabled\n\t\t\t\t\t    client\n\t\t\t\t\t    user\n\t\t\t\t\t    url\n\t\t\t\t\t    alias\n\t\t\t\t\t}\n\t\t\t\t}",variables:{clientId:this.opts.clientId}}).then(function(t){return t.ReadOauthList})},haveAccess:function(){if(!this.ownerAuth.authSuccess)throw"have no access, please check your secret and client ID."},haveLogined:function(){if(!this.userAuth.authSuccess)throw"not logined yet, please login first."},_chooseClient:function(){return this.userAuth.authSuccess?this.UserClient:this.ownerClient},_login:function(t){if(!t)throw"options is not provided.";return t.registerInClient=this.opts.clientId,t.password&&(t.password=r(t.password)),this.haveAccess(),this.UserClient.request({operationName:"login",query:"mutation login($unionid: String, $email: String, $password: String, $lastIP: String, $registerInClient: String!, $verifyCode: String) {\n\t\t\t\t    login(unionid: $unionid, email: $email, password: $password, lastIP: $lastIP, registerInClient: $registerInClient, verifyCode: $verifyCode) {\n\t\t\t\t\t    _id\n\t\t\t\t\t    email\n\t\t\t\t\t    emailVerified\n\t\t\t\t\t    username\n\t\t\t\t\t    nickname\n\t\t\t\t\t    company\n\t\t\t\t\t    photo\n\t\t\t\t\t    browser\n\t\t\t\t\t    token\n\t\t\t\t\t    tokenExpiredAt\n\t\t\t\t\t    loginsCount\n\t\t\t\t\t    lastLogin\n\t\t\t\t\t    lastIP\n\t\t\t\t\t    signedUp\n\t\t\t\t\t    blocked\n\t\t\t\t\t    isDeleted\n\t\t\t\t    }\n\t\t\t\t}",variables:t}).then(function(t){return t.login})},login:function(t){var e=this;return this._login(t).then(function(t){return t&&e.initUserClient(t.token),t})},register:function(t){if(this.haveAccess(),!t)throw"options is not provided";return t.registerInClient=this.opts.clientId,t.password&&(t.password=r(t.password)),this.UserClient.request({operationName:"register",query:"\n\t\t\t\tmutation register(\n\t\t\t\t\t$unionid: String,\n\t\t\t\t    $email: String, \n\t\t\t\t    $password: String, \n\t\t\t\t    $lastIP: String, \n\t\t\t\t    $forceLogin: Boolean,\n\t\t\t\t    $registerInClient: String!,\n\t\t\t\t    $oauth: String,\n\t\t\t\t    $username: String,\n\t\t\t\t    $nickname: String,\n\t\t\t\t    $registerMethod: String,\n\t\t\t\t\t\t$photo: String,\n\t\t\t\t\t\t$company: String\n\t\t\t\t) {\n\t\t\t\t    register(userInfo: {\n\t\t\t\t    \tunionid: $unionid,\n\t\t\t\t        email: $email,\n\t\t\t\t        password: $password,\n\t\t\t\t        lastIP: $lastIP,\n\t\t\t\t        forceLogin: $forceLogin,\n\t\t\t\t        registerInClient: $registerInClient,\n\t\t\t\t        oauth: $oauth,\n\t\t\t\t        registerMethod: $registerMethod,\n\t\t\t\t        photo: $photo,\n\t\t\t\t        username: $username,\n\t\t\t\t\t\t\t\tnickname: $nickname,\n\t\t\t\t\t\t\t\tcompany: $company\n\t\t\t\t    }) {\n\t\t\t\t        _id,\n\t\t\t\t        email,\n\t\t\t\t        emailVerified,\n\t\t\t\t        username,\n\t\t\t\t        nickname,\n\t\t\t\t        company,\n\t\t\t\t        photo,\n\t\t\t\t        browser,\n\t\t\t\t        password,\n\t\t\t\t        token,\n\t\t\t\t        group {\n\t\t\t\t            name\n\t\t\t\t        },\n\t\t\t\t        blocked\n\t\t\t\t    }\n\t\t\t\t}",variables:t}).then(function(t){return t.register})},logout:function(t){if(this.haveAccess(),!t)throw"_id is not provided";return this.userAuth={authed:!1,authSuccess:!1,token:null},c.inBrowser&&localStorage.removeItem("_authing_token"),this.update({_id:t,tokenExpiredAt:0})},user:function(t){if(this.haveAccess(),!t)throw"options is not provided";if(!t.id)throw"id in options is not provided";return t.registerInClient=this.opts.clientId,this._chooseClient().request({operationName:"user",query:"query user($id: String!, $registerInClient: String!){\n\t\t\t\tuser(id: $id, registerInClient: $registerInClient) {\n\t\t\t\t\t_id\n\t\t\t\t\tunionid\n\t\t\t\t\temail\n\t\t\t\t\temailVerified\n\t\t\t\t\tusername\n\t\t\t\t\tnickname\n\t\t\t\t\tcompany\n\t\t\t\t\tphoto\n\t\t\t\t\tbrowser\n\t\t\t\t\tregisterInClient\n\t\t\t\t\tregisterMethod\n\t\t\t\t\toauth\n\t\t\t\t\ttoken\n\t\t\t\t\ttokenExpiredAt\n\t\t\t\t\tloginsCount\n\t\t\t\t\tlastLogin\n\t\t\t\t\tlastIP\n\t\t\t\t\tsignedUp\n\t\t\t\t\tblocked\n\t\t\t\t\tisDeleted\n\t\t\t\t\tuserLocation {\n\t\t\t\t\t\t_id\n\t\t\t\t\t\twhen\n\t\t\t\t\t\twhere\n\t\t\t\t\t}\n\t\t\t\t\tuserLoginHistory {\n\t\t\t\t\t\ttotalCount\n\t\t\t\t\t\tlist {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\twhen\n\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t\tip\n\t\t\t\t\t\t\tresult\n\t\t\t\t\t\t}\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}",variables:t}).then(function(t){return t.user})},list:function(t,e){this.haveAccess(),t=t||1,e=e||10;var n={registerInClient:this.opts.clientId,page:t,count:e};return this.ownerClient.request({operationName:"users",query:"query users($registerInClient: String, $page: Int, $count: Int){\n\t\t\t\tusers(registerInClient: $registerInClient, page: $page, count: $count) {\n\t\t\t\t    totalCount\n\t\t\t\t    list {\n\t\t\t\t\t\t_id\n\t\t\t\t\t\temail\n\t\t\t\t\t\temailVerified\n\t\t\t\t\t\tusername\n\t\t\t\t\t\tnickname\n\t\t\t\t\t\tcompany\n\t\t\t\t\t\tphoto\n\t\t\t\t\t\tbrowser\n\t\t\t\t\t\tpassword\n\t\t\t\t\t\tregisterInClient\n\t\t\t\t\t\ttoken\n\t\t\t\t\t\ttokenExpiredAt\n\t\t\t\t\t\tloginsCount\n\t\t\t\t\t\tlastLogin\n\t\t\t\t\t\tlastIP\n\t\t\t\t\t\tsignedUp\n\t\t\t\t\t\tblocked\n\t\t\t\t\t\tisDeleted\n\t\t\t\t\t\tgroup {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\tdescriptions\n\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclientType {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\timage\n\t\t\t\t\t\t\texample\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuserLocation {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\twhen\n\t\t\t\t\t\t\twhere\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuserLoginHistory {\n\t\t\t\t\t\t\ttotalCount\n\t\t\t\t\t\t\tlist{\n\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\twhen\n\t\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t\t\tip\n\t\t\t\t\t\t\t\tresult\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsystemApplicationType {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\tdescriptions\n\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}",variables:n}).then(function(t){return t.users})},remove:function(t,e){if(this.haveAccess(),!t)throw"_id is not provided";return this.ownerClient.request({query:"mutation removeUsers($ids: [String], $registerInClient: String, $operator: String){\n\t\t\t\t  removeUsers(ids: $ids, registerInClient: $registerInClient, operator: $operator) {\n\t\t\t\t    _id\n\t\t\t\t  }\n\t\t\t\t}",variables:{ids:[t],registerInClient:this.opts.clientId,operator:e}}).then(function(t){return t.removeUsers})},_uploadAvatar:function(t){return this._chooseClient().request({operationName:"qiNiuUploadToken",query:"query qiNiuUploadToken {\n\t\t\t\tqiNiuUploadToken\n\t\t\t}"}).then(function(t){return t.qiNiuUploadToken}).then(function(e){if(!e)throw{graphQLErrors:[{message:{message:"token"}}]};var n=new FormData;return n.append("file",t.photo),n.append("token",e),u.post("https://upload.qiniup.com/",n,{method:"post",headers:{"Content-Type":"multipart/form-data"}})}).then(function(t){return t.data}).then(function(e){return e.key&&(t.photo="https://usercontents.authing.cn/"+e.key),t}).catch(function(t){if(t.graphQLErrors)throw t.graphQLErrors[0];throw{message:{message:t}}})},update:function(t){if(this.haveAccess(),!t)throw"options is not provided";if(!t._id)throw"_id in options is not provided";if(t.password){if(!t.oldPassword)throw"oldPasswordin options is not provided";t.password=r(t.password),t.oldPassword=r(t.oldPassword)}t.registerInClient=this.opts.clientId;var e={_id:"String!",email:"String",emailVerified:"Boolean",username:"String",nickname:"String",company:"String",photo:"String",oauth:"String",browser:"String",password:"String",oldPassword:"String",registerInClient:"String!",token:"String",tokenExpiredAt:"String",loginsCount:"Int",lastLogin:"String",lastIP:"String",signedUp:"String",blocked:"Boolean",isDeleted:"Boolean"},n="_id\n\t\t\t\temail\n\t\t\t\temailVerified\n\t\t\t\tusername\n\t\t\t\tnickname\n\t\t\t\tcompany\n\t\t\t\tphoto\n\t\t\t\tbrowser\n\t\t\t\tregisterInClient\n\t\t\t\tregisterMethod\n\t\t\t\toauth\n\t\t\t\ttoken\n\t\t\t\ttokenExpiredAt\n\t\t\t\tloginsCount\n\t\t\t\tlastLogin\n\t\t\t\tlastIP\n\t\t\t\tsignedUp\n\t\t\t\tblocked\n\t\t\t\tisDeleted";function i(t){var n=[],r=[];for(var i in t)e[i]&&(n.push("$"+i+": "+e[i]),r.push(i+": $"+i));return{_args:n,_argsString:n.join(", "),_argsFiller:r}}var o=this._chooseClient();if(t.photo&&"string"!=typeof t.photo)return this._uploadAvatar(t).then(function(t){var e=i(t);return o.request({operationName:"UpdateUser",query:"\n\t\t\t\t\t\t\tmutation UpdateUser("+e._argsString+"){\n\t\t\t\t\t\t\t  updateUser(options: {\n\t\t\t\t\t\t\t\t  "+e._argsFiller.join(", ")+"\n\t\t\t\t\t\t\t  }) {\n\t\t\t\t\t\t\t\t"+n+"\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t",variables:t})}).then(function(t){return t.updateUser});var s=i(t);return o.request({operationName:"UpdateUser",query:"\n\t\t\t\tmutation UpdateUser("+s._argsString+"){\n\t\t\t\t  updateUser(options: {\n\t\t\t\t  \t"+s._argsFiller.join(", ")+"\n\t\t\t\t  }) {\n\t\t\t\t    "+n+"\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t",variables:t}).then(function(t){return t.updateUser})},readOAuthList:function(){return this._readOAuthList().then(function(t){if(t)return t.filter(function(t){return t.enabled});throw{message:"OAuth"}})},sendResetPasswordEmail:function(t){if(!t)throw"options is not provided";if(!t.email)throw"email in options is not provided";return t.client=this.opts.clientId,this.UserClient.request({operationName:"sendResetPasswordEmail",query:"\n\t\t\t\tmutation sendResetPasswordEmail(\n\t\t\t\t\t$email: String!,\n\t\t\t\t\t$client: String!\n\t\t\t\t){\n\t\t\t\t\tsendResetPasswordEmail(\n\t\t\t\t\t\temail: $email,\n\t\t\t\t\t\tclient: $client\n\t\t\t\t\t) {\n\t\t\t\t\t  \tmessage\n\t\t\t\t\t  \tcode\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t",variables:t}).then(function(t){return t.sendResetPasswordEmail})},verifyResetPasswordVerifyCode:function(t){if(!t)throw"options is not provided";if(!t.email)throw"email in options is not provided";if(!t.verifyCode)throw"verifyCode in options is not provided";return t.client=this.opts.clientId,this.UserClient.request({operationName:"verifyResetPasswordVerifyCode",query:"\n\t\t\t\tmutation verifyResetPasswordVerifyCode(\n\t\t\t\t\t$email: String!,\n\t\t\t\t\t$client: String!,\n\t\t\t\t\t$verifyCode: String!\n\t\t\t\t) {\n\t\t\t\t\tverifyResetPasswordVerifyCode(\n\t\t\t\t\t\temail: $email,\n\t\t\t\t\t\tclient: $client,\n\t\t\t\t\t\tverifyCode: $verifyCode\n\t\t\t\t\t) {\n\t\t\t\t\t  \tmessage\n\t\t\t\t\t  \tcode\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t",variables:t}).then(function(t){return t.verifyResetPasswordVerifyCode})},changePassword:function(t){if(!t)throw"options is not provided";if(!t.email)throw"email in options is not provided";if(!t.password)throw"password in options is not provided";if(!t.verifyCode)throw"verifyCode in options is not provided";return t.client=this.opts.clientId,t.password=r(t.password),this.UserClient.request({operationName:"changePassword",query:"\n\t\t\t\tmutation changePassword(\n\t\t\t\t\t$email: String!,\n\t\t\t\t\t$client: String!,\n\t\t\t\t\t$password: String!,\n\t\t\t\t\t$verifyCode: String!\n\t\t\t\t){\n\t\t\t\t\tchangePassword(\n\t\t\t\t\t\temail: $email,\n\t\t\t\t\t\tclient: $client,\n\t\t\t\t\t\tpassword: $password,\n\t\t\t\t\t\tverifyCode: $verifyCode\n\t\t\t\t\t) {\n\t\t\t\t\t\t_id\n\t\t\t\t\t\temail\n\t\t\t\t\t\temailVerified\n\t\t\t\t\t\tusername\n\t\t\t\t\t\tnickname\n\t\t\t\t\t\tcompany\n\t\t\t\t\t\tphoto\n\t\t\t\t\t\tbrowser\n\t\t\t\t\t\tregisterInClient\n\t\t\t\t\t\tregisterMethod\n\t\t\t\t\t\toauth\n\t\t\t\t\t\ttoken\n\t\t\t\t\t\ttokenExpiredAt\n\t\t\t\t\t\tloginsCount\n\t\t\t\t\t\tlastLogin\n\t\t\t\t\t\tlastIP\n\t\t\t\t\t\tsignedUp\n\t\t\t\t\t\tblocked\n\t\t\t\t\t\tisDeleted\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t",variables:t}).then(function(t){return t.changePassword})},sendVerifyEmail:function(t){if(!t.email)throw"email in options is not provided";return t.client=this.opts.clientId,this._AuthService.request({operationName:"sendVerifyEmail",query:"\n\t\t\t\tmutation sendVerifyEmail(\n\t\t\t\t\t$email: String!,\n\t\t\t\t\t$client: String!\n\t\t\t\t){\n\t\t\t\t\tsendVerifyEmail(\n\t\t\t\t\t\temail: $email,\n\t\t\t\t\t\tclient: $client\n\t\t\t\t\t) {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tcode,\n\t\t\t\t\t\tstatus\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t",variables:t}).then(function(t){return t.sendVerifyEmail})},selectAvatarFile:function(t){if(!c.inBrowser)throw"";var e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=function(){t(e.files[0])},e.click()},decodeToken:function(t){return this.UserClient.request({operationName:"decodeJwtToken",query:"query decodeJwtToken($token: String) {\n\t\t\t\tdecodeJwtToken(token: $token) {\n\t\t\t\t\t\tdata {\n\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\tclientId\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstatus {\n\t\t\t\t\t\t\tcode\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t}\n\t\t\t\t\t\tiat\n\t\t\t\t\t\texp\n\t\t\t\t\t}\n\t\t\t\t}",variables:{token:t}}).then(function(t){return t.decodeJwtToken})},readUserOAuthList:function(t){return this.oAuthClientByUserToken().request({operationName:"notBindOAuthList",query:"query notBindOAuthList($user: String, $client: String) {\n\t\t\t\tnotBindOAuthList(user: $user, client: $client) {\n\t\t\t\t\ttype\n\t\t\t\t\toAuthUrl\n\t\t\t\t\timage\n\t\t\t\t\tname\n\t\t\t\t\tbinded\n\t\t\t\t}\n\t\t\t}",variables:t}).then(function(t){return t.notBindOAuthList})},bindOAuth:function(t){if(!t)throw"options is not provided";if(!t.type)throw"type in options is not provided";if(!t.unionid)throw"unionid in options is not provided";if(!t.userInfo)throw"userInfo in options is not provided";return this.UserClient.request({operationName:"bindOtherOAuth",query:"mutation bindOtherOAuth(\n\t\t\t\t$user: String, \n\t\t\t\t$client: String, \n\t\t\t\t$type: String!, \n\t\t\t\t$unionid: String!, \n\t\t\t\t$userInfo: String!\n\t\t\t) {\n\t\t\t\tbindOtherOAuth (\n\t\t\t\t\tuser: $user, \n\t\t\t\t\tclient: $client, \n\t\t\t\t\ttype: $type, \n\t\t\t\t\tunionid: $unionid, \n\t\t\t\t\tuserInfo: $userInfo\n\t\t\t\t) {\n\t\t\t\t\t_id\n\t\t\t\t\tuser\n\t\t\t\t\tclient\n\t\t\t\t\ttype\n\t\t\t\t\tuserInfo\n\t\t\t\t\tunionid\n\t\t\t\t\tcreatedAt\n\t\t\t\t}\n\t\t\t}",variables:t})},unbindOAuth:function(t){if(!t)throw"options is not provided";if(!t.type)throw"type in options is not provided";return this.UserClient.request({operationName:"unbindOtherOAuth",query:"mutation unbindOtherOAuth(\n\t\t\t\t$user: String, \n\t\t\t\t$client: String,\n\t\t\t\t$type: String!\n\t\t\t){\n\t\t\t\tunbindOtherOAuth(\n\t\t\t\t\tuser: $user,\n\t\t\t\t\tclient: $client,\n\t\t\t\t\ttype: $type\n\t\t\t\t) {\n\t\t\t\t\t_id\n\t\t\t\t\tuser\n\t\t\t\t\tclient\n\t\t\t\t\ttype\n\t\t\t\t\tuserInfo\n\t\t\t\t\tunionid\n\t\t\t\t\tcreatedAt\n\t\t\t\t}\n\t\t\t}",variables:t})},unbindEmail:function(t){return this.UserClient.request({operationName:"unbindEmail",query:"mutation unbindEmail(\n\t\t\t\t$user: String, \n\t\t\t\t$client: String,\n\t\t\t){\n\t\t\t\tunbindEmail(\n\t\t\t\t\tuser: $user,\n\t\t\t\t\tclient: $client,\n\t\t\t\t) {\n\t\t\t\t\t_id\n\t\t\t\t\temail\n\t\t\t\t\temailVerified\n\t\t\t\t\tusername\n\t\t\t\t\tnickname\n\t\t\t\t\tcompany\n\t\t\t\t\tphoto\n\t\t\t\t\tbrowser\n\t\t\t\t\tregisterInClient\n\t\t\t\t\tregisterMethod\n\t\t\t\t\toauth\n\t\t\t\t\ttoken\n\t\t\t\t\ttokenExpiredAt\n\t\t\t\t\tloginsCount\n\t\t\t\t\tlastLogin\n\t\t\t\t\tlastIP\n\t\t\t\t\tsignedUp\n\t\t\t\t\tblocked\n\t\t\t\t\tisDeleted\n\t\t\t\t}\n\t\t\t}",variables:t})},randomWord:function(t,e,n){var r="",i=e,o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];t&&(i=Math.round(Math.random()*(n-e))+e);for(var s=0;s<i;s++)r+=o[Math.round(Math.random()*(o.length-1))];return r},genQRCode:function(t){var e=this.randomWord(!0,12,24);return sessionStorage.randomWord=e,u.get("https://oauth.authing.cn/oauth/wxapp/qrcode/"+t+"?random="+e)},checkQR:function(){var t=sessionStorage.randomWord||"";return u.post("https://oauth.authing.cn/oauth/wxapp/confirm/qr?random="+t)},startWXAppScaning:function(t){var e=this;t||(t={});var n=t.mount||"authing__qrcode-root-node",r=t.interval||1500,i=t.tips,o=!0;t.hasOwnProperty("redirect")&&(t.redirect||(o=!1));var s=t.onError,a=t.onSuccess,u=t.onIntervalStarting,c=document.getElementById(n),l=!1;c?c.style="position:relative":((c=document.createElement("div")).id=n,c.style="z-index: 65535;position: fixed;background: #fff;width: 300px;height: 300px;left: 50%;margin-left: -150px;display: flex;justify-content: center;align-items: center;top: 50%;margin-top: -150px;border: 1px solid #ccc;",document.getElementsByTagName("body")[0].appendChild(c),l=!0);var f=document.createElement("style"),h="#authing__retry a:hover{outline:0px;text-decoration:none;}#authing__spinner{position:absolute;left:50%;margin-left:-6px;}.spinner{margin:100px auto;width:20px;height:20px;position:relative}.container1>div,.container2>div,.container3>div{width:6px;height:6px;background-color:#00a1ea;border-radius:100%;position:absolute;-webkit-animation:bouncedelay 1.2s infinite ease-in-out;animation:bouncedelay 1.2s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner .spinner-container{position:absolute;width:100%;height:100%}.container2{-webkit-transform:rotateZ(45deg);transform:rotateZ(45deg)}.container3{-webkit-transform:rotateZ(90deg);transform:rotateZ(90deg)}.circle1{top:0;left:0}.circle2{top:0;right:0}.circle3{right:0;bottom:0}.circle4{left:0;bottom:0}.container2 .circle1{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.container3 .circle1{-webkit-animation-delay:-1.0s;animation-delay:-1.0s}.container1 .circle2{-webkit-animation-delay:-0.9s;animation-delay:-0.9s}.container2 .circle2{-webkit-animation-delay:-0.8s;animation-delay:-0.8s}.container3 .circle2{-webkit-animation-delay:-0.7s;animation-delay:-0.7s}.container1 .circle3{-webkit-animation-delay:-0.6s;animation-delay:-0.6s}.container2 .circle3{-webkit-animation-delay:-0.5s;animation-delay:-0.5s}.container3 .circle3{-webkit-animation-delay:-0.4s;animation-delay:-0.4s}.container1 .circle4{-webkit-animation-delay:-0.3s;animation-delay:-0.3s}.container2 .circle4{-webkit-animation-delay:-0.2s;animation-delay:-0.2s}.container3 .circle4{-webkit-animation-delay:-0.1s;animation-delay:-0.1s}@-webkit-keyframes bouncedelay{0%,80%,100%{-webkit-transform:scale(0.0)}40%{-webkit-transform:scale(1.0)}}@keyframes bouncedelay{0%,80%,100%{transform:scale(0.0);-webkit-transform:scale(0.0)}40%{transform:scale(1.0);-webkit-transform:scale(1.0)}}";f.type="text/css",f.styleSheet?f.styleSheet.cssText=h:f.innerHTML=h,document.getElementsByTagName("head")[0].appendChild(f);var p=function(){var t=document.getElementById("authing__spinner");c.removeChild(t)},d=function(t){var e=document.createElement("span");return e.class="authing__heading-subtitle",e.style=l?"margin-top:11px;display: block;font-weight: 400;font-size: 12px;color: #888;":"margin-top:11px;display: block;font-weight: 400;font-size: 15px;color: #888;ine-height: 48px;",e.innerHTML=t,e},v=function(t){var e=document.createElement("img");return e.class="authing__qrcode",e.src=t,e.width=240,e.height=240,e},y=function(t,e){var n=document.createElement("div");n.id="authing__retry",n.style="text-align:center;width: 240px;height: 240px;position: absolute;left: 50%;top: 0px;margin-left: -120px;background-color: rgba(0,0,0, 0.5);line-height:240px;color:#fff;font-weight:600;";var r=document.createElement("a");return r.innerHTML=t,r.style="color:#fff;border-bottom: 1px solid #fff;cursor: pointer;",r.onclick=e,n.appendChild(r),n},g=function(t,e){var n=d(e),r=document.createElement("div");r.id="authing__qrcode-wrapper",r.style="text-align: center";var i=v("https://usercontents.authing.cn/authing_user_manager_wxapp_qrcode.jpg");i.style=l?"margin-top: 16px;":"margin-top: 12px;",i.onload=function(){p()};var o=y("",function(){m()});r.appendChild(i),r.appendChild(o),r.appendChild(n),t.appendChild(r)},m=function(){c.innerHTML='<div id="authing__spinner" class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>',e.genQRCode(e.opts.clientId).then(function(t){if(200!=(t=t.data).code)g(c,t.message),s&&s(t);else{var n=t.data;if(sessionStorage.qrcodeUrl=n.qrcode,sessionStorage.qrcode=JSON.stringify(n),c){var l=document.createElement("div");l.id="authing__qrcode-wrapper",l.style="text-align: center";var f=v(n.qrcode);f.onload=function(){p();var t=0;t=setInterval(function(){u&&u(t),e.checkQR().then(function(e){var n=e.data.data;if(200===n.code)if(clearInterval(t),o){var r=y("",function(){window.location.href=n.redirect+"?code=200&data="+JSON.stringify(n.data)});setTimeout(function(){window.location.href=n.redirect+"?code=200&data="+JSON.stringify(n.data)},600),c.appendChild(r)}else r=y(""),c.appendChild(r),a&&a(n)})},r)};var h=d(i||" <strong></strong>  <strong></strong> ");l.appendChild(f),l.appendChild(h),c.appendChild(l)}}}).catch(function(t){g(c,""),s&&s(t)})};m()}},"object"===("undefined"==typeof window?"undefined":i(window))&&(window.Authing=h),t.exports=h}).call(this,n(8).Buffer)},function(t,e,n){"use strict";(function(t){var r=n(10),i=n(11),o=n(12);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return z(F(e,t.length-n),t,n,r)}function b(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return b(t,e,n,r)}function _(t,e,n,r){return z(q(e),t,n,r)}function S(t,e,n,r){return z(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function C(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(9))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(NaN),u=0,l=s>0?r-4:r,f=0;f<l;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e),1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(14)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(16),s=n(1);function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=a(s);u.Axios=o,u.create=function(t){return a(r.merge(s,t))},u.Cancel=n(6),u.CancelToken=n(31),u.isCancel=n(5),u.all=function(t){return Promise.all(t)},u.spread=n(32),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(26),s=n(27);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=a},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";var r=n(0);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,function(t,e){null!==t&&void 0!==t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";var r=n(0);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";function r(){this.message="String contains an invalid character"}r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,i=String(t),o="",s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.charAt(0|s)||(a="=",s%1);o+=a.charAt(63&e>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;e=e<<8|n}return o}},function(t,e,n){"use strict";var r=n(0);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(0);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(28),o=n(5),s=n(1),a=n(29),u=n(30);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return c(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(6);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";t.exports={services:{user:{host:"https://users.authing.cn/graphql"},oauth:{host:"https://oauth.authing.cn/graphql"}},openSSLSecret:"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC4xKeUgQ+Aoz7TLfAfs9+paePb\n5KIofVthEopwrXFkp8OCeocaTHt9ICjTT2QeJh6cZaDaArfZ873GPUn00eOIZ7Ae\n+TiA2BKHbCvloW3w5Lnqm70iSsUi5Fmu9/2+68GZRH9L7Mlh8cFksCicW2Y2W2uM\nGKl64GDcIq3au+aqJQIDAQAB\n-----END PUBLIC KEY-----\n",inBrowser:"undefined"!=typeof window&&"undefined"!=typeof document}},function(t,e,n){"use strict";t.exports=n(35)},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(t){var e;function n(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(){return new n(null)}"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],c=this[t++]>>15,l=a*u+c*s;u=s*u+((32767&l)<<15)+n[r]+(1073741823&i),i=(u>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},e=30):"Netscape"!=navigator.appName?(n.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},e=26):(n.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],c=this[t++]>>14,l=a*u+c*s;u=s*u+((16383&l)<<14)+n[r]+i,i=(u>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},e=28),n.prototype.DB=e,n.prototype.DM=(1<<e)-1,n.prototype.DV=1<<e,n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-e,n.prototype.F2=2*e-52;var i,o,s="0123456789abcdefghijklmnopqrstuvwxyz",a=new Array;for(i="0".charCodeAt(0),o=0;o<=9;++o)a[i++]=o;for(i="a".charCodeAt(0),o=10;o<36;++o)a[i++]=o;for(i="A".charCodeAt(0),o=10;o<36;++o)a[i++]=o;function u(t){return s.charAt(t)}function c(t,e){var n=a[t.charCodeAt(e)];return null==n?-1:n}function l(t){var e=r();return e.fromInt(t),e}function f(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function h(t){this.m=t}function p(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function d(t,e){return t&e}function y(t,e){return t|e}function g(t,e){return t^e}function m(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function b(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function x(){}function _(t){return t}function S(t){this.r2=r(),this.q3=r(),n.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}h.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},h.prototype.revert=function(t){return t},h.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},h.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},h.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.convert=function(t){var e=r();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(n.ZERO)>0&&this.m.subTo(e,e),e},p.prototype.revert=function(t){var e=r();return t.copyTo(e),this.reduce(e),e},p.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},p.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},n.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},n.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},n.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var a=8==r?255&t[i]:c(t,i);a<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&n.ZERO.subTo(this,this)},n.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},n.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},n.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},n.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},n.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},n.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},n.prototype.multiplyTo=function(t,e){var r=this.abs(),i=t.abs(),o=r.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+r.t]=r.am(0,i[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&n.ZERO.subTo(e,e)},n.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},n.prototype.divRemTo=function(t,e,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var a=r(),u=this.s,c=t.s,l=this.DB-f(o[o.t-1]);l>0?(o.lShiftTo(l,a),s.lShiftTo(l,i)):(o.copyTo(a),s.copyTo(i));var h=a.t,p=a[h-1];if(0!=p){var d=p*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),v=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,m=i.t,w=m-h,b=null==e?r():e;for(a.dlShiftTo(w,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),n.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--w>=0;){var x=i[--m]==p?this.DM:Math.floor(i[m]*v+(i[m-1]+g)*y);if((i[m]+=a.am(0,x,i,w,0,h))<x)for(a.dlShiftTo(w,b),i.subTo(b,i);i[m]<--x;)i.subTo(b,i)}null!=e&&(i.drShiftTo(h,e),u!=c&&n.ZERO.subTo(e,e)),i.t=h,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&n.ZERO.subTo(i,i)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},n.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(t,e){if(t>4294967295||t<1)return n.ONE;var i=r(),o=r(),s=e.convert(this),a=f(t)-1;for(s.copyTo(i);--a>=0;)if(e.sqrTo(i,o),(t&1<<a)>0)e.mulTo(o,s,i);else{var u=i;i=o,o=u}return e.revert(i)},n.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=u(n));s>=0;)a<e?(n=(this[s]&(1<<a)-1)<<e-a,n|=this[--s]>>(a+=this.DB-e)):(n=this[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=u(n));return i?o:"0"},n.prototype.negate=function(){var t=r();return n.ZERO.subTo(this,t),t},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+f(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(t){var e=r();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(n.ZERO)>0&&t.subTo(e,e),e},n.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new h(e):new p(e),this.exp(t,n)},n.ZERO=l(0),n.ONE=l(1),x.prototype.convert=_,x.prototype.revert=_,x.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},x.prototype.sqrTo=function(t,e){t.squareTo(e)},S.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e},S.prototype.revert=function(t){return t},S.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},S.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},S.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k=(1<<26)/E[E.length-1];function T(){this.i=0,this.j=0,this.S=new Array}n.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},n.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),i=l(n),o=r(),s=r(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(n+s.intValue()).toString(t).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(t)+a},n.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),o=!1,s=0,a=0,u=0;u<t.length;++u){var l=c(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(a=e*a+l,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),o&&n.ZERO.subTo(this,this)},n.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},n.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},n.prototype.changeBit=function(t,e){var r=n.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},n.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},n.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},n.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},n.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},n.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},n.prototype.millerRabin=function(t){var e=this.subtract(n.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var o=e.shiftRight(i);(t=t+1>>1)>E.length&&(t=E.length);for(var s=r(),a=0;a<t;++a){s.fromInt(E[Math.floor(Math.random()*E.length)]);var u=s.modPow(o,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(e)){for(var c=1;c++<i&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(n.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},n.prototype.clone=function(){var t=r();return this.copyTo(t),t},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},n.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},n.prototype.equals=function(t){return 0==this.compareTo(t)},n.prototype.min=function(t){return this.compareTo(t)<0?this:t},n.prototype.max=function(t){return this.compareTo(t)>0?this:t},n.prototype.and=function(t){var e=r();return this.bitwiseTo(t,d,e),e},n.prototype.or=function(t){var e=r();return this.bitwiseTo(t,y,e),e},n.prototype.xor=function(t){var e=r();return this.bitwiseTo(t,g,e),e},n.prototype.andNot=function(t){var e=r();return this.bitwiseTo(t,m,e),e},n.prototype.not=function(){for(var t=r(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},n.prototype.shiftLeft=function(t){var e=r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},n.prototype.shiftRight=function(t){var e=r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},n.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+w(this[t]);return this.s<0?this.t*this.DB:-1},n.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=b(this[n]^e);return t},n.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},n.prototype.setBit=function(t){return this.changeBit(t,y)},n.prototype.clearBit=function(t){return this.changeBit(t,m)},n.prototype.flipBit=function(t){return this.changeBit(t,g)},n.prototype.add=function(t){var e=r();return this.addTo(t,e),e},n.prototype.subtract=function(t){var e=r();return this.subTo(t,e),e},n.prototype.multiply=function(t){var e=r();return this.multiplyTo(t,e),e},n.prototype.divide=function(t){var e=r();return this.divRemTo(t,e,null),e},n.prototype.remainder=function(t){var e=r();return this.divRemTo(t,null,e),e},n.prototype.divideAndRemainder=function(t){var e=r(),n=r();return this.divRemTo(t,e,n),new Array(e,n)},n.prototype.modPow=function(t,e){var n,i,o=t.bitLength(),s=l(1);if(o<=0)return s;n=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new h(e):e.isEven()?new S(e):new p(e);var a=new Array,u=3,c=n-1,d=(1<<n)-1;if(a[1]=i.convert(this),n>1){var v=r();for(i.sqrTo(a[1],v);u<=d;)a[u]=r(),i.mulTo(v,a[u-2],a[u]),u+=2}var y,g,m=t.t-1,w=!0,b=r();for(o=f(t[m])-1;m>=0;){for(o>=c?y=t[m]>>o-c&d:(y=(t[m]&(1<<o+1)-1)<<c-o,m>0&&(y|=t[m-1]>>this.DB+o-c)),u=n;0==(1&y);)y>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),w)a[y].copyTo(s),w=!1;else{for(;u>1;)i.sqrTo(s,b),i.sqrTo(b,s),u-=2;u>0?i.sqrTo(s,b):(g=s,s=b,b=g),i.mulTo(b,a[y],s)}for(;m>=0&&0==(t[m]&1<<o);)i.sqrTo(s,b),g=s,s=b,b=g,--o<0&&(o=this.DB-1,--m)}return i.revert(s)},n.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return n.ZERO;for(var r=t.clone(),i=this.clone(),o=l(1),s=l(0),a=l(0),u=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),e&&o.subTo(a,o),s.subTo(u,s)):(i.subTo(r,i),e&&a.subTo(o,a),u.subTo(s,u))}return 0!=i.compareTo(n.ONE)?n.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},n.prototype.pow=function(t){return this.exp(t,new x)},n.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},n.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=E[E.length-1]){for(e=0;e<E.length;++e)if(n[0]==E[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<E.length;){for(var r=E[e],i=e+1;i<E.length&&r<k;)r*=E[i++];for(r=n.modInt(r);e<i;)if(r%E[e++]==0)return!1}return n.millerRabin(t)},n.prototype.square=function(){var t=r();return this.squareTo(t),t},T.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},T.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var O,A,R,I=256;if(null==A){var j;if(A=new Array,R=0,window.crypto&&window.crypto.getRandomValues){var N=new Uint32Array(256);for(window.crypto.getRandomValues(N),j=0;j<N.length;++j)A[R++]=255&N[j]}var P=function(t){if(this.count=this.count||0,this.count>=256||R>=I)window.removeEventListener?window.removeEventListener("mousemove",P,!1):window.detachEvent&&window.detachEvent("onmousemove",P);else try{var e=t.x+t.y;A[R++]=255&e,this.count+=1}catch(t){}};window.addEventListener?window.addEventListener("mousemove",P,!1):window.attachEvent&&window.attachEvent("onmousemove",P)}function C(){if(null==O){for(O=new T;R<I;){var t=Math.floor(65536*Math.random());A[R++]=255&t}for(O.init(A),R=0;R<A.length;++R)A[R]=0;R=0}return O.next()}function D(){}function U(t,e){return new n(t,e)}function L(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}D.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=C()},L.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},L.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0&&(this.n=U(t,16),this.e=parseInt(e,16))},L.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return null;for(var r=new Array,i=t.length-1;i>=0&&e>0;){var o=t.charCodeAt(i--);o<128?r[--e]=o:o>127&&o<2048?(r[--e]=63&o|128,r[--e]=o>>6|192):(r[--e]=63&o|128,r[--e]=o>>6&63|128,r[--e]=o>>12|224)}r[--e]=0;for(var s=new D,a=new Array;e>2;){for(a[0]=0;0==a[0];)s.nextBytes(a);r[--e]=a[0]}return r[--e]=2,r[--e]=0,new n(r)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i},L.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},L.prototype.setPrivate=function(t,e,n){null!=t&&null!=e&&t.length>0&&e.length>0&&(this.n=U(t,16),this.e=parseInt(e,16),this.d=U(n,16))},L.prototype.setPrivateEx=function(t,e,n,r,i,o,s,a){null!=t&&null!=e&&t.length>0&&e.length>0&&(this.n=U(t,16),this.e=parseInt(e,16),this.d=U(n,16),this.p=U(r,16),this.q=U(i,16),this.dmp1=U(o,16),this.dmq1=U(s,16),this.coeff=U(a,16))},L.prototype.generate=function(t,e){var r=new D,i=t>>1;this.e=parseInt(e,16);for(var o=new n(e,16);;){for(;this.p=new n(t-i,1,r),0!=this.p.subtract(n.ONE).gcd(o).compareTo(n.ONE)||!this.p.isProbablePrime(10););for(;this.q=new n(i,1,r),0!=this.q.subtract(n.ONE).gcd(o).compareTo(n.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var a=this.p.subtract(n.ONE),u=this.q.subtract(n.ONE),c=a.multiply(u);if(0==c.gcd(o).compareTo(n.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(c),this.dmp1=this.d.mod(a),this.dmq1=this.d.mod(u),this.coeff=this.q.modInverse(this.p);break}}},L.prototype.decrypt=function(t){var e=U(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var o=255&n[r];o<128?i+=String.fromCharCode(o):o>191&&o<224?(i+=String.fromCharCode((31&o)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&o)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},L.prototype.generateAsync=function(t,e,i){var o=new D,s=t>>1;this.e=parseInt(e,16);var a=new n(e,16),u=this,c=function(){var e=function(){if(u.p.compareTo(u.q)<=0){var t=u.p;u.p=u.q,u.q=t}var e=u.p.subtract(n.ONE),r=u.q.subtract(n.ONE),o=e.multiply(r);0==o.gcd(a).compareTo(n.ONE)?(u.n=u.p.multiply(u.q),u.d=a.modInverse(o),u.dmp1=u.d.mod(e),u.dmq1=u.d.mod(r),u.coeff=u.q.modInverse(u.p),setTimeout(function(){i()},0)):setTimeout(c,0)},l=function(){u.q=r(),u.q.fromNumberAsync(s,1,o,function(){u.q.subtract(n.ONE).gcda(a,function(t){0==t.compareTo(n.ONE)&&u.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(l,0)})})},f=function(){u.p=r(),u.p.fromNumberAsync(t-s,1,o,function(){u.p.subtract(n.ONE).gcda(a,function(t){0==t.compareTo(n.ONE)&&u.p.isProbablePrime(10)?setTimeout(l,0):setTimeout(f,0)})})};setTimeout(f,0)};setTimeout(c,0)},n.prototype.gcda=function(t,e){var n=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(n.compareTo(r)<0){var i=n;n=r,r=i}var o=n.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)e(n);else{o<s&&(s=o),s>0&&(n.rShiftTo(s,n),r.rShiftTo(s,r));var a=function(){(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),n.compareTo(r)>=0?(n.subTo(r,n),n.rShiftTo(1,n)):(r.subTo(n,r),r.rShiftTo(1,r)),n.signum()>0?setTimeout(a,0):(s>0&&r.lShiftTo(s,r),setTimeout(function(){e(r)},0))};setTimeout(a,10)}},n.prototype.fromNumberAsync=function(t,e,r,i){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),y,this),this.isEven()&&this.dAddOffset(1,0);var o=this,s=function(){o.dAddOffset(2,0),o.bitLength()>t&&o.subTo(n.ONE.shiftLeft(t-1),o),o.isProbablePrime(e)?setTimeout(function(){i()},0):setTimeout(s,0)};setTimeout(s,0)}else{var a=new Array,u=7&t;a.length=1+(t>>3),e.nextBytes(a),u>0?a[0]&=(1<<u)-1:a[0]=0,this.fromString(a,256)}};var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B="=";function F(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=M.charAt(n>>6)+M.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=M.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=M.charAt(n>>2)+M.charAt((3&n)<<4));(3&r.length)>0;)r+=B;return r}var q=q||{};q.env=q.env||{};var z=q,H=Object.prototype,V=["toString","valueOf"];q.env.parseUA=function(t){var e,n=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},r=navigator,i={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null},o=t||navigator&&navigator.userAgent,s=window&&window.location,a=s&&s.href;return i.secure=a&&0===a.toLowerCase().indexOf("https"),o&&(/windows|win32/i.test(o)?i.os="windows":/macintosh/i.test(o)?i.os="macintosh":/rhino/i.test(o)&&(i.os="rhino"),/KHTML/.test(o)&&(i.webkit=1),(e=o.match(/AppleWebKit\/([^\s]*)/))&&e[1]&&(i.webkit=n(e[1]),/ Mobile\//.test(o)?(i.mobile="Apple",(e=o.match(/OS ([^\s]*)/))&&e[1]&&(e=n(e[1].replace("_","."))),i.ios=e,i.ipad=i.ipod=i.iphone=0,(e=o.match(/iPad|iPod|iPhone/))&&e[0]&&(i[e[0].toLowerCase()]=i.ios)):((e=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(i.mobile=e[0]),/webOS/.test(o)&&(i.mobile="WebOS",(e=o.match(/webOS\/([^\s]*);/))&&e[1]&&(i.webos=n(e[1]))),/ Android/.test(o)&&(i.mobile="Android",(e=o.match(/Android ([^\s]*);/))&&e[1]&&(i.android=n(e[1])))),(e=o.match(/Chrome\/([^\s]*)/))&&e[1]?i.chrome=n(e[1]):(e=o.match(/AdobeAIR\/([^\s]*)/))&&(i.air=e[0])),i.webkit||((e=o.match(/Opera[\s\/]([^\s]*)/))&&e[1]?(i.opera=n(e[1]),(e=o.match(/Version\/([^\s]*)/))&&e[1]&&(i.opera=n(e[1])),(e=o.match(/Opera Mini[^;]*/))&&(i.mobile=e[0])):(e=o.match(/MSIE\s([^;]*)/))&&e[1]?i.ie=n(e[1]):(e=o.match(/Gecko\/([^\s]*)/))&&(i.gecko=1,(e=o.match(/rv:([^\s\)]*)/))&&e[1]&&(i.gecko=n(e[1]))))),i},q.env.ua=q.env.parseUA(),q.isFunction=function(t){return"function"==typeof t||"[object Function]"===H.toString.apply(t)},q._IEEnumFix=q.env.ua.ie?function(t,e){var n,r,i;for(n=0;n<V.length;n+=1)i=e[r=V[n]],z.isFunction(i)&&i!=H[r]&&(t[r]=i)}:function(){},q.extend=function(t,e,n){if(!e||!t)throw new Error("extend failed, please check that all dependencies are included.");var r,i=function(){};if(i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==H.constructor&&(e.prototype.constructor=e),n){for(r in n)z.hasOwnProperty(n,r)&&(t.prototype[r]=n[r]);z._IEEnumFix(t.prototype,n)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1),i=r.length;i%2==1?i+=1:e.match(/^[0-7]/)||(i+=2);for(var o="",s=0;s<i;s++)o+="f";var a=new n(o,16),u=a.xor(t).add(n.ONE);e=u.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){var n=CryptoJS.enc.Hex.parse(t),r=CryptoJS.enc.Base64.stringify(n),i=r.replace(/(.{64})/g,"$1\r\n");return i=i.replace(/\r\n$/,""),"-----BEGIN "+e+"-----\r\n"+i+"\r\n-----END "+e+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);var r=128+n;return r.toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},q.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(t){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e){var n=this.zeroPadding,r=this.localDateToUTC(t),i=String(r.getFullYear());"utc"==e&&(i=i.substr(2,2));var o=n(String(r.getMonth()+1),2),s=n(String(r.getDate()),2),a=n(String(r.getHours()),2),u=n(String(r.getMinutes()),2),c=n(String(r.getSeconds()),2);return i+o+s+a+u+c+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setByDateValue=function(t,e,n,r,i,o){var s=new Date(Date.UTC(t,e-1,n,r,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},q.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},q.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},q.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(t){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new n(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):void 0!==t.hex&&this.setValueHex(t.hex))},q.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(t){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";for(var r="",n=0;n<t.length-1;n+=8){var i=t.substr(n,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)1==t[n]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},q.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(t){KJUR.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},q.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},q.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",i=new n(t,10),o=i.toString(2),s=7-o.length%7;7==s&&(s=0);for(var a="",u=0;u<s;u++)a+="0";o=a+o;for(var u=0;u<o.length-1;u+=7){var c=o.substr(u,7);u!=o.length-7&&(c="1"+c),r+=e(parseInt(c,2))}return r};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",i=t.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(t){if(void 0===KJUR.asn1.x509.OID.name2oidList[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=KJUR.asn1.x509.OID.name2oidList[t];this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},q.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(t){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},q.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(t){KJUR.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},q.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(t){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},q.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(t){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},q.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(t){KJUR.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},q.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(t){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},void 0!==t&&(void 0!==t.str?this.setString(t.str):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},q.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(t){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},void 0!==t&&(void 0!==t.str?this.setString(t.str):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},q.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(t){KJUR.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var n=this.asn1Array[e];t+=n.getEncodedHex()}return this.hV=t,this.hV}},q.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(t){KJUR.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var n=this.asn1Array[e];t.push(n.getEncodedHex())}return t.sort(),this.hV=t.join(""),this.hV}},q.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(t){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},q.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(t){"use strict";var e,n={decode:function(t){var n;if(void 0===e){var r="0123456789ABCDEF",i=" \f\n\r\t\u2028\u2029";for(e=[],n=0;n<16;++n)e[r.charAt(n)]=n;for(r=r.toLowerCase(),n=10;n<16;++n)e[r.charAt(n)]=n;for(n=0;n<i.length;++n)e[i.charAt(n)]=-1}var o=[],s=0,a=0;for(n=0;n<t.length;++n){var u=t.charAt(n);if("="==u)break;if(-1!=(u=e[u])){if(void 0===u)throw"Illegal character at offset "+n;s|=u,++a>=2?(o[o.length]=s,s=0,a=0):s<<=4}}if(a)throw"Hex encoding incomplete: 4 bits missing";return o}};window.Hex=n}(),function(t){"use strict";var e,n={decode:function(t){var n;if(void 0===e){var r="= \f\n\r\t\u2028\u2029";for(e=[],n=0;n<64;++n)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)]=n;for(n=0;n<r.length;++n)e[r.charAt(n)]=-1}var i=[],o=0,s=0;for(n=0;n<t.length;++n){var a=t.charAt(n);if("="==a)break;if(-1!=(a=e[a])){if(void 0===a)throw"Illegal character at offset "+n;o|=a,++s>=4?(i[i.length]=o>>16,i[i.length]=o>>8&255,i[i.length]=255&o,o=0,s=0):o<<=6}}switch(s){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:i[i.length]=o>>10;break;case 3:i[i.length]=o>>16,i[i.length]=o>>8&255}return i},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=n.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw"RegExp out of sync";t=e[2]}return n.decode(t)}};window.Base64=n}(),function(t){"use strict";var e={tag:function(t,e){var n=document.createElement(t);return n.className=e,n},text:function(t){return document.createTextNode(t)}};function n(t,e){t instanceof n?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=e)}function r(t,e,n,r,i){this.stream=t,this.header=e,this.length=n,this.tag=r,this.sub=i}n.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},n.prototype.hexDigits="0123456789ABCDEF",n.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},n.prototype.hexDump=function(t,e,n){for(var r="",i=t;i<e;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},n.prototype.parseStringISO=function(t,e){for(var n="",r=t;r<e;++r)n+=String.fromCharCode(this.get(r));return n},n.prototype.parseStringUTF=function(t,e){for(var n="",r=t;r<e;){var i=this.get(r++);n+=i<128?String.fromCharCode(i):i>191&&i<224?String.fromCharCode((31&i)<<6|63&this.get(r++)):String.fromCharCode((15&i)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},n.prototype.parseStringBMP=function(t,e){for(var n="",r=t;r<e;r+=2){var i=this.get(r),o=this.get(r+1);n+=String.fromCharCode((i<<8)+o)}return n},n.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,n.prototype.parseTime=function(t,e){var n=this.parseStringISO(t,e),r=this.reTime.exec(n);return r?(n=r[1]+"-"+r[2]+"-"+r[3]+" "+r[4],r[5]&&(n+=":"+r[5],r[6]&&(n+=":"+r[6],r[7]&&(n+="."+r[7]))),r[8]&&(n+=" UTC","Z"!=r[8]&&(n+=r[8],r[9]&&(n+=":"+r[9]))),n):"Unrecognized time: "+n},n.prototype.parseInteger=function(t,e){var n=e-t;if(n>4){n<<=3;var r=this.get(t);if(0===r)n-=8;else for(;r<128;)r<<=1,--n;return"("+n+" bit)"}for(var i=0,o=t;o<e;++o)i=i<<8|this.get(o);return i},n.prototype.parseBitString=function(t,e){var n=this.get(t),r=(e-t-1<<3)-n,i="("+r+" bit)";if(r<=20){var o=n;i+=" ";for(var s=e-1;s>t;--s){for(var a=this.get(s),u=o;u<8;++u)i+=a>>u&1?"1":"0";o=0}}return i},n.prototype.parseOctetString=function(t,e){var n=e-t,r="("+n+" byte) ";n>100&&(e=t+100);for(var i=t;i<e;++i)r+=this.hexByte(this.get(i));return n>100&&(r+=""),r},n.prototype.parseOID=function(t,e){for(var n="",r=0,i=0,o=t;o<e;++o){var s=this.get(o);if(r=r<<7|127&s,i+=7,!(128&s)){if(""===n){var a=r<80?r<40?0:1:2;n=a+"."+(r-40*a)}else n+="."+(i>=31?"bigint":r);r=i=0}}return n},r.prototype.typeName=function(){if(void 0===this.tag)return"unknown";var t=this.tag>>6,e=(this.tag,31&this.tag);switch(t){case 0:switch(e){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+e.toString(16)}case 1:return"Application_"+e.toString(16);case 2:return"["+e+"]";case 3:return"Private_"+e.toString(16)}},r.prototype.reSeemsASCII=/^[ -~]+$/,r.prototype.content=function(){if(void 0===this.tag)return null;var t=this.tag>>6,e=31&this.tag,n=this.posContent(),r=Math.abs(this.length);if(0!==t){if(null!==this.sub)return"("+this.sub.length+" elem)";var i=this.stream.parseStringISO(n,n+Math.min(r,100));return this.reSeemsASCII.test(i)?i.substring(0,200)+(i.length>200?"":""):this.stream.parseOctetString(n,n+r)}switch(e){case 1:return 0===this.stream.get(n)?"false":"true";case 2:return this.stream.parseInteger(n,n+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+r);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+r);case 6:return this.stream.parseOID(n,n+r);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+r);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+r);case 30:return this.stream.parseStringBMP(n,n+r);case 23:case 24:return this.stream.parseTime(n,n+r)}return null},r.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},r.prototype.print=function(t){if(void 0===t&&(t=""),document.writeln(t+this),null!==this.sub){t+="  ";for(var e=0,n=this.sub.length;e<n;++e)this.sub[e].print(t)}},r.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,32&this.tag?e+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var n=0,r=this.sub.length;n<r;++n)e+=this.sub[n].toPrettyString(t)}return e},r.prototype.toDOM=function(){var t=e.tag("div","node");t.asn1=this;var n=e.tag("div","head"),r=this.typeName().replace(/_/g," ");n.innerHTML=r;var i=this.content();if(null!==i){i=String(i).replace(/</g,"&lt;");var o=e.tag("span","preview");o.appendChild(e.text(i)),n.appendChild(o)}t.appendChild(n),this.node=t,this.head=n;var s=e.tag("div","value");if(r="Offset: "+this.stream.pos+"<br/>",r+="Length: "+this.header+"+",this.length>=0?r+=this.length:r+=-this.length+" (undefined)",32&this.tag?r+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(r+="<br/>(encapsulates)"),null!==i&&(r+="<br/>Value:<br/><b>"+i+"</b>","object"==typeof oids&&6==this.tag)){var a=oids[i];a&&(a.d&&(r+="<br/>"+a.d),a.c&&(r+="<br/>"+a.c),a.w&&(r+="<br/>(warning!)"))}s.innerHTML=r,t.appendChild(s);var u=e.tag("div","sub");if(null!==this.sub)for(var c=0,l=this.sub.length;c<l;++c)u.appendChild(this.sub[c].toDOM());return t.appendChild(u),n.onclick=function(){t.className="node collapsed"==t.className?"node":"node collapsed"},t},r.prototype.posStart=function(){return this.stream.pos},r.prototype.posContent=function(){return this.stream.pos+this.header},r.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},r.prototype.fakeHover=function(t){this.node.className+=" hover",t&&(this.head.className+=" hover")},r.prototype.fakeOut=function(t){var e=/ ?hover/;this.node.className=this.node.className.replace(e,""),t&&(this.head.className=this.head.className.replace(e,""))},r.prototype.toHexDOM_sub=function(t,n,r,i,o){if(!(i>=o)){var s=e.tag("span",n);s.appendChild(e.text(r.hexDump(i,o))),t.appendChild(s)}},r.prototype.toHexDOM=function(t){var n=e.tag("span","hex");if(void 0===t&&(t=n),this.head.hexNode=n,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},n.asn1=this,n.onmouseover=function(){var e=!t.selected;e&&(t.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(e)},n.onmouseout=function(){var e=t.selected==this.asn1;this.asn1.fakeOut(e),e&&(t.selected=null,this.className="hex")},this.toHexDOM_sub(n,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(n,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)n.appendChild(e.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var r=this.sub[0],i=this.sub[this.sub.length-1];this.toHexDOM_sub(n,"intro",this.stream,this.posContent(),r.posStart());for(var o=0,s=this.sub.length;o<s;++o)n.appendChild(this.sub[o].toHexDOM(t));this.toHexDOM_sub(n,"outro",this.stream,i.posEnd(),this.posEnd())}return n},r.prototype.toHexString=function(t){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},r.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0===n)return-1;e=0;for(var r=0;r<n;++r)e=e<<8|t.get();return e},r.hasContent=function(t,e,i){if(32&t)return!0;if(t<3||t>4)return!1;var o=new n(i);3==t&&o.get();var s=o.get();if(s>>6&1)return!1;try{var a=r.decodeLength(o);return o.pos-i.pos+a==e}catch(t){return!1}},r.decode=function(t){t instanceof n||(t=new n(t,0));var e=new n(t),i=t.get(),o=r.decodeLength(t),s=t.pos-e.pos,a=null;if(r.hasContent(i,o,t)){var u=t.pos;if(3==i&&t.get(),a=[],o>=0){for(var c=u+o;t.pos<c;)a[a.length]=r.decode(t);if(t.pos!=c)throw"Content size is not correct for container starting at offset "+u}else try{for(;;){var l=r.decode(t);if(0===l.tag)break;a[a.length]=l}o=u-t.pos}catch(t){throw"Exception while decoding undefined length content: "+t}}else t.pos+=o;return new r(e,s,o,i,a)},r.test=function(){for(var t=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],e=0,i=t.length;e<i;++e){var o=new n(t[e].value,0),s=r.decodeLength(o);s!=t[e].expected&&document.write("In test["+e+"] expected "+t[e].expected+" got "+s+"\n")}},window.ASN1=r}(),ASN1.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,n=2*this.length;return t.substr(e,n)},L.prototype.parseKey=function(t){try{var e=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?Hex.decode(t):Base64.unarmor(t),i=ASN1.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=U(e,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var o=i.sub[3].getHexStringValue();this.d=U(o,16);var s=i.sub[4].getHexStringValue();this.p=U(s,16);var a=i.sub[5].getHexStringValue();this.q=U(a,16);var u=i.sub[6].getHexStringValue();this.dmp1=U(u,16);var c=i.sub[7].getHexStringValue();this.dmq1=U(c,16);var l=i.sub[8].getHexStringValue();this.coeff=U(l,16)}else{if(2!==i.sub.length)return!1;var f=i.sub[1],h=f.sub[0];e=h.sub[0].getHexStringValue(),this.n=U(e,16),n=h.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(t){return!1}},L.prototype.getPrivateBaseKey=function(){var t={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},e=new KJUR.asn1.DERSequence(t);return e.getEncodedHex()},L.prototype.getPrivateBaseKeyB64=function(){return F(this.getPrivateBaseKey())},L.prototype.getPublicBaseKey=function(){var t={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},e=new KJUR.asn1.DERSequence(t);t={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]};var n=new KJUR.asn1.DERSequence(t);t={hex:"00"+n.getEncodedHex()};var r=new KJUR.asn1.DERBitString(t);t={array:[e,r]};var i=new KJUR.asn1.DERSequence(t);return i.getEncodedHex()},L.prototype.getPublicBaseKeyB64=function(){return F(this.getPublicBaseKey())},L.prototype.wordwrap=function(t,e){if(e=e||64,!t)return t;var n="(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(n,"g")).join("\n")},L.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----"},L.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----"},L.prototype.hasPublicKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")},L.prototype.hasPrivateKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},L.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)};var J=function(t){L.call(this),t&&("string"==typeof t?this.parseKey(t):(this.hasPrivateKeyProperty(t)||this.hasPublicKeyProperty(t))&&this.parsePropertiesFrom(t))};(J.prototype=new L).constructor=J;var K=function(t){t=t||{},this.default_key_size=parseInt(t.default_key_size)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null};K.prototype.setKey=function(t){this.log&&this.key,this.key=new J(t)},K.prototype.setPrivateKey=function(t){this.setKey(t)},K.prototype.setPublicKey=function(t){this.setKey(t)},K.prototype.decrypt=function(t){try{return this.getKey().decrypt(function(t){var e,n,r="",i=0;for(e=0;e<t.length&&t.charAt(e)!=B;++e)v=M.indexOf(t.charAt(e)),v<0||(0==i?(r+=u(v>>2),n=3&v,i=1):1==i?(r+=u(n<<2|v>>4),n=15&v,i=2):2==i?(r+=u(n),r+=u(v>>2),n=3&v,i=3):(r+=u(n<<2|v>>4),r+=u(15&v),i=0));return 1==i&&(r+=u(n<<2)),r}(t))}catch(t){return!1}},K.prototype.encrypt=function(t){try{return F(this.getKey().encrypt(t))}catch(t){return!1}},K.prototype.getKey=function(t){if(!this.key){if(this.key=new J,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},K.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},K.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},K.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},K.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},K.version="2.3.1",t.JSEncrypt=K})?r.apply(e,[e]):r)||(t.exports=i)}])},function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=n(1);const i=new r.default;if(e.default=i,Object.getOwnPropertyNames(r.default.prototype).forEach(t=>{const e=i[t];"function"==typeof e&&(i[t]=e.bind(i))}),"undefined"!=typeof window)if("SolidAuthClient"in window);else{let t=!1;Object.defineProperty(window,"SolidAuthClient",{enumerable:!0,get:()=>(t||(t=!0),i)})}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return d});var r=n(2),i=n.n(r),o=n(4),s=n.n(o),a=n(5),u=n(79),c=n(9),l=n(10),f=n(7),h=n(12);const p=fetch;class d extends s.a{fetch(t,e){return Object(a.authnFetch)(Object(l.defaultStorage)(),p,t,e)}login(t,e){return e=i()({},v(Object(f.currentUrlNoParams)()),e),h.login(t,e)}async popupLogin(t){t=i()({},v(),t),/https?:/.test(t.popupUri)||(t.popupUri=new URL(t.popupUri||"/.well-known/solid/login",window.location).toString()),t.callbackUri||(t.callbackUri=t.popupUri);const e=Object(u.openIdpPopup)(t.popupUri),n=await Object(u.obtainSession)(t.storage,e,t);return this.emit("login",n),this.emit("session",n),n}async currentSession(t=Object(l.defaultStorage)()){let e=await Object(c.getSession)(t);if(!e){try{e=await h.currentSession(t)}catch(t){}e&&(this.emit("login",e),this.emit("session",e),await Object(c.saveSession)(t)(e))}return e}async trackSession(t){t(await this.currentSession()),this.on("session",t)}async logout(t=Object(l.defaultStorage)()){if(await Object(c.getSession)(t)){try{await h.logout(t,p),this.emit("logout"),this.emit("session",null)}catch(t){}await Object(c.clearSession)(t)}}}function v(t){return{callbackUri:t?t.split("#")[0]:"",popupUri:"",storage:Object(l.defaultStorage)()}}},function(t,e,n){var r=n(3);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"authnFetch",function(){return a}),n(6);var r=n(7),i=n(8),o=n(9),s=n(12);async function a(t,e,n,r){const a=await Object(o.getSession)(t);if(!a)return e(n,r);if(await u(t,n))return Object(s.fetchWithCredentials)(a,e,n,r);let c=await e(n,r);return 401===c.status&&(await Object(i.updateHostFromResponse)(t)(c),await u(t,n)&&(c=Object(s.fetchWithCredentials)(a,e,n,r))),c}async function u(t,e){const n=await Object(i.getHost)(t)(Object(r.toUrlString)(e));return null!=n&&n.requiresAuth}},function(t,e){t.exports=window.fetch},function(t,e,n){"use strict";n.r(e),n.d(e,"currentUrl",function(){return r}),n.d(e,"currentUrlNoParams",function(){return i}),n.d(e,"navigateTo",function(){return o}),n.d(e,"originOf",function(){return s}),n.d(e,"toUrlString",function(){return a});const r=()=>window.location.href,i=()=>window.location.origin+window.location.pathname,o=t=>{window.location.href=t},s=t=>new URL(t).origin,a=t=>("string"!=typeof t&&(t="url"in t?t.url:t.toString()),new URL(t,r()).toString())},function(t,e,n){"use strict";n.r(e),n.d(e,"getHost",function(){return u}),n.d(e,"saveHost",function(){return c}),n.d(e,"updateHostFromResponse",function(){return l});var r=n(2),i=n.n(r),o=n(9),s=n(10),a=n(12);function u(t){return async e=>{const n=new URL(e).host,r=await Object(o.getSession)(t);if(r&&n===new URL(r.idp).host)return{url:n,requiresAuth:!0};const i=(await Object(s.getData)(t)).hosts;return i&&i[n]}}function c(t){return async({url:e,requiresAuth:n})=>{await Object(s.updateStorage)(t,t=>i()({},t,{hosts:i()({},t.hosts,{[e]:{requiresAuth:n}})}))}}function l(t){return async e=>{if(a.requiresAuth(e)){const n=new URL(e.url).host;await c(t)({url:n,requiresAuth:!0})}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"getSession",function(){return s}),n.d(e,"saveSession",function(){return a}),n.d(e,"clearSession",function(){return u});var r=n(2),i=n.n(r),o=n(10);async function s(t){return(await Object(o.getData)(t)).session||null}function a(t){return async e=>(await Object(o.updateStorage)(t,t=>i()({},t,{session:e}))).session}async function u(t){await Object(o.updateStorage)(t,t=>i()({},t,{session:null}))}},function(t,e,n){"use strict";n.r(e),n.d(e,"NAMESPACE",function(){return r}),n.d(e,"defaultStorage",function(){return i}),n.d(e,"getData",function(){return o}),n.d(e,"updateStorage",function(){return s}),n.d(e,"asyncStorage",function(){return a}),n.d(e,"memStorage",function(){return u}),n.d(e,"ipcStorage",function(){return c}),n(11);const r="solid-auth-client",i=()=>{try{if(window&&window.localStorage)return a(window.localStorage)}catch(t){if(!(t instanceof ReferenceError))throw t}return a(u())};async function o(t){let e,n;try{e=await t.getItem(r),n=JSON.parse(e||"{}")}catch(t){n={}}return n}async function s(t,e){const n=e(await o(t));return await t.setItem(r,JSON.stringify(n)),n}function a(t){return{getItem:e=>Promise.resolve(t.getItem(e)),setItem:(e,n)=>Promise.resolve(t.setItem(e,n)),removeItem:e=>Promise.resolve(t.removeItem(e))}}const u=()=>{const t={};return{getItem:e=>void 0===t[e]?null:t[e],setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}};function c(t){return{getItem:e=>t.request("storage/getItem",e),setItem:(e,n)=>t.request("storage/setItem",e,n),removeItem:e=>t.request("storage/removeItem",e)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Server",function(){return s}),n.d(e,"Client",function(){return a});var r=n(3),i=n.n(r);const o="solid-auth-client";class s{constructor(t,e,n){i()(this,"_clientWindow",void 0),i()(this,"_clientOrigin",void 0),i()(this,"_handler",void 0),i()(this,"_messageListener",void 0),this._clientWindow=t,this._clientOrigin=e,this._handler=n,this._messageListener=(t=>this._handleMessage(t))}async _handleMessage({data:t,origin:e}){if(e!==this._clientOrigin)return;const n=t&&t[o];if(n&&n.method){const t=n,e=t.id,r=t.method,i=t.args,s=await this._handler(r,...i);this._clientWindow.postMessage({[o]:{id:e,ret:s}},this._clientOrigin)}}start(){window.addEventListener("message",this._messageListener)}stop(){window.removeEventListener("message",this._messageListener)}}class a{constructor(t,e){i()(this,"_serverWindow",void 0),i()(this,"_serverOrigin",void 0),this._serverWindow=t,this._serverOrigin=e}request(t,...e){const n=Math.random();return this._serverWindow.postMessage({[o]:{id:n,method:t,args:e}},this._serverOrigin),new Promise((t,e)=>{window.addEventListener("message",i);const r=setTimeout(()=>{e(new Error("Could not connect to main window.")),window.removeEventListener("message",i)},2e3);function i({data:e}){const s=e&&e[o];s&&s.id===n&&s.hasOwnProperty("ret")&&(t(s.ret),clearTimeout(r),window.removeEventListener("message",i))}})}}},function(t,e,n){"use strict";n.r(e),n.d(e,"login",function(){return h}),n.d(e,"currentSession",function(){return p}),n.d(e,"logout",function(){return d}),n.d(e,"getRegisteredRp",function(){return v}),n.d(e,"requiresAuth",function(){return g}),n.d(e,"fetchWithCredentials",function(){return m});var r=n(2),i=n.n(r),o=n(13),s=n(17),a=n.n(s),u=n(78),c=n.n(u),l=n(7),f=n(10);async function h(t,e){try{const n=await v(t,e);return await async function(t){await Object(f.updateStorage)(t,t=>i()({},t,{appHashFragment:window.location.hash}))}(e.storage),async function(t,{callbackUri:e,storage:n}){const r=await Object(f.getData)(n),i=await t.createRequest({redirect_uri:e},r);return await Object(f.updateStorage)(n,()=>r),Object(l.navigateTo)(i)}(n,e)}catch(t){return null}}async function p(t=Object(f.defaultStorage)()){try{const e=await y(t);if(!e)return null;const n=Object(l.currentUrl)();if(!/#(.*&)?access_token=/.test(n))return null;const r=await Object(f.getData)(t),o=await e.validateResponse(n,r);return o?(await async function(t){await Object(f.updateStorage)(t,t=>(window.location.hash=t.appHashFragment,delete t.appHashFragment,t))}(t),i()({},o,{webId:o.idClaims.sub,idp:o.issuer})):null}catch(t){return null}}async function d(t,e){const n=await y(t);if(n)try{await n.logout();try{await e("/.well-known/solid/logout",{credentials:"include"})}catch(t){}}catch(t){}}async function v(t,e){let n=await y(e.storage);return n&&n.provider.url===t&&n.registration.redirect_uris.includes(e.callbackUri)||(n=await function(t,{storage:e,callbackUri:n}){const r={issuer:t,grant_types:["implicit"],redirect_uris:[n],response_types:["id_token token"],scope:"openid profile"},i={defaults:{authenticate:{redirect_uri:n,response_type:"id_token token"}},store:e};return a.a.register(t,r,i)}(t,e),await async function(t,e,n){return await Object(f.updateStorage)(t,t=>i()({},t,{rpConfig:n})),n}(e.storage,0,n)),n}async function y(t){const e=(await Object(f.getData)(t)).rpConfig;return e?(e.store=t,a.a.from(e)):null}function g(t){if(401!==t.status)return!1;const e=t.headers.get("www-authenticate");if(!e)return!1;const n=o.parse(e);return"Bearer"===n.scheme&&n.params&&"openid webid"===n.params.scope}async function m(t,e,n,r){const o=await c.a.issueFor(Object(l.toUrlString)(n),t);return e(n,i()({},r,{credentials:"include",headers:i()({},r&&r.headers?r.headers:{},{authorization:`Bearer ${o}`})}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"format",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return i.default}});var r=o(n(14)),i=o(n(16));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(15);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=function(t){return t.reduce(function(t,e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,2),o=n[0],s=n[1],a=function(t){return function(e){return`${t}=${e&&!(0,r.isToken)(e)?(0,r.quote)(e):e}`}}(o);if(!(0,r.isToken)(o))throw new TypeError;return Array.isArray(s)?i(t).concat(i(s.map(a))):i(t).concat([a(s)])},[])};e.default=function(t,e,n){var s="string"==typeof t?{scheme:t,token:e,params:n}:t;if("object"!=typeof s)throw new TypeError;if(!(0,r.isScheme)(s.scheme))throw new TypeError("Invalid scheme.");return[s.scheme].concat(i(void 0!==s.token?[s.token]:[]),i(void 0!==s.params?function t(e,n){if(Array.isArray(e))return o(e);if("object"==typeof e){var r=e;return t(Object.keys(e).map(function(t){return[t,r[t]]}),n)}throw new TypeError}(s.params):[])).join(" ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unquote=e.quote=e.isScheme=e.isToken=void 0;var r=/^[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+$/,i=function(t){return"string"==typeof t&&r.test(t)};e.isToken=i;var o=i;e.isScheme=o,e.quote=function(t){return`"${t.replace(/"/g,'\\"')}"`},e.unquote=function(t){return t.substr(1,t.length-2).replace(/\\"/g,'"')}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(15),i=/((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g,o=function(t,e){var n='"'===e.charAt(0)?(0,r.unquote)(e):e.trim();return Array.isArray(t)?t.concat(n):"string"==typeof t?[t,n]:n};e.default=function(t){if("string"!=typeof t)throw new TypeError("Header value must be a string.");var e=t.indexOf(" "),n=t.substr(0,e);if(!(0,r.isScheme)(n))throw new TypeError(`Invalid scheme ${n}`);return function(t,e){for(var n=null,r={};;){var s=i.exec(e);if(null===s)break;s[2]?r[s[1]]=o(r[s[1]],s[2]):n=o(n,s[1])}return{scheme:t,params:r,token:n}}(n,t.substr(e))}},function(t,e,n){"use strict";t.exports=n(18)},function(t,e,n){(function(e){const r=n(20),i=n(6),{URL:o}=n(25),s=i.Headers?i.Headers:e.Headers,{JSONDocument:a}=n(26),{JWKSet:u}=n(35),c=n(66),l=n(68),f=n(77),h=n(72),p=n(67);class d extends a{static get schema(){return f}static from(t){let e=new d(t),n=e.validate();if(!n.valid)return Promise.reject(new Error(JSON.stringify(n)));let r=e.provider.jwks;return r?u.importKeys(r).then(t=>(e.provider.jwks=t,e)):e.jwks().then(()=>e)}static register(t,e,n){let r=new d({provider:{url:t},defaults:Object.assign({},n.defaults),store:n.store});return Promise.resolve().then(()=>r.discover()).then(()=>r.jwks()).then(()=>r.register(e)).then(()=>r)}discover(){try{let t=this.provider.url;r(t,'RelyingParty provider must define "url"');let e=new o(t);return e.pathname=".well-known/openid-configuration",i(e.toString()).then(h("Error fetching openid configuration")).then(t=>t.json().then(t=>this.provider.configuration=t))}catch(t){return Promise.reject(t)}}register(t){try{let e=this.provider.configuration;r(e,"OpenID Configuration is not initialized."),r(e.registration_endpoint,"OpenID Configuration is missing registration_endpoint.");let n=e.registration_endpoint,o="post",a=new s({"Content-Type":"application/json"}),u=this.defaults.register,c=JSON.stringify(Object.assign({},u,t));return i(n,{method:o,headers:a,body:c}).then(h("Error registering client")).then(t=>t.json().then(t=>this.registration=t))}catch(t){return Promise.reject(t)}}serialize(){return JSON.stringify(this)}jwks(){try{let t=this.provider.configuration;r(t,"OpenID Configuration is not initialized."),r(t.jwks_uri,"OpenID Configuration is missing jwks_uri.");let e=t.jwks_uri;return i(e).then(h("Error resolving provider keys")).then(t=>t.json().then(t=>u.importKeys(t)).then(t=>this.provider.jwks=t))}catch(t){return Promise.reject(t)}}createRequest(t,e){return c.create(this,t,e||this.store)}validateResponse(t,e=this.store){let n;n=t.match(/^http(s?):\/\//)?{rp:this,redirect:t,session:e}:{rp:this,body:t,session:e};const r=new l(n);return l.validateResponse(r)}userinfo(){try{let t=this.provider.configuration;r(t,"OpenID Configuration is not initialized."),r(t.userinfo_endpoint,"OpenID Configuration is missing userinfo_endpoint.");let e=t.userinfo_endpoint,n=this.store.access_token;r(n,"Missing access token.");let o=new s({"Content-Type":"application/json",Authorization:`Bearer ${n}`});return i(e,{headers:o}).then(h("Error fetching userinfo")).then(t=>t.json())}catch(t){return Promise.reject(t)}}logoutRequest(t={}){const{id_token_hint:e,post_logout_redirect_uri:n,state:i}=t;let s;if(r(this.provider,"OpenID Configuration is not initialized"),s=this.provider.configuration,r(s,"OpenID Configuration is not initialized"),!s.end_session_endpoint)return null;if(n&&!e)throw new Error("id_token_hint is required when using post_logout_redirect_uri");const a={};e&&(a.id_token_hint=e),n&&(a.post_logout_redirect_uri=n),i&&(a.state=i);const u=new o(s.end_session_endpoint);return u.search=p.encode(a),u.href}logout(){let t;try{r(this.provider,"OpenID Configuration is not initialized."),t=this.provider.configuration,r(t,"OpenID Configuration is not initialized."),r(t.end_session_endpoint,"OpenID Configuration is missing end_session_endpoint.")}catch(t){return Promise.reject(t)}if(!t.end_session_endpoint)return this.clearSession(),Promise.resolve(void 0);let e=t.end_session_endpoint;return i(e,{method:"get",credentials:"include"}).then(h("Error logging out")).then(()=>this.clearSession())}clearSession(){let t=this.store;t&&delete t[v]}popTokenFor(t,e){return PoPToken.issueFor(t,e)}}const v="oidc.session.privateKey";d.SESSION_PRIVATE_KEY=v,t.exports=d}).call(this,n(19))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(21),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var f=t.exports=g,h=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t)){if(u)return t.name;var e=t.toString().match(h);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(u||!o.isFunction(t))return o.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function y(t,e,n,r,i){throw new f.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function g(t,e){t||y(t,!0,e,"==",f.ok)}function m(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=w(t),s=w(e);if(i&&!s||!i&&s)return!1;if(i)return t=a.call(t),e=a.call(e),m(t,e,n);var u,c,l=_(t),f=_(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!m(t[u],e[u],n,r))return!1;return!0}(t,e,n,s))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&y(i,n,"Missing expected exception"+r);var s="string"==typeof r,a=!t&&o.isError(i),u=!t&&i&&!n;if((a&&s&&b(i,n)||u)&&y(i,n,"Got unwanted exception"+r),t&&i&&n&&!b(i,n)||!t&&i)throw i}f.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=d(v((e=this).actual),128)+" "+e.operator+" "+d(v(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=p(n),s=i.indexOf("\n"+o);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}},o.inherits(f.AssertionError,Error),f.fail=y,f.ok=g,f.equal=function(t,e,n){t!=e&&y(t,e,n,"==",f.equal)},f.notEqual=function(t,e,n){t==e&&y(t,e,n,"!=",f.notEqual)},f.deepEqual=function(t,e,n){m(t,e,!1)||y(t,e,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,n){m(t,e,!0)||y(t,e,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,n){m(t,e,!1)&&y(t,e,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,n,r){m(e,n,!0)&&y(e,n,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,n){t!==e&&y(t,e,n,"===",f.strictEqual)},f.notStrictEqual=function(t,e,n){t===e&&y(t,e,n,"!==",f.notStrictEqual)},f.throws=function(t,e,n){x(!0,t,e,n)},f.doesNotThrow=function(t,e,n){x(!1,t,e,n)},f.ifError=function(t){if(t)throw t};var _=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e}}).call(this,n(19))},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])v(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,i){if(m(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation,o=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=l(t,i,r)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var c,b="",E=!1,T=["{","}"];return p(n)&&(E=!0,T=["[","]"]),S(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),w(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),_(n)&&(b=" "+f(n)),0!==s.length||E&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=E?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)k(e,String(s))?o.push(h(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}(t,n,r,a,s):s.map(function(e){return h(t,n,r,a,e,E)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,T)):T[0]+b+T[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function w(t){return b(t)&&"[object RegExp]"===E(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===E(t)}function _(t){return b(t)&&("[object Error]"===E(t)||t instanceof Error)}function S(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.debuglog=function(t){return m(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),s[t]||(new RegExp("\\b"+t+"\\b","i").test(o)?(r.pid,s[t]=function(){e.format.apply(e,arguments)}):s[t]=function(){}),s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=w,e.isObject=b,e.isDate=x,e.isError=_,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(23),e.log=function(){},e.inherits=n(24),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(19),n(22))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=window.window},function(t,e,n){"use strict";t.exports={Formats:n(27),Initializer:n(28),JSONDocument:n(29),JSONMapping:n(32),JSONPatch:n(30),JSONPointer:n(31),JSONSchema:n(33),Validator:n(34)}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,o=/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,s=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,u=/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,c=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"register",value:function(t,e){if("string"!=typeof t)throw new Error("Format name must be a string");return"string"==typeof e&&(e=new RegExp(e)),this[t]=e}},{key:"resolve",value:function(t){var e=this[t];if(!e)throw new Error("Unknown JSON Schema format.");return e}},{key:"test",value:function(t,e){return this.resolve(t).test(e)}}],[{key:"initialize",value:function(){var e=new t;return e.register("date-time",i),e.register("uri",o),e.register("email",s),e.register("ipv4",a),e.register("ipv6",u),e.register("hostname",c),e}}]),t}();t.exports=l.initialize()},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,n||{}),this.root=this.root||this,this.root.depth=this.root.depth||1,this.level>this.root.depth&&(this.root.depth=this.level),this.level=this.level||0,this.schema=e}return i(t,[{key:"compile",value:function(){var t=this.root,e=(this.depth,this.level,""),n="";if(n+=this.default(),n+=this.properties(),n+=this.items(),n+=this.member(),n+=this.item(),t===this){for(var r=1;r<=this.root.depth;r++)e+=this.declaration(r);return"\n        options = options || {}\n\n        if (options.filter === false) {\n          Object.assign(target, JSON.parse(JSON.stringify(source)))\n        }\n\n        "+e+"\n        "+n+"\n      "}return n}},{key:"declaration",value:function(t){return"\n      var target"+t+"\n      var source"+t+"\n      var count"+t+"\n    "}},{key:"default",value:function(){var t=this.schema,e=this.level,n=this.key,r=this.index,i=t.default,o="";return t.hasOwnProperty("default")&&(n&&(o+="\n          target"+e+"['"+n+"'] = "+JSON.stringify(i)+"\n        "),r&&(o+="\n          target"+e+"["+r+"] = "+JSON.stringify(i)+"\n        "),e>1&&(o+="\n          count"+e+"++\n        "),o="\n        if (options.defaults !== false) {\n          "+o+"\n        }\n      "),o}},{key:"member",value:function(){var t=this.schema,e=(this.root,this.level),n=this.key,r=t.properties,i=t.additionalProperties,o=t.items,s=t.additionalItems,a="";return!n||r||i||o||s||(a+="\n        target"+e+"['"+n+"'] = source"+e+"['"+n+"']\n      ",e>1&&(a+="\n          count"+e+"++\n        "),a="\n        if (source"+e+".hasOwnProperty('"+n+"')) {\n          "+a+"\n        }\n      "),a}},{key:"item",value:function(){var t=this.schema,e=(this.root,this.level),n=this.index,r=t.properties,i=t.additionalProperties,o=t.items,s=t.additionalItems,a="";return!n||r||i||o||s||(a+="\n        target"+e+"["+n+"] = source"+e+"["+n+"]\n      ",e>1&&(a+="\n          count"+e+"++\n        "),a="\n        if ("+n+" < len) {\n          "+a+"\n        }\n      "),a}},{key:"properties",value:function(){var e=this.schema,n=this.root,r=this.level,i=this.key,o=this.index,s=e.properties,a="";return s&&(Object.keys(s).forEach(function(e){var i=new t(s[e],{key:e,root:n,level:r+1});a+=i.compile()}),n===this?a="\n          if (typeof source === 'object' && source !== null && !Array.isArray(source)) {\n            if (typeof target !== 'object') {\n              throw new Error('?')\n            }\n\n            source1 = source\n            target1 = target\n            count1 = 0\n\n            "+a+"\n          }\n        ":(o&&(a="\n            if ("+o+" < source"+r+".length || typeof source"+r+"["+o+"] === 'object') {\n\n              source"+(r+1)+" = source"+r+"["+o+"] || {}\n              count"+(r+1)+" = 0\n\n              if ("+o+" < target"+r+".length || typeof target"+r+"["+o+"] !== 'object') {\n                target"+(r+1)+" = {}\n                if ("+o+" < source"+r+".length) {\n                  count"+(r+1)+"++\n                }\n              } else {\n                target"+(r+1)+" = target"+r+"["+o+"]\n              }\n\n              "+a+"\n\n              if (count"+(r+1)+" > 0) {\n                target"+r+"["+o+"] = target"+(r+1)+"\n                count"+r+"++\n              }\n\n            } else {\n              target"+r+"["+o+"] = source"+r+"["+o+"]\n              count"+r+"++\n            }\n          "),i&&(a="\n            if ((typeof source"+r+"['"+i+"'] === 'object'\n                  && source"+r+"['"+i+"'] !== null\n                  && !Array.isArray(source"+r+"['"+i+"']))\n                || !source"+r+".hasOwnProperty('"+i+"')) {\n\n              source"+(r+1)+" = source"+r+"['"+i+"'] || {}\n              count"+(r+1)+" = 0\n\n              if (!target"+r+".hasOwnProperty('"+i+"')\n                  || typeof target"+r+"['"+i+"'] !== 'object'\n                  || target"+r+"['"+i+"'] === null\n                  || Array.isArray(target"+r+"['"+i+"'])) {\n                target"+(r+1)+" = {}\n                if (source"+r+".hasOwnProperty('"+i+"')) {\n                  count"+(r+1)+"++\n                }\n              } else {\n                target"+(r+1)+" = target"+r+"['"+i+"']\n                count"+(r+1)+"++\n              }\n\n              "+a+"\n\n              if (count"+(r+1)+" > 0) {\n                target"+r+"['"+i+"'] = target"+(r+1)+"\n                count"+r+"++\n              }\n\n            } else {\n              target"+r+"['"+i+"'] = source"+r+"['"+i+"']\n              count"+r+"++\n            }\n          "))),a}},{key:"additionalProperties",value:function(){}},{key:"items",value:function(){var e=this.schema,n=this.root,i=this.level,o=this.key,s=(this.index,e.items),a="";if(s){if(Array.isArray(s));else if("object"===(void 0===s?"undefined":r(s))&&null!==s){var u="i"+(i+1);a+="\n          var sLen = source"+(i+1)+".length || 0\n          var tLen = target"+(i+1)+".length || 0\n          var len = 0\n\n          if (sLen > len) { len = sLen }\n          // THIS IS WRONG, CAUSED SIMPLE ARRAY INIT TO FAIL (OVERWRITE\n          // EXISTING TARGET VALUES WITH UNDEFINED WHEN SOURCE IS SHORTER THAN\n          // TARGET). LEAVING HERE UNTIL WE FINISH TESTING AND SEE WHY IT MIGHT\n          // HAVE BEEN HERE IN THE FIRST PLACE.\n          //\n          // if (tLen > len) { len = tLen }\n\n          for (var "+u+" = 0; "+u+" < len; "+u+"++) {\n            "+new t(s,{index:u,root:n,level:i+1}).compile()+"\n          }\n        "}a=n===this?"\n          if (Array.isArray(source)) {\n            if (!Array.isArray(target)) {\n              throw new Error('?')\n            }\n\n            source1 = source\n            target1 = target\n\n            "+a+"\n          }\n        ":"\n          if (Array.isArray(source"+i+"['"+o+"']) || !source"+i+".hasOwnProperty('"+o+"')) {\n\n            source"+(i+1)+" = source"+i+"['"+o+"'] || []\n            count"+(i+1)+" = 0\n\n            if (!target"+i+".hasOwnProperty('"+o+"') || !Array.isArray(target"+i+"['"+o+"'])) {\n              target"+(i+1)+" = []\n                if (source"+i+".hasOwnProperty('"+o+"')) {\n                  count"+(i+1)+"++\n                }\n\n            } else {\n              target"+(i+1)+" = target"+i+"['"+o+"']\n              count"+(i+1)+"++\n            }\n\n            "+a+"\n\n            if (count"+(i+1)+" > 0) {\n              target"+i+"['"+o+"'] = target"+(i+1)+"\n              count"+i+"++\n            }\n\n          } else {\n            target"+i+"['"+o+"'] = source"+i+"['"+o+"']\n            count"+i+"++\n          }\n        "}return a}},{key:"additionalItems",value:function(){}}],[{key:"compile",value:function(e){var n=new t(e).compile();try{return new Function("target","source","options",n)}catch(t){}}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(30),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialize(e,n)}return r(t,null,[{key:"schema",get:function(){throw new Error("Schema must be defined by classes extending JSONDocument")}}]),r(t,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.constructor.schema.initialize(this,t,e)}},{key:"validate",value:function(t){var e=this.constructor.schema;return(t||e).validate(this)}},{key:"patch",value:function(t){var e=new i(t);e.apply(this)}},{key:"select",value:function(){}},{key:"project",value:function(t){return t.project(this)}}],[{key:"serialize",value:function(t){return JSON.stringify(t)}},{key:"deserialize",value:function(t){try{return JSON.parse(t)}catch(t){throw new Error("Failed to parse JSON")}}}]),t}();t.exports=o},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(31),s=["add","remove","replace","move","copy","test"],a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ops=e||[]}return i(t,[{key:"apply",value:function(t){var e=this;this.ops.forEach(function(n){var r=n.op;if(!r)throw new Error('Missing "op" in JSON Patch operation');if(-1===s.indexOf(r))throw new Error('Invalid "op" in JSON Patch operation');if(!n.path)throw new Error('Missing "path" in JSON Patch operation');e[r](n,t)})}},{key:"add",value:function(t,e){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch add operation');new o(t.path,2).add(e,t.value)}},{key:"remove",value:function(t,e){new o(t.path).remove(e)}},{key:"replace",value:function(t,e){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch replace operation');new o(t.path).replace(e,t.value)}},{key:"move",value:function(t,e){if(void 0===t.from)throw new Error('Missing "from" in JSON Patch move operation');if(t.path.match(new RegExp("^"+t.from)))throw new Error('Invalid "from" in JSON Patch move operation');var n=new o(t.path),r=new o(t.from),i=r.get(e);r.remove(e),n.add(e,i)}},{key:"copy",value:function(t,e){if(void 0===t.from)throw new Error('Missing "from" in JSON Patch copy operation');var n=new o(t.path),r=new o(t.from).get(e);n.add(e,r)}},{key:"test",value:function(t,e){if(void 0===t.value)throw new Error('Missing "value" in JSON Patch test operation');var n=new o(t.path).get(e);if(r(t.value),n!==t.value)throw new Error("Mismatching JSON Patch test value")}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=0,o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expr=e,this.mode=n||i,this.tokens=e&&"#"===e.charAt(0)?this.parseURIFragmentIdentifier(e):this.parseJSONString(e)}return r(t,[{key:"escape",value:function(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}},{key:"unescape",value:function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},{key:"parseJSONString",value:function(t){if("string"!=typeof t)throw new Error("JSON Pointer must be a string");if(""===t)return[];if("/"!==t.charAt(0))throw new Error("Invalid JSON Pointer");return"/"===t?[""]:t.substr(1).split("/").map(this.unescape)}},{key:"toJSONString",value:function(){return"/"+this.tokens.map(this.escape).join("/")}},{key:"parseURIFragmentIdentifier",value:function(t){if("string"!=typeof t)throw new Error("JSON Pointer must be a string");if("#"!==t.charAt(0))throw new Error("Invalid JSON Pointer URI Fragment Identifier");return this.parseJSONString(decodeURIComponent(t.substr(1)))}},{key:"toURIFragmentIdentifier",value:function(){var t=this;return"#/"+this.tokens.map(function(e){return encodeURIComponent(t.escape(e))}).join("/")}},{key:"get",value:function(t){for(var e=t,n=this.tokens,r=0;r<n.length;r++){if(!e||void 0===e[n[r]]){if(this.mode!==i)return;throw new Error("Invalid JSON Pointer reference")}e=e[n[r]]}return e}},{key:"add",value:function(t,e){for(var n=this.tokens,r=t,o=0;o<n.length;o++){var s=n[o];if(o===n.length-1)"-"===s?r.push(e):Array.isArray(r)?r.splice(s,0,e):void 0!==e&&(r[s]=e);else if(r[s])r=r[s];else switch(this.mode){case i:throw new Error("Invalid JSON Pointer reference");case 1:r=r[s]=parseInt(s)?[]:{};break;case 2:return;default:throw new Error("Invalid pointer mode")}}}},{key:"replace",value:function(t,e){for(var n=this.tokens,r=t,i=0;i<n.length;i++){var o=n[i];i===n.length-1?r[o]=e:r=r[o]?r[o]:r[o]=parseInt(o)?[]:{}}}},{key:"remove",value:function(t){for(var e=this.tokens,n=t,r=0;r<e.length;r++){var i=e[r];if(void 0===n||void 0===n[i])return;if(Array.isArray(n))return void n.splice(i,1);r===e.length-1&&delete n[i],n=n[i]}}}],[{key:"parse",value:function(e){return new t(e)}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(31),o=1,s=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"mapping",{enumerable:!1,value:new Map}),Object.keys(e).forEach(function(t){var r=e[t];n.mapping.set(new i(t,o),new i(r,o))})}return r(t,[{key:"map",value:function(t,e){this.mapping.forEach(function(n,r){r.add(t,n.get(e))})}},{key:"project",value:function(t,e){this.mapping.forEach(function(n,r){n.add(e,r.get(t))})}}]),t}();t.exports=s},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(28),s=n(34),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,e),Object.defineProperties(this,{initialize:{enumerable:!1,writeable:!1,value:o.compile(e)},validate:{enumerable:!1,writeable:!1,value:s.compile(e)}})}return i(t,[{key:"extend",value:function(e){function n(t){return t&&"object"===(void 0===t?"undefined":r(t))&&null!==t&&!Array.isArray(t)}return new t(function t(e,r){var i=Object.assign({},e);return n(e)&&n(r)&&Object.keys(r).forEach(function(o){n(r[o])&&o in e?i[o]=t(e[o],r[o]):Object.assign(i,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},o,r[o]))}),i}(this,e))}}]),t}();t.exports=a},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(27),s=0,a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schema=e,Object.assign(this,n),this.address||(this.address=""),!0!==this.require&&(this.require=!1)}return i(t,null,[{key:"compile",value:function(e){var n='\n      // "cursor"\n      let value = data\n      let container\n      let stack = []\n      let top = -1\n\n      // error state\n      let valid = true\n      let errors = []\n\n      // complex schema state\n      let initialValidity\n      let anyValid\n      let notValid\n      let countOfValid\n      let initialErrorCount\n      let accumulatedErrorCount\n\n      // validation code\n      '+new t(e).compile()+"\n\n      // validation result\n      return {\n        valid,\n        errors\n      }\n    ";return new Function("data",n)}},{key:"counter",get:function(){return s++}}]),i(t,[{key:"compile",value:function(){var t="";return this.require&&(t+=this.required()),t+=this.type(),t+=this.array(),t+=this.number(),t+=this.object(),t+=this.string(),t+=this.enum(),t+=this.anyOf(),t+=this.allOf(),t+=this.not(),t+=this.oneOf()}},{key:"push",value:function(){return"\n      stack.push(value)\n      container = value\n      top++\n    "}},{key:"pop",value:function(){return"\n      if (stack.length > 1) {\n        top--\n        stack.pop()\n      }\n\n      value = container = stack[top]\n    "}},{key:"type",value:function(){var t=this.schema.type,e=this.address,n="";return t&&(n+="\n      // "+e+" type checking\n      if (value !== undefined && "+(Array.isArray(t)?t:[t]).map(function(t){return"array"===t?"!Array.isArray(value)":"boolean"===t?"typeof value !== 'boolean'":"integer"===t?"!Number.isInteger(value)":"null"===t?"value !== null":"number"===t?"typeof value !== 'number'":"object"===t?"(typeof value !== 'object' || Array.isArray(value) || value === null)":"string"===t?"typeof value !== 'string'":void 0}).join(" && ")+") {\n        valid = false\n        errors.push({\n          keyword: 'type',\n          message: 'invalid type'\n        })\n      }\n      "),n}},{key:"array",value:function(){var t=this.validations(["additionalItems","items","minItems","maxItems","uniqueItems"]),e="";return t.length>0&&(e+="\n      /**\n       * Array validations\n       */\n      if (Array.isArray(value)) {\n      "+t+"\n      }\n      "),e}},{key:"number",value:function(){var t=this.validations(["minimum","maximum","multipleOf"]),e="";return t.length>0&&(e+="\n      /**\n       * Number validations\n       */\n      if (typeof value === 'number') {\n      "+t+"\n      }\n      "),e}},{key:"object",value:function(){var t=this.validations(["maxProperties","minProperties","additionalProperties","properties","patternProperties","dependencies","schemaDependencies","propertyDependencies"]),e="";return t.length>0&&(e+="\n      /**\n       * Object validations\n       */\n      if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n      "+t+"\n      }\n      "),e}},{key:"string",value:function(){var t=this.validations(["maxLength","minLength","pattern","format"]),e="";return t.length>0&&(e+="\n      /**\n       * String validations\n       */\n      if (typeof value === 'string') {\n      "+t+"\n      }\n      "),e}},{key:"validations",value:function(t){var e=this,n=this.schema,r="";return Object.keys(n).filter(function(e){return-1!==t.indexOf(e)}).forEach(function(t){r+=e[t]()}),r}},{key:"enum",value:function(){var t=this.schema.enum,e=this.address,n=["value !== undefined"],i="";return t&&(t.forEach(function(t){switch(void 0===t?"undefined":r(t)){case"boolean":case"number":n.push("value !== "+t);break;case"string":n.push('value !== "'+t+'"');break;case"object":null===t?n.push("value !== null"):n.push("'"+JSON.stringify(t)+"' !== JSON.stringify(value)");break;default:throw new Error("Things are not well in the land of enum")}}),i+='\n      /**\n       * Validate "'+e+'" enum\n       */\n      if ('+n.join(" && ")+") {\n        valid = false\n        errors.push({\n          keyword: 'enum',\n          message: JSON.stringify(value) + ' is not an enumerated value'\n        })\n      }\n      "),i}},{key:"anyOf",value:function(){var e=this.schema.anyOf,n=this.address,r="";return Array.isArray(e)&&(r+="\n        initialValidity = valid\n        initialErrorCount = errors.length\n        anyValid = false\n      ",e.forEach(function(e){var i=new t(e,{address:n});r+="\n        accumulatedErrorCount = errors.length\n        "+i.compile()+"\n        if (accumulatedErrorCount === errors.length) {\n          anyValid = true\n        }\n        "}),r+="\n          if (anyValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          }\n      "),r}},{key:"allOf",value:function(){var e=this.schema.allOf,n=this.address,r="";return Array.isArray(e)&&e.forEach(function(e){var i=new t(e,{address:n});r+="\n        "+i.compile()+"\n        "}),r}},{key:"oneOf",value:function(){var e=this.schema.oneOf,n=this.address,r="";return Array.isArray(e)&&(r+="\n        /**\n         * Validate "+n+" oneOf\n         */\n        initialValidity = valid\n        initialErrorCount = errors.length\n        countOfValid = 0\n      ",e.forEach(function(e){var i=new t(e,{address:n});r+="\n        accumulatedErrorCount = errors.length\n        "+i.compile()+"\n        if (accumulatedErrorCount === errors.length) {\n          countOfValid += 1\n        }\n        "}),r+="\n          if (countOfValid === 1) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors.push({\n              keyword: 'oneOf',\n              message: 'what is a reasonable error message for this case?'\n            })\n          }\n      "),r}},{key:"not",value:function(){var e=this.schema.not,n=this.address,i="";return"object"!==(void 0===e?"undefined":r(e))||null===e||Array.isArray(e)||(i+="\n        /**\n         * NOT\n         */\n        if (value !== undefined) {\n          initialValidity = valid\n          initialErrorCount = errors.length\n          notValid = true\n\n          accumulatedErrorCount = errors.length\n\n          "+new t(e,{address:n}).compile()+"\n\n          if (accumulatedErrorCount === errors.length) {\n            notValid = false\n          }\n\n          if (notValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors = errors.slice(0, initialErrorCount)\n            errors.push({\n              keyword: 'not',\n              message: 'hmm...'\n            })\n          }\n        }\n      "),i}},{key:"properties",value:function(){var e=this.schema,n=this.address,i=e.properties,o=e.required,s=this.push();return o=Array.isArray(o)?o:[],"object"===(void 0===i?"undefined":r(i))&&Object.keys(i).forEach(function(e){var r=i[e],a=-1!==o.indexOf(e),u=new t(r,{address:[n,e].filter(function(t){return!!t}).join("."),require:a});s+="\n        value = container['"+e+"']\n        ",s+=u.compile()}),s+=this.pop()}},{key:"otherProperties",value:function(){return"\n      /**\n       * Validate Other Properties\n       */\n      "+this.push()+"\n\n      for (let key in container) {\n        value = container[key]\n        matched = false\n\n        "+this.patternValidations()+"\n        "+this.additionalValidations()+"\n      }\n\n      "+this.pop()+"\n    "}},{key:"patternValidations",value:function(){var e=this.schema.patternProperties,n="";return"object"===(void 0===e?"undefined":r(e))&&Object.keys(e).forEach(function(r){var i=new t(e[r]);n+="\n          if (key.match('"+r+"')) {\n            matched = true\n            "+i.compile()+"\n          }\n        "}),n}},{key:"additionalValidations",value:function(){var e=this.schema,n=e.properties,i=e.additionalProperties,o=this.address,s="",a=["matched !== true"];if(Object.keys(n||{}).forEach(function(t){a.push("key !== '"+t+"'")}),"object"===(void 0===i?"undefined":r(i))){var u=new t(i,{address:o+"[APKey]"});s+="\n        // validate additional properties\n        if ("+a.join(" && ")+") {\n          "+u.compile()+"\n        }\n      "}return!1===i&&(s+="\n        // validate non-presence of additional properties\n        if ("+a.join(" && ")+") {\n          valid = false\n          errors.push({\n            keyword: 'additionalProperties',\n            message: key + ' is not a defined property'\n          })\n        }\n      "),s}},{key:"patternProperties",value:function(){var t="";return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,t+=this.otherProperties()),t}},{key:"additionalProperties",value:function(){var t="";return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,t+=this.otherProperties()),t}},{key:"minProperties",value:function(){var t=this.schema.minProperties;return"\n        // "+this.address+" min properties\n        if (Object.keys(value).length < "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'minProperties',\n            message: 'too few properties'\n          })\n        }\n    "}},{key:"maxProperties",value:function(){var t=this.schema.maxProperties;return"\n        // "+this.address+" max properties\n        if (Object.keys(value).length > "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'maxProperties',\n            message: 'too many properties'\n          })\n        }\n    "}},{key:"dependencies",value:function(){var e=this.schema.dependencies,n=this.address,i=this.push();return"object"===(void 0===e?"undefined":r(e))&&Object.keys(e).forEach(function(o){var s=e[o],a=[];if(Array.isArray(s))s.forEach(function(t){a.push("container['"+t+"'] === undefined")}),i+="\n            if (container['"+o+"'] !== undefined && ("+a.join(" || ")+")) {\n              valid = false\n              errors.push({\n                keyword: 'dependencies',\n                message: 'unmet dependencies'\n              })\n            }\n          ";else if("object"===(void 0===s?"undefined":r(s))){var u=new t(s,{address:n});i+="\n            if (container['"+o+"'] !== undefined) {\n              "+u.compile()+"\n            }\n          "}}),i+=this.pop()}},{key:"required",value:function(){this.schema.properties;var t="";return t+="\n      // validate "+this.address+" presence\n      if (value === undefined) {\n        valid = false\n        errors.push({\n          keyword: 'required',\n          message: 'is required'\n        })\n      }\n    "}},{key:"additionalItems",value:function(){var e=this.schema,n=e.items,i=e.additionalItems,o=(this.address,"");if(!1===i&&Array.isArray(n)&&(o+="\n        // don't allow additional items\n        if (value.length > "+n.length+") {\n          valid = false\n          errors.push({\n            keyword: 'additionalItems',\n            message: 'additional items not allowed'\n          })\n        }\n      "),"object"===(void 0===i?"undefined":r(i))&&null!==i&&Array.isArray(n)){var s=new t(i),a=t.counter;o+="\n        // additional items\n        "+this.push()+"\n\n        for (var i"+a+" = "+n.length+"; i"+a+" <= container.length; i"+a+"++) {\n          value = container[i"+a+"]\n          "+s.compile()+"\n        }\n\n        "+this.pop()+"\n      "}return o}},{key:"items",value:function(){var e=this.schema.items,n=this.address,i="";if(Array.isArray(e))i+=this.push(),e.forEach(function(e,r){var o=new t(e,{address:n+"["+r+"]"});i+="\n          // item #"+r+"\n          value = container["+r+"]\n          "+o.compile()+"\n        "}),i+=this.pop();else if("object"===(void 0===e?"undefined":r(e))&&null!==e){var o=new t(e),s=t.counter;i+="\n        // items\n        "+this.push()+"\n\n        for (var i"+s+" = 0; i"+s+" < container.length; i"+s+"++) {\n          // read array element\n          value = container[i"+s+"]\n          "+o.compile()+"\n        }\n\n        "+this.pop()+"\n      "}return i}},{key:"minItems",value:function(){var t=this.schema.minItems;return"\n        // "+this.address+" min items\n        if (value.length < "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'minItems',\n            message: 'too few properties'\n          })\n        }\n    "}},{key:"maxItems",value:function(){var t=this.schema.maxItems;return"\n        // "+this.address+" max items\n        if (value.length > "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'maxItems',\n            message: 'too many properties'\n          })\n        }\n    "}},{key:"uniqueItems",value:function(){var t=this.schema.uniqueItems,e=this.address,n="";return!0===t&&(n+="\n        // validate "+e+" unique items\n        let values = value.map(v => JSON.stringify(v)) // TODO: optimize\n        let set = new Set(values)\n        if (values.length !== set.size) {\n          valid = false\n          errors.push({\n            keyword: 'uniqueItems',\n            message: 'items must be unique'\n          })\n        }\n      "),n}},{key:"minLength",value:function(){var t=this.schema.minLength;return"\n        // "+this.address+" validate minLength\n        if (Array.from(value).length < "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'minLength',\n            message: 'too short'\n          })\n        }\n    "}},{key:"maxLength",value:function(){var t=this.schema.maxLength;return"\n        // "+this.address+" validate maxLength\n        if (Array.from(value).length > "+t+") {\n          valid = false\n          errors.push({\n            keyword: 'maxLength',\n            message: 'too long'\n          })\n        }\n    "}},{key:"pattern",value:function(){var t=this.schema.pattern,e=this.address;if(t)return"\n          // "+e+" validate pattern\n          if (!value.match(new RegExp('"+t+"'))) {\n            valid = false\n            errors.push({\n              keyword: 'pattern',\n              message: 'does not match the required pattern'\n            })\n          }\n      "}},{key:"format",value:function(){var t=this.schema.format,e=this.address,n=o.resolve(t);if(n)return"\n      // "+e+" validate format\n      if (!value.match("+n+")) {\n        valid = false\n        errors.push({\n          keyword: 'format',\n          message: 'is not \""+t+"\" format'\n        })\n      }\n      "}},{key:"minimum",value:function(){var t=this.schema,e=t.minimum,n=t.exclusiveMinimum;return"\n        // "+this.address+" validate minimum\n        if (value "+(!0===n?"<=":"<")+" "+e+") {\n          valid = false\n          errors.push({\n            keyword: 'minimum',\n            message: 'too small'\n          })\n        }\n    "}},{key:"maximum",value:function(){var t=this.schema,e=t.maximum,n=t.exclusiveMaximum;return"\n        // "+this.address+" validate maximum\n        if (value "+(!0===n?">=":">")+" "+e+") {\n          valid = false\n          errors.push({\n            keyword: 'maximum',\n            message: 'too large'\n          })\n        }\n    "}},{key:"multipleOf",value:function(){var t=this.schema.multipleOf,e="";if("number"==typeof t){var n=t.toString().length-t.toFixed(0).length-1,r=n>0?Math.pow(10,n):1;e+="\n        if ("+(n>0?"(value * "+r+") % "+t*r+" !== 0":"value % "+t+" !== 0")+") {\n          valid = false\n          errors.push({\n            keyword: 'multipleOf',\n            message: 'must be a multiple of "+t+"'\n          })\n        }\n      "}return e}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=n(36),i=n(55),o=n(58),s=n(60),a=n(65),u=n(62),c=n(64),l=n(56),f=n(59),h=n(63),p=n(61);t.exports={JWA:r,JWK:i,JWKSet:o,JWT:s,JWS:a,Base64URLSchema:u,JOSEHeaderSchema:c,JWKSchema:l,JWKSetSchema:f,JWTClaimsSetSchema:h,JWTSchema:p}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(37);var i=n(44),o=n(53).NotSupportedError,s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"sign",value:function(t,e,n){var r=i.normalize("sign",t);return r instanceof Error?Promise.reject(new o(t)):r.sign(e,n)}},{key:"verify",value:function(t,e,n,r){var s=i.normalize("verify",t);return s instanceof Error?Promise.reject(new o(t)):s.verify(e,n,r)}},{key:"importKey",value:function(t){return i.normalize("importKey",t.alg).importKey(t)}}]),t}();t.exports=s},function(t,e,n){t.exports=n(38).default,t.exports.default=t.exports},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const r=n(43);function i(e,n="utf8"){return t.isBuffer(e)?s(e.toString("base64")):s(t.from(e,n).toString("base64"))}function o(t){return t=t.toString(),r.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function s(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}let a=i;a.encode=i,a.decode=function(e,n="utf8"){return t.from(o(e),"base64").toString(n)},a.toBase64=o,a.fromBase64=s,a.toBuffer=function(e){return t.from(o(e),"base64")},e.default=a}).call(this,n(39).Buffer)},function(t,e,n){"use strict";(function(t){var r=n(40),i=n(41),o=n(42);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return z(F(e,t.length-n),t,n,r)}function b(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return b(t,e,n,r)}function _(t,e,n,r){return z(q(e),t,n,r)}function S(t,e,n,r){return z(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function C(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(19))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(NaN),u=0,l=s>0?r-4:r,f=0;f<l;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e),1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){let n=e.length,r=n%4;if(!r)return e;let i=n,o=4-r,s=n+o,a=t.alloc(s);for(a.write(e);o--;)a.write("=",i++);return a.toString()}}).call(this,n(39).Buffer)},function(t,e,n){"use strict";var r=n(45),i=n(46),o=n(50),s=new(n(51));s.define("HS256","sign",new i({name:"HMAC",hash:{name:"SHA-256"}})),s.define("HS384","sign",new i({name:"HMAC",hash:{name:"SHA-384"}})),s.define("HS512","sign",new i({name:"HMAC",hash:{name:"SHA-512"}})),s.define("RS256","sign",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}})),s.define("RS384","sign",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}})),s.define("RS512","sign",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}})),s.define("none","sign",new r({})),s.define("HS256","verify",new i({name:"HMAC",hash:{name:"SHA-256"}})),s.define("HS384","verify",new i({name:"HMAC",hash:{name:"SHA-384"}})),s.define("HS512","verify",new i({name:"HMAC",hash:{name:"SHA-512"}})),s.define("RS256","verify",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}})),s.define("RS384","verify",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}})),s.define("RS512","verify",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}})),s.define("none","verify",new r({})),s.define("RS256","importKey",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}})),s.define("RS384","importKey",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}})),s.define("RS512","importKey",new o({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}})),t.exports=s},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"sign",value:function(){return Promise.resolve("")}},{key:"verify",value:function(){}}]),t}();t.exports=i},function(t,e,n){"use strict";(function(e){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(37),o=n(47),s=n(48),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e}return r(t,[{key:"sign",value:function(t,n){var r=this.params;return n=(new s).encode(n),o.subtle.sign(r,t,n).then(function(t){return i(e.from(t))})}},{key:"verify",value:function(t,e,n){var r=this.params;return"string"==typeof e&&(e=Uint8Array.from(i.toBuffer(e))),"string"==typeof n&&(n=(new s).encode(n)),o.subtle.verify(r,t,e,n)}},{key:"assertSufficientKeyLength",value:function(t){if(t.length<this.bitlength)throw new Error("The key is too short.")}}]),t}();t.exports=a}).call(this,n(39).Buffer)},function(t,e){t.exports=window.crypto},function(t,e,n){"use strict";(function(e){var r=e.TextEncoder?e.TextEncoder:n(49).TextEncoder;t.exports=r}).call(this,n(19))},function(t,e){t.exports=window.TextEncoder},function(t,e,n){"use strict";(function(e){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(37),o=n(47),s=n(48),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e}return r(t,[{key:"sign",value:function(t,n){var r=this.params;return n=(new s).encode(n),o.subtle.sign(r,t,n).then(function(t){return i(e.from(t))})}},{key:"verify",value:function(t,e,n){var r=this.params;return"string"==typeof e&&(e=Uint8Array.from(i.toBuffer(e))),"string"==typeof n&&(n=(new s).encode(n)),o.subtle.verify(r,t,e,n)}},{key:"importKey",value:function(t){var e=Object.assign({},t),n=this.params,r=t.key_ops||[];return"sig"===t.use&&r.push("verify"),"enc"===t.use?Promise.resolve(t):(t.key_ops&&(r=t.key_ops),o.subtle.importKey("jwk",e,n,!0,r).then(function(t){return Object.defineProperty(e,"cryptoKey",{enumerable:!1,value:t}),e}))}}]),t}();t.exports=a}).call(this,n(39).Buffer)},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(52),o=["sign","verify","encrypt","decrypt","importKey"],s=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.forEach(function(t){e[t]={}})}return r(t,[{key:"define",value:function(t,e,n){this[e][t]=n}},{key:"normalize",value:function(t,e){var n=this[t];if(!n)return new SyntaxError;var r=n[e];return r||new i(e)}}],[{key:"operations",get:function(){return o}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.message=t+" is not a supported algorithm",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports=r},function(t,e,n){"use strict";t.exports={DataError:n(54),NotSupportedError:n(52)}},function(t,e,n){"use strict";var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports=r},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(26).JSONDocument,o=n(56),s=n(36),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),r(e,null,[{key:"importKey",value:function(t){return s.importKey(t)}},{key:"schema",get:function(){return o}}]),e}();t.exports=a},function(t,e,n){"use strict";var r=n(26).JSONSchema,i=(n(57).BASE64_REGEXP,new r({type:"object",properties:{kty:{type:"string",enum:["RSA","EC","oct"]},use:{type:"string",enum:["sig","enc"]},key_ops:{type:"array",items:{enum:["sign","verify","encrypt","decrypt","wrapKey","unwrapKey","deriveKey","deriveBits"]}},alg:{type:"string",enum:["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none"]},kid:{type:"string"},x5u:{type:"string"},x5c:{type:"array"},x5t:{type:"string"}}}));t.exports=i},function(t,e,n){"use strict";var r=n(26).Formats;r.register("StringOrURI",new RegExp),r.register("NumericDate",new RegExp),r.register("URI",new RegExp),r.register("url",new RegExp),r.register("base64",new RegExp),r.register("base64url",new RegExp),r.register("MediaType",new RegExp)},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(26).JSONDocument,o=n(59),s=n(55),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),r(e,null,[{key:"importKeys",value:function(t){var n=this.schema.validate(t);if(!n.valid)return Promise.reject(new Error("Invalid JWKSet: "+JSON.stringify(n,null,2)));if(!t.keys)return Promise.reject(new Error("Cannot import JWKSet: keys property is empty"));var r=void 0,i=void 0;try{r=new e(t),i=t.keys.map(function(t){return s.importKey(t)})}catch(t){return Promise.reject(t)}return Promise.all(i).then(function(t){return r.keys=t,r})}},{key:"schema",get:function(){return o}}]),e}();t.exports=a},function(t,e,n){"use strict";var r=new(0,n(26).JSONSchema)({type:"object",properties:{keys:{type:"array",items:n(56)}}});t.exports=r},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(37),s=n(26).JSONDocument,a=n(61),u=n(65),c=n(54),l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),i(e,[{key:"isJWE",value:function(){return!!this.header.enc}},{key:"resolveKeys",value:function(t){var e=this.header.kid,n=void 0,i=void 0;if(Array.isArray(t)&&(n=t),t.keys&&(n=t.keys),t.keys||"object"!==(void 0===t?"undefined":r(t))||(n=[t]),!n)throw new c("Invalid JWK argument");return!!(i=e?n.find(function(t){return t.kid===e}):n.find(function(t){return"sig"===t.use}))&&(this.key=i.cryptoKey,!0)}},{key:"encode",value:function(){var t=this.validate();return t.valid?this.isJWE()?JWE.encrypt(this):u.sign(this):Promise.reject(t)}},{key:"verify",value:function(){var t=this.validate();return t.valid?u.verify(this):Promise.reject(t)}}],[{key:"decode",value:function(t){var e=void 0;if("string"!=typeof t)throw new c("JWT must be a string");if(t.startsWith("{")){try{t=JSON.parse(t,function(){})}catch(t){throw new c("Invalid JWT serialization")}t.signatures||t.recipients?t.serialization="json":t.serialization="flattened",e=new this(t,{filter:!1})}else try{var n=t.split("."),r=n.length;if(3!==r&&5!==r)throw new Error("Malformed JWT");var i=JSON.parse(o.decode(n[0]));3===r&&(e=new this({type:"JWS",segments:n,header:i,payload:JSON.parse(o.decode(n[1])),signature:n[2],serialization:"compact"},{filter:!1}))}catch(t){throw new c("Invalid JWT compact serialization")}return e}},{key:"encode",value:function(t,n,r){return new e(t,n).encode(r)}},{key:"verify",value:function(t,n){var r=e.decode(n);return r.key=t,r.verify().then(function(t){return r})}},{key:"schema",get:function(){return a}}]),e}();t.exports=l},function(t,e,n){"use strict";var r=n(62),i=n(63),o=n(64),s=new(0,n(26).JSONSchema)({type:"object",properties:{type:{type:"string",enum:["JWS","JWE"]},segments:{type:"array"},header:o,protected:o,unprotected:o,iv:r,aad:r,ciphertext:r,tag:r,recipients:{type:"array",items:{type:"object",properties:{header:o,encrypted_key:r}}},payload:i,signatures:{type:"array",items:{type:"object",properties:{protected:o,header:o,signature:r,key:{type:"object"}}}},signature:r,verified:{type:"boolean",default:!1},key:{type:"object"},serialization:{type:"string",enum:["compact","json","flattened"],default:"compact"}}});t.exports=s},function(t,e,n){"use strict";var r=new(0,n(26).JSONSchema)({type:"string",format:"base64url"});t.exports=r},function(t,e,n){"use strict";var r=new(0,n(26).JSONSchema)({properties:{iss:{type:"string",format:"StringOrURI"},sub:{type:"string",format:"StringOrURI"},aud:{type:["array","string"],format:"StringOrURI",items:{format:"StringOrURI"}},exp:{type:"number",format:"NumericDate"},nbf:{type:"number",format:"NumericDate"},iat:{type:"number",format:"NumericDate"},jti:{type:"string"}}});t.exports=r},function(t,e,n){"use strict";n(56);var r=new(0,n(26).JSONSchema)({type:"object",properties:{typ:{type:"string"},cty:{type:"string",enum:["JWT"]},alg:{type:"string",format:"StringOrURI"},jku:{type:"string",format:"URI"},kid:{type:"string"},x5u:{type:"string",format:"URI"},x5c:{type:"array",items:{type:"string",format:"base64"}},x5t:{type:"string",format:"base64url"},crit:{type:"array",items:{type:"string"},minItems:1},enc:{type:"string",format:"StringOrURI"},zip:{type:"string"}}});t.exports=r},function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(37),s=n(36),a=n(53).DataError,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"sign",value:function(t){var e=o(JSON.stringify(t.payload));if("compact"===t.serialization){var n=t.key,r=t.header.alg,i=o(JSON.stringify(t.header))+"."+e;return s.sign(r,n,i).then(function(t){return i+"."+t})}return t.serialization,t.serialization,Promise.reject(new a("Unsupported serialization"))}},{key:"verify",value:function(t){t.signatures;var e=t.key,n=t.signature,i=t.header.alg;if(t.signature){var o=r(t.segments,2),u=o[0]+"."+o[1];return"none"===i?Promise.reject(new a("Signature provided to verify with alg: none")):s.verify(i,e,n,u).then(function(e){return t.verified=e,e})}if("none"===i){if(!e&&!n)return t.verified=!0,Promise.resolve(!0);if(e)return Promise.reject(new a("Key provided to verify signature with alg: none"))}return Promise.reject(new a("Missing signature(s)"))}}]),t}();t.exports=u},function(t,e,n){(function(e){const r=n(20),i=n(37),o=n(47),{JWT:s}=n(35),a=n(67),{URL:u}=n(25);class c{static create(t,n,s){const{provider:l,defaults:f,registration:h}=t;let p,d,v,y;return Promise.resolve().then(()=>(r(l.configuration,"RelyingParty provider OpenID Configuration is missing"),r(f.authenticate,"RelyingParty default authentication parameters are missing"),r(h,"RelyingParty client registration is missing"),p=l.configuration.issuer,d=l.configuration.authorization_endpoint,v={client_id:h.client_id},y=Object.assign(f.authenticate,v,n),r(p,"Missing issuer in provider OpenID Configuration"),r(d,"Missing authorization_endpoint in provider OpenID Configuration"),r(y.scope,"Missing scope parameter in authentication request"),r(y.response_type,"Missing response_type parameter in authentication request"),r(y.client_id,"Missing client_id parameter in authentication request"),r(y.redirect_uri,"Missing redirect_uri parameter in authentication request"),y.state=Array.from(o.getRandomValues(new Uint8Array(16))),y.nonce=Array.from(o.getRandomValues(new Uint8Array(16))),Promise.all([o.subtle.digest({name:"SHA-256"},new Uint8Array(y.state)),o.subtle.digest({name:"SHA-256"},new Uint8Array(y.nonce))]))).then(t=>{let n=i(e.from(t[0])),r=i(e.from(t[1]));s[`${p}/requestHistory/${n}`]=JSON.stringify(y),y.state=n,y.nonce=r}).then(()=>c.generateSessionKeys()).then(t=>{c.storeSessionKeys(t,y,s)}).then(()=>{if(l.configuration.request_parameter_supported)return c.encodeRequestParams(y).then(t=>{y=t})}).then(()=>{let t=new u(d);return t.search=a.encode(y),t.href})}static generateSessionKeys(){return o.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(t=>Promise.all([o.subtle.exportKey("jwk",t.publicKey),o.subtle.exportKey("jwk",t.privateKey)])).then(t=>{let[e,n]=t;return{public:e,private:n}})}static storeSessionKeys(t,e,n){n["oidc.session.privateKey"]=JSON.stringify(t.private),e.key=t.public}static encodeRequestParams(t){const e=["scope","client_id","response_type","state"];let n={};return Object.keys(t).filter(t=>!e.includes(t)).forEach(e=>{n[e]=t[e]}),new s({header:{alg:"none"},payload:n},{filter:!1}).encode().then(e=>({scope:t.scope,client_id:t.client_id,response_type:t.response_type,request:e,state:t.state}))}}t.exports=c}).call(this,n(39).Buffer)},function(t,e){t.exports=class{static encode(t){let e=[];return Object.keys(t).forEach(function(n){e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]))}),e.join("&")}static decode(t){let e={};return t.split("&").forEach(function(t){let n=t.split("="),r=decodeURIComponent(n[0]),i=decodeURIComponent(n[1]);e[r]=i}),e}}},function(t,e,n){(function(e,r){const{URL:i}=n(25),o=n(20),s=n(47),a=n(37),u=n(6),c=u.Headers?u.Headers:e.Headers,l=n(67),f=n(69),h=n(71),p=n(72),d=n(74);class v{constructor({rp:t,redirect:e,body:n,session:r,mode:i,params:o={}}){this.rp=t,this.redirect=e,this.body=n,this.session=r,this.mode=i,this.params=o}static validateResponse(t){return Promise.resolve(t).then(this.parseResponse).then(this.errorResponse).then(this.matchRequest).then(this.validateStateParam).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(h.fromAuthResponse)}static parseResponse(t){let{redirect:e,body:n}=t;if(e&&n||!e&&!n)throw new d(400,"Invalid response mode");if(e){let n=new i(e),{search:r,hash:o}=n;if(r&&o||!r&&!o)throw new d(400,"Invalid response mode");r&&(t.params=l.decode(r.substring(1)),t.mode="query"),o&&(t.params=l.decode(o.substring(1)),t.mode="fragment")}return n&&(t.params=l.decode(n),t.mode="form_post"),t}static errorResponse(t){const e=t.params.error;if(e){const n={};n.error=e,n.error_description=t.params.error_description,n.error_uri=t.params.error_uri,n.state=t.params.state;const r=new Error(`AuthenticationResponse error: ${e}`);throw r.info=n,r}return t}static matchRequest(t){let{rp:e,params:n,session:r}=t,i=n.state,o=e.provider.configuration.issuer;if(!i)throw new Error("Missing state parameter in authentication response");let s=r[`${o}/requestHistory/${i}`];if(!s)throw new Error("Mismatching state parameter in authentication response");return t.request=JSON.parse(s),t}static validateStateParam(t){let e=new Uint8Array(t.request.state),n=t.params.state;return s.subtle.digest({name:"SHA-256"},e).then(e=>{if(n!==a(r.from(e)))throw new Error("Mismatching state parameter in authentication response");return t})}static validateResponseMode(t){if("code"!==t.request.response_type&&"query"===t.mode)throw new Error("Invalid response mode");return t}static validateResponseParams(t){let{request:e,params:n}=t,r=e.response_type.split(" ");return r.includes("code")&&o(n.code,"Missing authorization code in authentication response"),r.includes("id_token")&&o(n.id_token,"Missing id_token in authentication response"),r.includes("token")&&(o(n.access_token,"Missing access_token in authentication response"),o(n.token_type,"Missing token_type in authentication response")),t}static exchangeAuthorizationCode(t){let{rp:e,params:n,request:i}=t,s=n.code;if(!s||"code"!==i.response_type)return Promise.resolve(t);let{provider:a,registration:f}=e,h=f.client_id,d=f.client_secret;if(!d)return Promise.reject(new Error("Client cannot exchange authorization code because it is not a confidential client"));let v=a.configuration.token_endpoint,y=new c({"Content-Type":"application/x-www-form-urlencoded"}),g={grant_type:"authorization_code",code:s,redirect_uri:i.redirect_uri},m=f.token_endpoint_auth_method||"client_secret_basic";if("client_secret_basic"===m){let t=new r(`${h}:${d}`).toString("base64");y.set("Authorization",`Basic ${t}`)}"client_secret_post"===m&&(g.client_id=h,g.client_secret=d);let w=l.encode(g);return u(v,{method:"POST",headers:y,body:w}).then(p("Error exchanging authorization code")).then(t=>t.json()).then(e=>(o(e.access_token,"Missing access_token in token response"),o(e.token_type,"Missing token_type in token response"),o(e.id_token,"Missing id_token in token response"),t.params=Object.assign(t.params,e),t))}static validateIDToken(t){return t.params.id_token?Promise.resolve(t).then(v.decryptIDToken).then(v.decodeIDToken).then(v.validateIssuer).then(v.validateAudience).then(v.resolveKeys).then(v.verifySignature).then(v.validateExpires).then(v.verifyNonce).then(v.validateAcr).then(v.validateAuthTime).then(v.validateAccessTokenHash).then(v.validateAuthorizationCodeHash):Promise.resolve(t)}static decryptIDToken(t){return Promise.resolve(t)}static decodeIDToken(t){let e=t.params.id_token;try{t.decoded=f.decode(e)}catch(t){const n=new d(400,"Error decoding ID Token");throw n.cause=t,n.info={id_token:e},n}return t}static validateIssuer(t){let e=t.rp.provider.configuration;if(t.decoded.payload.iss!==e.issuer)throw new Error("Mismatching issuer in ID Token");return t}static validateAudience(t){let e=t.rp.registration,{aud:n,azp:r}=t.decoded.payload;if("string"==typeof n&&n!==e.client_id)throw new Error("Mismatching audience in id_token");if(Array.isArray(n)&&!n.includes(e.client_id))throw new Error("Mismatching audience in id_token");if(Array.isArray(n)&&!r)throw new Error("Missing azp claim in id_token");if(r&&r!==e.client_id)throw new Error("Mismatching azp claim in id_token");return t}static resolveKeys(t){let e=t.rp,n=e.provider,r=t.decoded;return Promise.resolve(n.jwks).then(t=>t||e.jwks()).then(e=>{if(r.resolveKeys(e))return Promise.resolve(t);throw new Error("Cannot resolve signing key for ID Token")})}static verifySignature(t){let e=t.decoded.header.alg,n=t.rp.registration.id_token_signed_response_alg||"RS256";if(e!==n)throw new Error(`Expected ID Token to be signed with ${n}`);return t.decoded.verify().then(e=>{if(!e)throw new Error("Invalid ID Token signature");return t})}static validateExpires(t){if(t.decoded.payload.exp<=Math.floor(Date.now()/1e3))throw new Error("Expired ID Token");return t}static verifyNonce(t){let e=new Uint8Array(t.request.nonce),n=t.decoded.payload.nonce;if(!n)throw new Error("Missing nonce in ID Token");return s.subtle.digest({name:"SHA-256"},e).then(e=>{if(n!==a(r.from(e)))throw new Error("Mismatching nonce in ID Token");return t})}static validateAcr(t){return t}static validateAuthTime(t){return t}static validateAccessTokenHash(t){return t}static validateAuthorizationCodeHash(t){return t}}t.exports=v}).call(this,n(19),n(39).Buffer)},function(t,e,n){const{JWT:r}=n(35),i=n(70);t.exports=class extends r{static get schema(){return i}}},function(t,e,n){const{JWTSchema:r}=n(35),i=r.extend({properties:{header:{},payload:{properties:{iss:{type:"string",format:"url"},sub:{type:"string",maxLength:255},auth_time:{type:"integer",format:"NumericDate"},nonce:{type:"string"},acr:{type:"string"},amr:{type:"array",items:{type:"string"}},azp:{type:"string",format:"StringOrURI"}},required:["iss","sub","aud","exp","iat"]}}});t.exports=i},function(t,e,n){"use strict";const r=n(6),i=n(72),o=n(73);class s{constructor(t){this.credentialType=t.credentialType||"access_token",this.issuer=t.issuer,this.authorization=t.authorization||{},this.sessionKey=t.sessionKey,this.idClaims=t.idClaims,this.accessClaims=t.accessClaims}static from(t){return new s(t)}static fromAuthResponse(t){const e=n(18);let r=t.decoded&&t.decoded.payload||{},{rp:i}=t,o=i.registration,a={credentialType:(i.defaults.authenticate||{}).credential_type||i.defaults.popToken?"pop_token":"access_token",sessionKey:t.session[e.SESSION_PRIVATE_KEY],issuer:r.iss,idClaims:r,authorization:{client_id:o.client_id,access_token:t.params.access_token,id_token:t.params.id_token,refresh_token:t.params.refresh_token}};return s.from(a)}get fetch(){return(t,e)=>Promise.resolve().then(()=>this.hasCredentials()?this.fetchWithCredentials(t,e):r(t,e)).then(i("Error while fetching resource"))}bearerTokenFor(t){switch(this.credentialType){case"pop_token":return o.issueFor(t,this);default:return Promise.resolve(this.authorization[this.credentialType])}}hasCredentials(){switch(this.credentialType){case"pop_token":return!!this.authorization.id_token;default:return!!this.authorization[this.credentialType]}}fetchWithCredentials(t,e={}){return e.headers=e.headers||{},this.bearerTokenFor(t).then(n=>(e.headers.authorization=`Bearer ${n}`,r(t,e)))}}t.exports=s},function(t,e,n){"use strict";t.exports=function(t="fetch error"){return e=>{if(e.status>=200&&e.status<300)return e;let n=`${t}: ${e.status} ${e.statusText}`,r=new Error(n);throw r.response=e,r.statusCode=e.status,r}}},function(t,e,n){"use strict";const{URL:r}=n(25),{JWT:i,JWK:o}=n(35),s=3600;class a extends i{static issueFor(t,e){if(!t)throw new Error("Cannot issue PoPToken - missing resource server URI");if(!e.sessionKey)throw new Error("Cannot issue PoPToken - missing session key");if(!e.authorization.id_token)throw new Error("Cannot issue PoPToken - missing id token");let n=JSON.parse(e.sessionKey);return o.importKey(n).then(n=>{let i={aud:new r(t).origin,key:n,iss:e.authorization.client_id,id_token:e.authorization.id_token};return a.issue(i)}).then(t=>t.encode())}static issue(t){let{aud:e,iss:n,key:r}=t,i=r.alg,o=t.iat||Math.floor(Date.now()/1e3),u={alg:i},c={iss:n,aud:e,exp:o+(t.max||s),iat:o,id_token:t.id_token,token_type:"pop"};return new a({header:u,payload:c,key:r.cryptoKey},{filter:!1})}}t.exports=a},function(t,e,n){e=t.exports=s;var r=n(75),i=n(76),o=e;function s(t,e,n){if("string"==typeof t&&(t=o[t]),"number"!=typeof t)throw new TypeError("Non-numeric HTTP code");"object"==typeof e&&null!=e&&(n=e,e=null),r.call(this,e||i[t],n),this.code=t}for(var a in s.prototype=Object.create(r.prototype,{constructor:{value:s,configurable:!0,writable:!0}}),s.prototype.name="HttpError",Object.defineProperties(s.prototype,{statusCode:u("code"),statusMessage:u("message"),status:{configurable:!0,get:function(){return this.code},set:function(t){Object.defineProperty(this,"status",{value:t,configurable:!0,enumerable:!0,writable:!0})}}}),s.prototype.toString=function(){return this.name+": "+this.code+" "+this.message},i)e[i[a].replace("'","").replace(/[- ]/g,"_").toUpperCase()]=+a;function u(t){return{configurable:!0,get:function(){return this[t]},set:function(e){return this[t]=e}}}},function(t,e){var n=Object.hasOwnProperty,r=Object.getPrototypeOf,i=Error.captureStackTrace;function o(t,e){if(t&&"object"==typeof t?(e=t,t=void 0):this.message=t,e)for(var o in e)this[o]=e[o];n.call(this,"name")||(this.name=n.call(r(this),"name")?this.name:this.constructor.name),!i||"stack"in this||i(this,this.constructor)}t.exports=o,o.prototype=Object.create(Error.prototype,{constructor:{value:o,configurable:!0,writable:!0}}),o.prototype.name="StandardError"},function(t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){const{JSONSchema:r}=n(26),i=new r({type:"object",properties:{provider:{type:"object",properties:{name:{type:"string"},url:{type:"string",format:"uri"},configuration:{},jwks:{}},required:["url"]},defaults:{type:"object",properties:{popToken:{type:"boolean",default:!1},authenticate:{type:"object",properties:{redirect_uri:{type:"string",format:"uri"},response_type:{type:"string",default:"id_token token",enum:["code","token","id_token token","id_token token code"]},display:{type:"string",default:"page",enum:["page","popup"]},scope:{type:["string","array"],default:["openid"]}}},register:{}}},registration:{},store:{type:"object",default:{}}}});t.exports=i},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(25).URL,o=n(35),s=o.JWT,a=o.JWK,u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),r(e,null,[{key:"issueFor",value:function(t,n){if(!t)throw new Error("Cannot issue PoPToken - missing resource server URI");if(!n.sessionKey)throw new Error("Cannot issue PoPToken - missing session key");if(!n.authorization.id_token)throw new Error("Cannot issue PoPToken - missing id token");var r=JSON.parse(n.sessionKey);return a.importKey(r).then(function(r){var o={aud:new i(t).origin,key:r,iss:n.authorization.client_id,id_token:n.authorization.id_token};return e.issue(o)}).then(function(t){return t.encode()})}},{key:"issue",value:function(t){var n=t.aud,r=t.iss,i=t.key,o=i.alg,s=t.iat||Math.floor(Date.now()/1e3);return new e({header:{alg:o},payload:{iss:r,aud:n,exp:s+(t.max||3600),iat:s,id_token:t.id_token,token_type:"pop"},key:i.cryptoKey},{filter:!1})}}]),e}();t.exports=u},function(t,e,n){"use strict";n.r(e),n.d(e,"openIdpPopup",function(){return o}),n.d(e,"obtainSession",function(){return s}),n.d(e,"popupHandler",function(){return a});var r=n(11),i=n(7);function o(t){const e=`width=650,height=400,left=${window.screenX+(window.innerWidth-650)/2},top=${window.screenY+(window.innerHeight-400)/2}`;return window.open(t,"solid-auth-client",e)}function s(t,e,n){return new Promise((o,s)=>{const u=new r.Server(e,Object(i.originOf)(n.popupUri||""),a(t,n,t=>{u.stop(),o(t)}));u.start()})}function a(t,{popupUri:e,callbackUri:n},r){return async(i,...o)=>{switch(i){case"getAppOrigin":return window.location.origin;case"storage/getItem":return t.getItem(...o);case"storage/setItem":return t.setItem(...o);case"storage/removeItem":return t.removeItem(...o);case"getLoginOptions":return{popupUri:e,callbackUri:n};case"foundSession":r(...o)}}}}]).default},function(t,e,n){"use strict";t.exports=function(t,e){function n(t,e){return t<<e|t>>>32-e}function r(t,e){var n,r,i,o,s;return i=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^s^i^o:n|r?1073741824&s?3221225472^s^i^o:1073741824^s^i^o:s^i^o}function i(t,e,i,o,s,a,u){return r(n(t=r(t,r(r(function(t,e,n){return t&e|~t&n}(e,i,o),s),u)),a),e)}function o(t,e,i,o,s,a,u){return r(n(t=r(t,r(r(function(t,e,n){return t&n|0}(e,0,o),s),u)),a),e)}function s(t,e,i,o,s,a,u){return r(n(t=r(t,r(r(function(t,e,n){return t^e^n}(e,i,o),s),u)),a),e)}function a(t,e,i,o,s,a,u){return r(n(t=r(t,r(r(function(t,e,n){return e^(-1|t)}(e,i),s),u)),a),e)}function u(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}t=t||"";var c,l,f,h,p,d,v,y,g,m=Array();for(m=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),s=0,a=0;a<n;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[i-2]=n<<3,o[i-1]=n>>>29,o}(t),d=1732584193,v=4023233417,y=2562383102,g=271733878,c=0;c<m.length;c+=16)l=d,f=v,h=y,p=g,v=a(v=a(v=a(v=a(v=s(v=s(v=s(v=s(v=o(v=o(v=o(v=o(v=i(v=i(v=i(v=i(v,y=i(y,g=i(g,d=i(d,v,y,g,m[c+0],7,3614090360),v,y,m[c+1],12,3905402710),d,v,m[c+2],17,606105819),g,d,m[c+3],22,3250441966),y=i(y,g=i(g,d=i(d,v,y,g,m[c+4],7,4118548399),v,y,m[c+5],12,1200080426),d,v,m[c+6],17,2821735955),g,d,m[c+7],22,4249261313),y=i(y,g=i(g,d=i(d,v,y,g,m[c+8],7,1770035416),v,y,m[c+9],12,2336552879),d,v,m[c+10],17,4294925233),g,d,m[c+11],22,2304563134),y=i(y,g=i(g,d=i(d,v,y,g,m[c+12],7,1804603682),v,y,m[c+13],12,4254626195),d,v,m[c+14],17,2792965006),g,d,m[c+15],22,1236535329),y=o(y,g=o(g,d=o(d,v,y,g,m[c+1],5,4129170786),v,y,m[c+6],9,3225465664),d,v,m[c+11],14,643717713),g,d,m[c+0],20,3921069994),y=o(y,g=o(g,d=o(d,v,y,g,m[c+5],5,3593408605),v,y,m[c+10],9,38016083),d,v,m[c+15],14,3634488961),g,d,m[c+4],20,3889429448),y=o(y,g=o(g,d=o(d,v,y,g,m[c+9],5,568446438),v,y,m[c+14],9,3275163606),d,v,m[c+3],14,4107603335),g,d,m[c+8],20,1163531501),y=o(y,g=o(g,d=o(d,v,y,g,m[c+13],5,2850285829),v,y,m[c+2],9,4243563512),d,v,m[c+7],14,1735328473),g,d,m[c+12],20,2368359562),y=s(y,g=s(g,d=s(d,v,y,g,m[c+5],4,4294588738),v,y,m[c+8],11,2272392833),d,v,m[c+11],16,1839030562),g,d,m[c+14],23,4259657740),y=s(y,g=s(g,d=s(d,v,y,g,m[c+1],4,2763975236),v,y,m[c+4],11,1272893353),d,v,m[c+7],16,4139469664),g,d,m[c+10],23,3200236656),y=s(y,g=s(g,d=s(d,v,y,g,m[c+13],4,681279174),v,y,m[c+0],11,3936430074),d,v,m[c+3],16,3572445317),g,d,m[c+6],23,76029189),y=s(y,g=s(g,d=s(d,v,y,g,m[c+9],4,3654602809),v,y,m[c+12],11,3873151461),d,v,m[c+15],16,530742520),g,d,m[c+2],23,3299628645),y=a(y,g=a(g,d=a(d,v,y,g,m[c+0],6,4096336452),v,y,m[c+7],10,1126891415),d,v,m[c+14],15,2878612391),g,d,m[c+5],21,4237533241),y=a(y,g=a(g,d=a(d,v,y,g,m[c+12],6,1700485571),v,y,m[c+3],10,2399980690),d,v,m[c+10],15,4293915773),g,d,m[c+1],21,2240044497),y=a(y,g=a(g,d=a(d,v,y,g,m[c+8],6,1873313359),v,y,m[c+15],10,4264355552),d,v,m[c+6],15,2734768916),g,d,m[c+13],21,1309151649),y=a(y,g=a(g,d=a(d,v,y,g,m[c+4],6,4149444226),v,y,m[c+11],10,3174756917),d,v,m[c+2],15,718787259),g,d,m[c+9],21,3951481745),d=r(d,l),v=r(v,f),y=r(y,h),g=r(g,p);return 32==e?u(d)+u(v)+u(y)+u(g):u(v)+u(y)}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(38)),i=o(n(37));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var s=e[i](o),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){r("next",t)},function(t){r("throw",t)});t(a)}("next")})}}var a=function(){};a.prototype={guessFileType:function(t){var e=t.replace(/.*\./,"");return e.match(/\/$/)?"folder":e.match(/(md|markdown)/)?"text/markdown":e.match(/html/)?"text/html":e.match(/xml/)?"text/xml":e.match(/ttl/)?"text/turtle":e.match(/n3/)?"text/n3":e.match(/rq/)?"application/sparql":e.match(/css/)?"text/css":e.match(/txt/)?"text/plain":e.match(/json/)?"application/json":e.match(/js/)?"application/javascript":e.match(/(png|gif|jpeg|tif)/)?"image":e.match(/(mp3|aif|ogg)/)?"audio":e.match(/(avi|mp4|mpeg)/)?"video":"text/turtle"},getFileType:function(t,e){var n=r.default.sym(e),i=r.default.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),o=t.each(n,i,void 0);for(var s in o){var a=o[s].value;if(a.match("ldp#BasicContainer"))return"folder";if(a.match("http://www.w3.org/ns/iana/media-types/"))return(a=a.replace("http://www.w3.org/ns/iana/media-types/","")).replace("#Resource","")}return"unknown"},createFile:function(){var t=s(regeneratorRuntime.mark(function t(e,n,r){var i,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.replace(/\/$/,"").replace(/.*\//,""),o=e.replace(i,"").replace(/\/\/$/,"/"),t.next=4,this.add(o,i,n,r);case 4:return s=t.sent,t.abrupt("return",s);case 6:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),createFolder:function(){var t=s(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createFile(e,"folder");case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteFolder:function(){var t=s(regeneratorRuntime.mark(function t(e){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.fetch(e,{method:"DELETE"}).catch(function(t){return r.err=t,!1});case 2:if(!(n=t.sent).ok){t.next=7;break}return t.abrupt("return",!0);case 7:return this.err=n.status+" ("+n.statusText+")",t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateFile:function(){var t=s(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.deleteFile(e);case 2:return t.sent,t.next=5,this.createFile(e,void 0,n);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),deleteFile:a.deleteFolder,readFile:function(t){return this.fetch(t)},readFolder:function(){var t=s(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:if(r=this.text2graph(n.value,e,"text/turtle")){t.next=8;break}return t.abrupt("return",!1);case 8:return t.abrupt("return",this.processFolder(r,e,n.value));case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),fetchAndParse:function(){var t=s(regeneratorRuntime.mark(function t(e,n){var r,o,s,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=n||this.guessFileType(e),t.next=3,i.default.fetch(e).catch(function(t){return a.err=t,!1});case 3:if((r=t.sent).ok){t.next=7;break}return this.err=r.status+" ("+r.statusText+")",t.abrupt("return",!1);case 7:if("application/json"!==n){t.next=12;break}return t.next=10,r.json().catch(function(t){return a.err=t,!1});case 10:return o=t.sent,t.abrupt("return",o);case 12:return t.next=14,r.text().catch(function(t){return a.err=t,!1});case 14:return s=t.sent,t.abrupt("return",this.text2graph(s,e,n));case 16:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),text2graph:function(t,e,n){n=n||this.guessFileType(e);var i=r.default.graph();try{return r.default.parse(t,i,e,n),i}catch(t){return this.err=t,!1}},add:function(){var t=s(regeneratorRuntime.mark(function t(e,n,r,o){var s,a,u,c,l=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s='<http://www.w3.org/ns/ldp#Resource>; rel="type"',"folder"===r&&(s='<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',a="text/turtle"),u={method:"POST",headers:{"Content-Type":a,slug:n,link:s}},o&&(u.body=o),t.next=6,i.default.fetch(e,u).catch(function(t){return l.err=t,!1});case 6:if(!(c=t.sent).ok){t.next=11;break}return t.abrupt("return",!0);case 11:return this.err=c.status+" ("+c.statusText+")",t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this)}));return function(e,n,r,i){return t.apply(this,arguments)}}(),fetch:function(){var t=s(regeneratorRuntime.mark(function t(e,n){var r,o,s=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.fetch(e,n).catch(function(t){return s.err=t,!1});case 2:if((r=t.sent).ok){t.next=6;break}return this.err=r.status+" ("+r.statusText+")",t.abrupt("return",!1);case 6:return t.next=8,r.text().catch(function(t){return s.err=t,!1});case 8:return o=t.sent,t.abrupt("return",{value:o});case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),checkSession:function(){var t=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.currentSession();case 2:if(e=t.sent){t.next=6;break}return this.webId=void 0,t.abrupt("return",!1);case 6:return this.webId=e.webId,t.abrupt("return",{webId:e.webId});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),popupLogin:function(){var t=s(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.currentSession();case 2:if(e=t.sent,n="https://solid.community/common/popup.html",e){t.next=8;break}return t.next=7,i.default.popupLogin({popupUri:n});case 7:e=t.sent;case 8:return t.abrupt("return",e.webId);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),login:function(){var t=s(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.currentSession();case 2:if(n=t.sent){t.next=6;break}return t.next=6,i.default.login(e);case 6:return t.abrupt("return",n.webId);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),logout:function(){var t=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return session="",t.next=3,i.default.logout();case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getStats:function(t,e){e=r.default.sym(e);var n=r.default.sym("http://purl.org/dc/terms/modified"),i=r.default.sym("http://www.w3.org/ns/posix/stat#size"),o=r.default.sym("http://www.w3.org/ns/posix/stat#mtime");return{modified:t.any(e,n,void 0).value,size:t.any(e,i,void 0).value,mtime:t.any(e,o,void 0).value}},getFolderItems:function(t,e){for(var n={folders:[],files:[]},i=t.each(r.default.sym(e),r.default.sym("http://www.w3.org/ns/ldp#contains"),void 0),o=0;o<i.length;o++){var s=i[o],a={};a.type=this.getFileType(t,s.value);var u=this.getStats(t,s.value);if(a.modified=u.modified,a.size=u.size,a.mtime=u.mtime,a.label=decodeURIComponent(s.value).replace(/.*\//,""),"folder"===a.type){s.value=s.value.replace(/[/]+/g,"/"),s.value=s.value.replace(/https:/,"https:/");var c=s.value.replace(/\/$/,"");a.name=c.replace(/.*\//,""),a.url=s.value,n.folders.push(a)}else a.url=s.value,a.name=s.value.replace(/.*\//,""),"index.html"===a.name&&(this.hasIndexHtml=!0),n.files.push(a)}return n},processFolder:function(t,e,n,r){var i=this.getFolderItems(t,e),o=this.getStats(t,e),s=e.replace(/\/$/,""),a=s.replace(/.*\//,""),u=s.replace(a,"");return{type:"folder",name:a,url:e,modified:o.modified,size:o.size,mtime:o.mtime,parent:u,content:n,folders:i.folders,files:i.files}}},e.default=a}])});